{
  "display": {
    "title": "Simon Says"
  },
  "owner": "Agus",
  "contact": {
    "name": "Agus",
    "email": "agus@decentraland.org"
  },
  "scene": {
    "parcels": [
      "-200,235"
    ],
    "base": "-200,235"
  },
  "policy": {
    "fly": true,
    "voiceEnabled": true,
    "blacklist": [],
    "teleportPosition": "0,0,0"
  },
  "main": "game.js",
  "staticScene": null,
  "_mappings": {
    "game.js": "data:application/javascript;base64,Oy8qIEhlcmUgYmUgZHJhZ29ucyAqLwo7CnZhciB3aW5kb3cgPSB0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiAmJiBnbG9iYWwgfHwgdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgd2luZG93IHx8IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIHx8IHRoaXMgfHwge307Owp2YXIgZ2xvYmFsID0gd2luZG93OzsKCi8qIEdhbWVLaXQgKi8KIWZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSx0KTtlbHNle3ZhciBuPXQoKTtmb3IodmFyIGkgaW4gbikoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbaV09bltpXX19KHdpbmRvdyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD17fTtmdW5jdGlvbiBuKGkpe2lmKHRbaV0pcmV0dXJuIHRbaV0uZXhwb3J0czt2YXIgcj10W2ldPXtpOmksbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxuKSxyLmw9ITAsci5leHBvcnRzfXJldHVybiBuLm09ZSxuLmM9dCxuLmQ9ZnVuY3Rpb24oZSx0LGkpe24ubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGdldDppfSl9LG4ucj1mdW5jdGlvbihlKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24oZSx0KXtpZigxJnQmJihlPW4oZSkpLDgmdClyZXR1cm4gZTtpZig0JnQmJiJvYmplY3QiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKGkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiYic3RyaW5nIiE9dHlwZW9mIGUpZm9yKHZhciByIGluIGUpbi5kKGkscixmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0uYmluZChudWxsLHIpKTtyZXR1cm4gaX0sbi5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBuLmQodCwiYSIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9IiIsbihuLnM9OCl9KFtmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYocz0obzwzP3Iocyk6bz4zP3IodCxuLHMpOnIodCxuKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4scyksc30scj10aGlzJiZ0aGlzLl9fbWV0YWRhdGF8fGZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSlyZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShlLHQpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89bigyKSxzPW4oMSksYT1uKDMpLHU9big0KTt0LmxvZz1mdW5jdGlvbihlKXtjb25zb2xlLmxvZygiREVCVUc6IixlKX07dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZGF0YT1lLGNvbnNvbGUubG9nKCJFbmdpbmUgZXZlbnQiLGUpfXJldHVybiBlPWkoW3UuRXZlbnRDb25zdHJ1Y3RvcigiZW5naW5lRXZlbnQiKSxyKCJkZXNpZ246cGFyYW10eXBlcyIsW09iamVjdF0pXSxlKX0oKTt0LkVuZ2luZUV2ZW50PWM7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5ldmVudE1hbmFnZXI9bmV3IHUuRXZlbnRNYW5hZ2VyLHRoaXMucm9vdEVudGl0eT1uZXcgby5FbnRpdHkobnVsbCwic2NlbmUiKSx0aGlzLmVudGl0aWVzPXt9LHRoaXMuZW50aXR5TGlzdHM9e30sdGhpcy5zeXN0ZW1zPVtdLHRoaXMuaWRHZW5lcmF0b3I9MSx0aGlzLmFsbFJlcXVpcmVtZW50cz17fSx0aGlzLnNpbXBsZVN5c3RlbXM9W10sdGhpcy5yb290RW50aXR5LmVuZ2luZUlkPSIwIix0aGlzLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcihvLkNvbXBvbmVudEFkZGVkLHRoaXMsdGhpcy5jb21wb25lbnRBZGRlZCksdGhpcy5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoby5Db21wb25lbnRSZW1vdmVkLHRoaXMsdGhpcy5jb21wb25lbnRSZW1vdmVkKX1yZXR1cm4gZS5wcm90b3R5cGUuYWRkRW50aXR5PWZ1bmN0aW9uKGUpe2lmKGUuZW5naW5lSWQpdC5sb2coIlRoZSBlbnRpdHkgaXMgYWxyZWFkeSBpbiB0aGUgZW5naW5lLiBQbGVhc2UgZml4IHRoaXMiKTtlbHNle3ZhciBuPSh0aGlzLmlkR2VuZXJhdG9yKyspLnRvU3RyaW5nKDEwKTtlLmVuZ2luZUlkPW4sZS5ldmVudE1hbmFnZXI9dGhpcy5ldmVudE1hbmFnZXIsZS5wYXJlbnQ/bnVsbD09PWUucGFyZW50LmVuZ2luZUlkJiZ0LmxvZygiRW5naW5lOiB3YXJuaW5nLCBhZGRlZCBhIGVudGl0eSB3aXRoIGEgcGFyZW50IG5vdCBwcmVzZW50IGluIHRoZSBlbmdpbmUiKTplLnBhcmVudD10aGlzLnJvb3RFbnRpdHksdGhpcy5lbnRpdGllc1tuXT1lLHRoaXMuY2hlY2tSZXF1aXJlbWVudHNBbmRBZGQoZSksZS5hbGl2ZT0hMH19LGUucHJvdG90eXBlLnJlbW92ZUVudGl0eT1mdW5jdGlvbihlLG4saSl7dm9pZCAwPT09biYmKG49ITEpO3ZhciByPWUuZW5naW5lSWQ7aWYobnVsbCE9PXImJnRoaXMuZW50aXRpZXNbcl0pe2Zvcih2YXIgbyBpbiBlLmNvbXBvbmVudHMpe3ZhciBzPXRoaXMuYWxsUmVxdWlyZW1lbnRzW29dO2lmKHMpZm9yKHZhciBhIGluIHMpc1thXS5yZW1vdmVFbnRpdHkoZSk7ZGVsZXRlIHRoaXMuZW50aXR5TGlzdHNbb11bcl19Zm9yKHZhciB1PTA7dTx0aGlzLnNpbXBsZVN5c3RlbXMubGVuZ3RoO3UrKyl7dmFyIGM9dGhpcy5zaW1wbGVTeXN0ZW1zW3VdO2MuaGFzRW50aXR5KGUpJiZjLnJlbW92ZUVudGl0eShlKX1pZihuKWZvcih2YXIgdSBpbiBlLmNoaWxkcmVuKXsocD1lLmNoaWxkcmVuW3VdKSYmdGhpcy5yZW1vdmVFbnRpdHkocCwhMCl9ZWxzZSBmb3IodmFyIHUgaW4gZS5jaGlsZHJlbil7dmFyIHA7KHA9ZS5jaGlsZHJlblt1XSkmJihwLnBhcmVudD1pfHx0aGlzLnJvb3RFbnRpdHkpfWUuYWxpdmU9ITEsZS5ldmVudE1hbmFnZXI9bnVsbCxlLmVuZ2luZUlkPW51bGwsZGVsZXRlIHRoaXMuZW50aXRpZXNbcl19ZWxzZSBmb3IodmFyIG8gaW4gdC5sb2coIkVuZ2luZTogVHJ5aW5nIHRvIHJlbW92ZSBub24gZXhpc3RlbnQgZW50aXR5IGZyb20gZW5naW5lLiIpLHI/dC5sb2coIkVuZ2luZTogRW50aXR5IGlkOiAiK3IpOnQubG9nKCJFbmdpbmU6IEVudGl0eSBoYXMgbm90IGJlZW4gYWRkZWQgdG8gYW55IGVuZ2luZSB5ZXQuIChObyBlbnRpdHkuZW5naW5lSWQpIiksdC5sb2coIkVuZ2luZTogRW50aXR5J3MgY29tcG9uZW50czoiKSxlLmNvbXBvbmVudHMpdC5sb2cobyl9LGUucHJvdG90eXBlLmFkZFN5c3RlbT1mdW5jdGlvbihlKXtpZigtMT09PXRoaXMuc3lzdGVtcy5pbmRleE9mKGUpKWZvcih2YXIgbiBpbiB0aGlzLnN5c3RlbXMucHVzaChlKSxlLmFjdGl2ZT0hMCx0aGlzLnJlZ2lzdGVyU3lzdGVtKGUpLHRoaXMuZW50aXRpZXMpdGhpcy5jaGVja1JlcXVpcmVtZW50cyh0aGlzLmVudGl0aWVzW25dLGUpO2Vsc2UgdC5sb2coIkVuZ2luZTogVHJ5aW5nIHRvIGFkZCBhIHN5c3RlbSB0aGF0IGlzIGFscmVhZHkgYWRkZWQuIEFib3J0aW5nIil9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5zeXN0ZW1zKXsobj10aGlzLnN5c3RlbXNbdF0pLmFjdGl2ZSYmbi51cGRhdGUmJm4udXBkYXRlKGUpfWZvcih2YXIgdCBpbiB0aGlzLnN5c3RlbXMpe3ZhciBuOyhuPXRoaXMuc3lzdGVtc1t0XSkuYWN0aXZlJiZuLmRyYXcmJm4uZHJhdygpfX0sZS5wcm90b3R5cGUuZ2V0RW50aXRpZXNXaXRoQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3ZhciB0PSJzdHJpbmciPT10eXBlb2YgZT9lOnMuZ2V0Q29tcG9uZW50TmFtZShlKTtyZXR1cm4gdCBpbiB0aGlzLmVudGl0eUxpc3RzP3RoaXMuZW50aXR5TGlzdHNbdF06dGhpcy5lbnRpdHlMaXN0c1t0XT17fX0sZS5wcm90b3R5cGUucmVnaXN0ZXJTeXN0ZW09ZnVuY3Rpb24oZSl7aWYoZS5hY3RpdmU9ITAsZS5hY3RpdmF0ZSYmZS5hY3RpdmF0ZSh0aGlzKSxlIGluc3RhbmNlb2YgYS5Db21wb25lbnRTeXN0ZW0pZm9yKHZhciB0PWUucmVxdWlyZXNOYW1lcyxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl0scj10aGlzLmFsbFJlcXVpcmVtZW50c1tpXTtyfHwodGhpcy5hbGxSZXF1aXJlbWVudHNbaV09cj1bXSksLTE9PT1yLmluZGV4T2YoZSkmJnIucHVzaChlKX1lbHNlIHRoaXMuc2ltcGxlU3lzdGVtcy5wdXNoKGUpfSxlLnByb3RvdHlwZS5jaGVja1JlcXVpcmVtZW50c0FuZEFkZD1mdW5jdGlvbihlKXtpZihudWxsIT09ZS5lbmdpbmVJZCl7Zm9yKHZhciB0IGluIGUuY29tcG9uZW50cyl7dCBpbiB0aGlzLmVudGl0eUxpc3RzfHwodGhpcy5lbnRpdHlMaXN0c1t0XT17fSksdGhpcy5lbnRpdHlMaXN0c1t0XVtlLmVuZ2luZUlkXT1lO3ZhciBuPXRoaXMuYWxsUmVxdWlyZW1lbnRzW3RdO2lmKG4pZm9yKHZhciBpIGluIG4pdGhpcy5jaGVja1JlcXVpcmVtZW50cyhlLG5baV0pfWZvcih2YXIgcj0wO3I8dGhpcy5zaW1wbGVTeXN0ZW1zLmxlbmd0aDtyKyspdGhpcy5jaGVja1JlcXVpcmVtZW50cyhlLHRoaXMuc2ltcGxlU3lzdGVtc1tyXSl9fSxlLnByb3RvdHlwZS5jaGVja1JlcXVpcmVtZW50cz1mdW5jdGlvbihlLHQpe3QubWVldHNSZXF1aXJlbWVudHMoZSk/dC5oYXNFbnRpdHkoZSl8fHQuYWRkRW50aXR5KGUpOnQuaGFzRW50aXR5KGUpJiZ0LnJlbW92ZUVudGl0eShlKX0sZS5wcm90b3R5cGUuY29tcG9uZW50QWRkZWQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmVudGl0eSxpPWUuY29tcG9uZW50TmFtZTtpZihudWxsIT09bi5lbmdpbmVJZCl7dGhpcy5lbnRpdHlMaXN0c1tpXT90aGlzLmVudGl0eUxpc3RzW2ldW24uZW5naW5lSWRdPW46dGhpcy5lbnRpdHlMaXN0c1tpXT0oKHQ9e30pW24uZW5naW5lSWRdPW4sdCk7dmFyIHI9dGhpcy5hbGxSZXF1aXJlbWVudHNbaV07aWYocilmb3IodmFyIG8gaW4gcil0aGlzLmNoZWNrUmVxdWlyZW1lbnRzKG4scltvXSl9fSxlLnByb3RvdHlwZS5jb21wb25lbnRSZW1vdmVkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZW50aXR5LG49ZS5jb21wb25lbnROYW1lO2lmKG51bGwhPT10LmVuZ2luZUlkKXtkZWxldGUgdGhpcy5lbnRpdHlMaXN0c1tuXVt0LmVuZ2luZUlkXTt2YXIgaT10aGlzLmFsbFJlcXVpcmVtZW50c1tuXTtpZihpKWZvcih2YXIgciBpbiBpKXRoaXMuY2hlY2tSZXF1aXJlbWVudHModCxpW3JdKX19LGV9KCk7dC5FbmdpbmU9cH0sZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIGU7dmFyIGkscixvPW4uY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYobj1vLnJldHVybikmJm4uY2FsbChvKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19cmV0dXJuIHN9LHI9dGhpcyYmdGhpcy5fX3NwcmVhZHx8ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZT1lLmNvbmNhdChpKGFyZ3VtZW50c1t0XSkpO3JldHVybiBlfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89Il9fbmFtZV9fc3ltYm9sXyI7dC5Db21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQuaXNDb21wb25lbnQpdGhyb3cgbmV3IFR5cGVFcnJvcigiWW91IGNhbm5vdCBleHRlbmQgYSBjb21wb25lbnQuIFRyeWluZyB0byBleHRlbmQgIit0Lm9yaWdpbmFsQ2xhc3NOYW1lKyIgd2l0aDogIitlKTt2YXIgbj10LGk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcobi5iaW5kLmFwcGx5KG4scihbdm9pZCAwXSxhcmd1bWVudHMpKSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8se2VudW1lcmFibGU6ITEsd3JpdGFibGU6ITEsY29uZmlndXJhYmxlOiExLHZhbHVlOmV9KSx0fTtyZXR1cm4gaVtvXT1lLGkuaXNDb21wb25lbnQ9ITAsaS5vcmlnaW5hbENsYXNzTmFtZT1lLGl9fSx0LmdldENvbXBvbmVudE5hbWU9ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgY29tcG9uZW50LiIpO2lmKGVbb10pcmV0dXJuIGVbb107dGhyb3cgbmV3IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgcmVnaXN0ZXJlZCBjb21wb25lbnQuIil9O3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZGlydHk9ITEsdGhpcy5kYXRhPXt9fXJldHVybiBlLmZpZWxkPWZ1bmN0aW9uKGUsdCl7ZGVsZXRlIGVbdF0mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQudG9TdHJpbmcoKSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVt0XX0sc2V0OmZ1bmN0aW9uKGUpe2UhPT10aGlzLmRhdGFbdF0mJih0aGlzLmRpcnR5PSEwLHRoaXMuZGF0YVt0XT1lKX0sZW51bWVyYWJsZTohMH0pfSxlLnJlYWRvbmx5PWZ1bmN0aW9uKGUsdCl7ZGVsZXRlIGVbdF0mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQudG9TdHJpbmcoKSx7Z2V0OmZ1bmN0aW9uKCl7aWYodCBpbiB0aGlzLmRhdGE9PSExKXRocm93IG5ldyBFcnJvcigiVGhlIGZpZWxkICIrdCsiIGlzIHVuaW5pdGlhbGl6ZWQiKTtyZXR1cm4gdGhpcy5kYXRhW3RdfSxzZXQ6ZnVuY3Rpb24oZSl7aWYodCBpbiB0aGlzLmRhdGEpdGhyb3cgbmV3IEVycm9yKCJUaGUgZmllbGQgIit0KyIgaXMgcmVhZG9ubHkiKTt0aGlzLmRhdGFbdF09ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITF9KX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX0sZX0oKTt0LlByb3h5Q29tcG9uZW50PXN9LGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihzPShvPDM/cihzKTpvPjM/cih0LG4scyk6cih0LG4pKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixzKSxzfSxyPXRoaXMmJnRoaXMuX19tZXRhZGF0YXx8ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhKXJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGUsdCl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLHM9bigwKSxhPW4oNCk7ZnVuY3Rpb24gdSgpe3JldHVybiJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgiLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihlKXt2YXIgdD0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKCJ4Ij09PWU/dDozJnR8OCkudG9TdHJpbmcoMTYpfSl9dC51dWlkPXU7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5lbnRpdHk9ZSx0aGlzLmNvbXBvbmVudE5hbWU9dH1yZXR1cm4gZT1pKFthLkV2ZW50Q29uc3RydWN0b3IoImRjbC1jb21wb25lbnQtcmVtb3ZlZCIpLHIoImRlc2lnbjpwYXJhbXR5cGVzIixbZCxTdHJpbmddKV0sZSl9KCk7dC5Db21wb25lbnRSZW1vdmVkPWM7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5lbnRpdHk9ZSx0aGlzLmNvbXBvbmVudE5hbWU9dH1yZXR1cm4gZT1pKFthLkV2ZW50Q29uc3RydWN0b3IoImRjbC1jb21wb25lbnQtYWRkZWQiKSxyKCJkZXNpZ246cGFyYW10eXBlcyIsW2QsU3RyaW5nXSldLGUpfSgpO3QuQ29tcG9uZW50QWRkZWQ9cDt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2b2lkIDA9PT1lJiYoZT1udWxsKSx0aGlzLm5hbWU9dCx0aGlzLmNoaWxkcmVuPXt9LHRoaXMuZXZlbnRNYW5hZ2VyPW51bGwsdGhpcy5hbGl2ZT0hMSx0aGlzLnV1aWQ9dSgpLHRoaXMuY29tcG9uZW50cz17fSx0aGlzLl9wYXJlbnQ9bnVsbCx0aGlzLl9lbmdpbmVJZD1udWxsLHRoaXMucGFyZW50PWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZW5naW5lSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lSWR9LHNldDpmdW5jdGlvbihlKXtpZihlIT09dGhpcy5fZW5naW5lSWQpaWYobnVsbCE9PWUmJm51bGw9PT10aGlzLl9lbmdpbmVJZCl0aGlzLl9lbmdpbmVJZD1lO2Vsc2V7aWYobnVsbCE9PWV8fG51bGw9PT10aGlzLl9lbmdpbmVJZCl0aHJvdyBuZXcgRXJyb3IoIkVudGl0eSNzZXRFbmdpbmVJZDogQ2Fubm90IGNoYW5nZSB0aGUgZW5naW5lSWQgb24gdGhlIGZseS4gVGhlIGVudGl0eSBtdXN0IGJlIHJlbW92ZWQgZnJvbSB0aGUgZW5naW5lIGZpcnN0LiIpO3RoaXMucGFyZW50PW51bGwsdGhpcy5fZW5naW5lSWQ9bnVsbH19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJwYXJlbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyZW50fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQmJm51bGwhPT10aGlzLmVuZ2luZUlkJiZkZWxldGUgdGhpcy5wYXJlbnQuY2hpbGRyZW5bdGhpcy5lbmdpbmVJZF0sdGhpcy5fcGFyZW50PWV8fG51bGwsdGhpcy5yZWdpc3RlckFzQ2hpbGQoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9by5nZXRDb21wb25lbnROYW1lKGUpO3RoaXMuY29tcG9uZW50c1t0XT90aGlzLmNvbXBvbmVudHNbdF09ZTp0aGlzLmFkZChlKX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uZ2V0Q29tcG9uZW50TmFtZShlKTtyZXR1cm4hIXRoaXMuY29tcG9uZW50c1t0XX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PSJzdHJpbmciPT10eXBlb2YgZT9lOm8uZ2V0Q29tcG9uZW50TmFtZShlKTtpZighdGhpcy5jb21wb25lbnRzW3RdKXRocm93IG5ldyBFcnJvcigiRW50aXR5IGhhcyBubyBjb21wb25lbnQgIit0KTtyZXR1cm4gdGhpcy5jb21wb25lbnRzW3RdfSxlLnByb3RvdHlwZS5nZXRPck51bGw9ZnVuY3Rpb24oZSl7dmFyIHQ9InN0cmluZyI9PXR5cGVvZiBlP2U6by5nZXRDb21wb25lbnROYW1lKGUpO3JldHVybiB0aGlzLmNvbXBvbmVudHNbdF18fG51bGx9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1vLmdldENvbXBvbmVudE5hbWUoZSk7aWYodGhpcy5jb21wb25lbnRzW3RdKXRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgYWxyZWFkeSBhIGNvbXBvbmVudCBvZiB0eXBlICInK3QrJyIgaW4gdGhpcyBlbnRpdHkuJyk7dGhpcy5jb21wb25lbnRzW3RdPWUsdGhpcy5ldmVudE1hbmFnZXImJnRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgcCh0aGlzLHQpKX0sZS5wcm90b3R5cGUuYWRkT3JSZXBsYWNlPWZ1bmN0aW9uKGUpe3ZhciB0PW8uZ2V0Q29tcG9uZW50TmFtZShlKTt0aGlzLmNvbXBvbmVudHNbdF09ZSx0aGlzLmV2ZW50TWFuYWdlciYmdGhpcy5ldmVudE1hbmFnZXIuZmlyZUV2ZW50KG5ldyBwKHRoaXMsdCkpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9by5nZXRDb21wb25lbnROYW1lKGUpO3RoaXMuY29tcG9uZW50c1t0XT9kZWxldGUgdGhpcy5jb21wb25lbnRzW3RdOnMubG9nKCJFbnRpdHk6IFRyeWluZyB0byByZW1vdmUgdW5leGlzdGluZyBjb21wb25lbnQgIit0KyIgcGxlYXNlIGZpeCB0aGlzIiksdGhpcy5ldmVudE1hbmFnZXImJnRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgYyh0aGlzLHQpKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJBc0NoaWxkPWZ1bmN0aW9uKCl7dGhpcy5lbmdpbmVJZCYmdGhpcy5wYXJlbnQmJih0aGlzLnBhcmVudC5jaGlsZHJlblt0aGlzLmVuZ2luZUlkXT10aGlzKX0sZX0oKTt0LkVudGl0eT1kfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihpLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgaSl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDEpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5lbnRpdGllcz17fSx0aGlzLmFjdGl2ZT0hMX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzRW50aXR5PWZ1bmN0aW9uKGUpe3JldHVybiEhZS5lbmdpbmVJZCYmISF0aGlzLmVudGl0aWVzW2UuZW5naW5lSWRdfSxlLnByb3RvdHlwZS5hZGRFbnRpdHk9ZnVuY3Rpb24oZSl7aWYoIWUuZW5naW5lSWQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3lzdGVtOiBDYW5ub3QgYWRkIGEgZW50aXR5IHRoYXQgaXMgbm90IGFkZGVkIHRvIHRoZSBlbmdpbmUiKTt2YXIgdD0hIXRoaXMuZW50aXRpZXNbZS5lbmdpbmVJZF07dGhpcy5lbnRpdGllc1tlLmVuZ2luZUlkXT1lLCF0JiZ0aGlzLm9uQWRkRW50aXR5JiZ0aGlzLm9uQWRkRW50aXR5KGUpfSxlLnByb3RvdHlwZS5yZW1vdmVFbnRpdHk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmdpbmVJZCxuPSExO2lmKHQpbj1kZWxldGUgdGhpcy5lbnRpdGllc1t0XTtlbHNlIGZvcih2YXIgaSBpbiB0aGlzLmVudGl0aWVzKXRoaXMuZW50aXRpZXNbaV09PT1lJiYobj0hMCxkZWxldGUgdGhpcy5lbnRpdGllc1tpXSk7biYmdGhpcy5vblJlbW92ZUVudGl0eSYmdGhpcy5vblJlbW92ZUVudGl0eShlKX0sZS5wcm90b3R5cGUubWVldHNSZXF1aXJlbWVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuITB9LGV9KCk7dC5TeXN0ZW09bzt2YXIgcz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztpZihpLl9yZXF1aXJlcz1bXSxpLl9yZXF1aXJlc05hbWVzPVtdLCFpLnJlcXVpcmVzKXRocm93IG5ldyBFcnJvcigiQ29tcG9uZW50U3lzdGVtOiBDb3VsZCBub3QgbG9hZCB0aGUgcmVxdWlyZXMgbGlzdCIpO2lmKCEoaS5yZXF1aXJlcyBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgRXJyb3IoIkNvbXBvbmVudFN5c3RlbTogcmVxdWlyZXMgbGlzdCBpcyBub3QgYW4gQXJyYXkiKTtyZXR1cm4gaS5fcmVxdWlyZXM9dCxpLl9yZXF1aXJlcy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNvbXBvbmVudFN5c3RlbTogdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBhdCBsb2NhdGlvbiAiK3QrIiBpcyBpbnZhbGlkIik7dHJ5e249ci5nZXRDb21wb25lbnROYW1lKGUpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigiQ29tcG9uZW50U3lzdGVtOiB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGF0IGxvY2F0aW9uICIrdCsiIGlzIG5vdCByZWdpc3RlcmVkLiBSZW1lbWJlciB0byBwYXNzIHRoZSBjbGFzcyBvZiB0aGUgY29tcG9uZW50LCBub3QgdGhlIG5hbWUiKX1pZihpLl9yZXF1aXJlc05hbWVzLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1ufSkpdGhyb3cgbmV3IEVycm9yKCJDb21wb25lbnRTeXN0ZW06IHRoZSByZXF1aXJlZCBjb21wb25lbnQgbGlzdCBoYXMgYSByZXBlYXRlZCBuYW1lICIrbik7aS5fcmVxdWlyZXNOYW1lcy5wdXNoKG4pfSksaX1yZXR1cm4gaSh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwicmVxdWlyZXNOYW1lcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1aXJlc05hbWVzLnNsaWNlKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJyZXF1aXJlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1aXJlcy5zbGljZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNvbXBvbmVudFJlbW92ZWQ9ZnVuY3Rpb24oZSx0KXstMSE9PXRoaXMuX3JlcXVpcmVzTmFtZXMuaW5kZXhPZih0KSYmdGhpcy5yZW1vdmVFbnRpdHkoZSl9LHQucHJvdG90eXBlLm1lZXRzUmVxdWlyZW1lbnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fcmVxdWlyZXNOYW1lcy5sZW5ndGg7dCsrKXtpZighKHRoaXMuX3JlcXVpcmVzTmFtZXNbdF1pbiBlLmNvbXBvbmVudHMpKXJldHVybiExfXJldHVybiEwfSx0fShvKTt0LkNvbXBvbmVudFN5c3RlbT1zfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDApLHI9Il9fZXZlbnRfbmFtZV9fIixvPVtdO2Z1bmN0aW9uIHMoZSl7aWYoIShyIGluIGUpfHwic3RyaW5nIiE9dHlwZW9mIGVbcl0pdGhyb3cgbmV3IEVycm9yKCJUaGUgRXZlbnRDb25zdHJ1Y3RvciBpcyBub3QgcmVnaXN0ZXJlZCIpO3JldHVybiBlW3JdfXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubGlzdGVuZXJzPXt9fXJldHVybiBlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQsbil7aWYoIWV8fCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBFdmVudENvbnN0cnVjdG9yIik7dmFyIGk9cyhlKSxyPXRoaXMubGlzdGVuZXJzW2ldO3J8fChyPXRoaXMubGlzdGVuZXJzW2ldPVtdKTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7aWYocltvXS5saXN0ZW5lcj09PXQpdGhyb3cgbmV3IEVycm9yKCJUaGUgcHJvdmlkZWQgbGlzdGVuZXIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIil9ci5wdXNoKHtsaXN0ZW5lcjp0LGZuOm59KX0sZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtpZighdHx8ImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIEV2ZW50Q29uc3RydWN0b3IiKTt2YXIgbj1zKHQpLGk9dGhpcy5saXN0ZW5lcnNbbl07aWYoIWkpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxpLmxlbmd0aDtyKyspe2lmKGlbcl0ubGlzdGVuZXI9PT1lKXJldHVybiBpLnNwbGljZShyLDEpLCEwfXJldHVybiExfSxlLnByb3RvdHlwZS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9cyhlLmNvbnN0cnVjdG9yKSxuPXRoaXMubGlzdGVuZXJzW3RdO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspdHJ5e3ZhciBvPW5bcl07by5mbi5jYWxsKG8ubGlzdGVuZXIsZSl9Y2F0Y2goZSl7aS5sb2coZSl9fSxlfSgpO3QuRXZlbnRNYW5hZ2VyPWEsdC5FdmVudENvbnN0cnVjdG9yPWZ1bmN0aW9uKGUpe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGV2ZW50IG5hbWUgIitlKTtpZigtMSE9PW8uaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBldmVudCBuYW1lICIrZSsiIGlzIGFscmVhZHkgdGFrZW4iKTtyZXR1cm4gby5wdXNoKGUpLGZ1bmN0aW9uKHQpe3JldHVybiB0W3JdPWUsdH19fSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYocz0obzwzP3Iocyk6bz4zP3IodCxuLHMpOnIodCxuKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4scyksc307T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oNCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGU9aShbci5FdmVudENvbnN0cnVjdG9yKCJ1dWlkRXZlbnQiKV0sZSl9KCk7dC5VVUlERXZlbnQ9b30sZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooaS5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IGkpfX0oKSxyPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYocz0obzwzP3Iocyk6bz4zP3IodCxuLHMpOnIodCxuKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4scyksc30sbz10aGlzJiZ0aGlzLl9fbWV0YWRhdGF8fGZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSlyZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShlLHQpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9bigxKSxhPW4oMiksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixpKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT0wKTt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIueD0wLHIueT0wLHIuej0wLHIueD10LHIueT1uLHIuej1pLHJ9cmV0dXJuIGkodCxlKSxyKFtzLlByb3h5Q29tcG9uZW50LmZpZWxkLG8oImRlc2lnbjp0eXBlIixOdW1iZXIpXSx0LnByb3RvdHlwZSwieCIsdm9pZCAwKSxyKFtzLlByb3h5Q29tcG9uZW50LmZpZWxkLG8oImRlc2lnbjp0eXBlIixOdW1iZXIpXSx0LnByb3RvdHlwZSwieSIsdm9pZCAwKSxyKFtzLlByb3h5Q29tcG9uZW50LmZpZWxkLG8oImRlc2lnbjp0eXBlIixOdW1iZXIpXSx0LnByb3RvdHlwZSwieiIsdm9pZCAwKSx0fShzLlByb3h5Q29tcG9uZW50KTt0LlZlY3Rvcj11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdD1yKFtzLkNvbXBvbmVudCgiZW5naW5lLnBvc2l0aW9uIildLHQpfSh1KTt0LlBvc2l0aW9uPWM7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIGkodCxlKSx0PXIoW3MuQ29tcG9uZW50KCJlbmdpbmUucm90YXRpb24iKV0sdCl9KHUpO3QuUm90YXRpb249cDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHQ9cihbcy5Db21wb25lbnQoImVuZ2luZS5zY2FsZSIpXSx0KX0odSk7dC5TY2FsZT1kO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdH0ocy5Qcm94eUNvbXBvbmVudCk7dC5TaGFwZT1mO3ZhciBsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQudGFnPSJib3giLHR9cmV0dXJuIGkodCxlKSxyKFtzLlByb3h5Q29tcG9uZW50LnJlYWRvbmx5LG8oImRlc2lnbjp0eXBlIixTdHJpbmcpXSx0LnByb3RvdHlwZSwidGFnIix2b2lkIDApLHQ9cihbcy5Db21wb25lbnQoImVuZ2luZS5zaGFwZSIpXSx0KX0oZik7dC5Cb3hTaGFwZT1sO3ZhciBoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQudGFnPSJzcGhlcmUiLHR9cmV0dXJuIGkodCxlKSxyKFtzLlByb3h5Q29tcG9uZW50LnJlYWRvbmx5LG8oImRlc2lnbjp0eXBlIixTdHJpbmcpXSx0LnByb3RvdHlwZSwidGFnIix2b2lkIDApLHQ9cihbcy5Db21wb25lbnQoImVuZ2luZS5zaGFwZSIpXSx0KX0oZik7dC5TcGhlcmVTaGFwZT1oO3ZhciB5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQudGFnPSJwbGFuZSIsdH1yZXR1cm4gaSh0LGUpLHIoW3MuUHJveHlDb21wb25lbnQucmVhZG9ubHksbygiZGVzaWduOnR5cGUiLFN0cmluZyldLHQucHJvdG90eXBlLCJ0YWciLHZvaWQgMCksdD1yKFtzLkNvbXBvbmVudCgiZW5naW5lLnNoYXBlIildLHQpfShmKTt0LlBsYW5lU2hhcGU9eTt2YXIgbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi50YWc9ImdsdGYtbW9kZWwiLG4uc3JjPXQsbn1yZXR1cm4gaSh0LGUpLHIoW3MuUHJveHlDb21wb25lbnQucmVhZG9ubHksbygiZGVzaWduOnR5cGUiLFN0cmluZyldLHQucHJvdG90eXBlLCJ0YWciLHZvaWQgMCkscihbZi5yZWFkb25seSxvKCJkZXNpZ246dHlwZSIsU3RyaW5nKV0sdC5wcm90b3R5cGUsInNyYyIsdm9pZCAwKSx0PXIoW3MuQ29tcG9uZW50KCJlbmdpbmUuc2hhcGUiKSxvKCJkZXNpZ246cGFyYW10eXBlcyIsW1N0cmluZ10pXSx0KX0oZik7dC5HTFRGU2hhcGU9bTt2YXIgdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi50YWc9Im9iai1tb2RlbCIsbi5zcmM9dCxufXJldHVybiBpKHQsZSkscihbcy5Qcm94eUNvbXBvbmVudC5yZWFkb25seSxvKCJkZXNpZ246dHlwZSIsU3RyaW5nKV0sdC5wcm90b3R5cGUsInRhZyIsdm9pZCAwKSxyKFtzLlByb3h5Q29tcG9uZW50LnJlYWRvbmx5LG8oImRlc2lnbjp0eXBlIixTdHJpbmcpXSx0LnByb3RvdHlwZSwic3JjIix2b2lkIDApLHQ9cihbcy5Db21wb25lbnQoImVuZ2luZS5zaGFwZSIpLG8oImRlc2lnbjpwYXJhbXR5cGVzIixbU3RyaW5nXSldLHQpfShmKTt0Lk9CSlNoYXBlPXY7dmFyIGc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udXVpZD1hLnV1aWQoKSxuLmNhbGxiYWNrPXQsbn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnV1aWR9LHIoW3MuUHJveHlDb21wb25lbnQucmVhZG9ubHksbygiZGVzaWduOnR5cGUiLFN0cmluZyldLHQucHJvdG90eXBlLCJ1dWlkIix2b2lkIDApLHIoW3MuUHJveHlDb21wb25lbnQuZmllbGQsbygiZGVzaWduOnR5cGUiLEZ1bmN0aW9uKV0sdC5wcm90b3R5cGUsImNhbGxiYWNrIix2b2lkIDApLHQ9cihbcy5Db21wb25lbnQoImVuZ2luZS5vbkNsaWNrIiksbygiZGVzaWduOnBhcmFtdHlwZXMiLFtGdW5jdGlvbl0pXSx0KX0ocy5Qcm94eUNvbXBvbmVudCk7dC5PbkNsaWNrPWd9LGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KGkucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBpKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMyksbz1uKDYpLHM9big1KSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5jYWxsKHRoaXMsby5PbkNsaWNrKXx8dGhpc31yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGUpe2UuZXZlbnRNYW5hZ2VyLmFkZExpc3RlbmVyKHMuVVVJREV2ZW50LHRoaXMsdGhpcy5oYW5kbGVFdmVudCl9LHQucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLmVudGl0aWVzKXt2YXIgbj10aGlzLmVudGl0aWVzW3RdLmdldE9yTnVsbChvLk9uQ2xpY2spO24mJm4udXVpZD09PWUudXVpZCYmbi5jYWxsYmFjayhlLnBheWxvYWQpfX0sdH0oci5Db21wb25lbnRTeXN0ZW0pO3QuT25DbGlja1N5c3RlbT1hfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkoZSl7Zm9yKHZhciBuIGluIGUpdC5oYXNPd25Qcm9wZXJ0eShuKXx8KHRbbl09ZVtuXSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGkobigwKSksaShuKDEpKSxpKG4oMykpLGkobigyKSksaShuKDYpKSxpKG4oNykpLGkobig1KSk7dmFyIHI9big3KSxvPW4oOSkscz1uZXcobigwKS5FbmdpbmUpO3QuZW5naW5lPXM7dmFyIGE9bmV3IHIuT25DbGlja1N5c3RlbTt0Lm9uQ2xpY2tTeXN0ZW09YSxzLmFkZFN5c3RlbShhKSwidW5kZWZpbmVkIiE9dHlwZW9mIGRjbCYmcy5hZGRTeXN0ZW0obmV3IG8uRGVjZW50cmFsYW5kU3luY2hyb25pemF0aW9uU3lzdGVtKGRjbCkpfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihpLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgaSl9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDMpLG89bigwKSxzPW4oMiksYT1uKDUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uZGNsPXQsbi5jYWNoZWRDb21wb25lbnRzPXt9LG59cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZXZlbnRNYW5hZ2VyLmFkZExpc3RlbmVyKHMuQ29tcG9uZW50QWRkZWQsdGhpcyx0aGlzLmNvbXBvbmVudEFkZGVkKSxlLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcihzLkNvbXBvbmVudFJlbW92ZWQsdGhpcyx0aGlzLmNvbXBvbmVudFJlbW92ZWQpO3ZhciBuPWUucm9vdEVudGl0eS5lbmdpbmVJZDtudWxsIT09biYmdGhpcy5kY2wuYWRkRW50aXR5KG4pLHRoaXMuZGNsLnN1YnNjcmliZSgidXVpZEV2ZW50IiksdGhpcy5kY2wub25VcGRhdGUoZnVuY3Rpb24obil7ZS51cGRhdGUobiksdC5wcmVzZW50RW50aXRpZXMoKX0pLHRoaXMuZGNsLm9uRXZlbnQoZnVuY3Rpb24odCl7c3dpdGNoKHQudHlwZSl7Y2FzZSJ1dWlkRXZlbnQiOnZhciBuPW5ldyBhLlVVSURFdmVudDtuLnV1aWQ9dC5kYXRhLnV1aWQsbi5wYXlsb2FkPXQuZGF0YS5wYXlsb2FkLGUuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuKTticmVhaztkZWZhdWx0OmUuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgby5FbmdpbmVFdmVudCh0KSl9fSl9LHQucHJvdG90eXBlLm9uQWRkRW50aXR5PWZ1bmN0aW9uKGUpe3ZhciB0PWUuZW5naW5lSWQ7dCYmKHRoaXMuZGNsLmFkZEVudGl0eSh0KSxlLnBhcmVudCYmbnVsbCE9PWUucGFyZW50LmVuZ2luZUlkJiZ0aGlzLmRjbC5zZXRQYXJlbnQodCxlLnBhcmVudC5lbmdpbmVJZCksdGhpcy5kY2wudXBkYXRlRW50aXR5KHQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlLmNvbXBvbmVudHMpKSkpfSx0LnByb3RvdHlwZS5vblJlbW92ZUVudGl0eT1mdW5jdGlvbihlKXt2YXIgdD1lLmVuZ2luZUlkO3QmJihkZWxldGUgdGhpcy5jYWNoZWRDb21wb25lbnRzW3RdLHRoaXMuZGNsLnJlbW92ZUVudGl0eSh0KSl9LHQucHJvdG90eXBlLnByZXNlbnRFbnRpdGllcz1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0aGlzLmVudGl0aWVzKXt2YXIgdD10aGlzLmVudGl0aWVzW2VdLG49dC5lbmdpbmVJZDtpZihuKXt2YXIgaT1KU09OLnN0cmluZ2lmeSh0LmNvbXBvbmVudHMpO3RoaXMuY2FjaGVkQ29tcG9uZW50c1tuXSE9PWkmJih0aGlzLmNhY2hlZENvbXBvbmVudHNbbl09aSx0aGlzLmRjbC51cGRhdGVFbnRpdHkobixKU09OLnBhcnNlKGkpKSl9fX0sdC5wcm90b3R5cGUuY29tcG9uZW50QWRkZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbnRpdHksbj1lLmNvbXBvbmVudE5hbWU7dC5lbmdpbmVJZCYmdGhpcy5kY2wuY29tcG9uZW50QWRkZWQodC5lbmdpbmVJZCxuLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodC5nZXQobikpKSl9LHQucHJvdG90eXBlLmNvbXBvbmVudFJlbW92ZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbnRpdHksbj1lLmNvbXBvbmVudE5hbWU7dC5lbmdpbmVJZCYmdGhpcy5kY2wuY29tcG9uZW50UmVtb3ZlZCh0LmVuZ2luZUlkLG4pfSx0fShyLlN5c3RlbSk7dC5EZWNlbnRyYWxhbmRTeW5jaHJvbml6YXRpb25TeXN0ZW09dX1dKX0pOzsKCi8qIEFNRCAqLwooZnVuY3Rpb24oZ2xvYmFsKXsidXNlIHN0cmljdCI7dmFyIGFub255bW91c19xdWV1ZT1bXTt2YXIgc2V0dGluZ3M9e2Jhc2VVcmw6IiJ9O3ZhciBleHBvcnRzPXt9O2Z1bmN0aW9uIGNvbmZpZyhjb25maWcpe2lmKHR5cGVvZiBjb25maWc9PT0ib2JqZWN0Iil7Zm9yKHZhciB4IGluIGNvbmZpZyl7Y29uZmlnLmhhc093blByb3BlcnR5KHgpJiYoc2V0dGluZ3NbeF09Y29uZmlnW3hdKX19fWZ1bmN0aW9uIGRlZmluZShpZCxkZXBlbmRlbmNpZXMsZmFjdG9yeSl7dmFyIGFyZ19jb3VudD1hcmd1bWVudHMubGVuZ3RoO2lmKGFyZ19jb3VudD09PTEpe2ZhY3Rvcnk9aWQ7ZGVwZW5kZW5jaWVzPVsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiXTtpZD1udWxsfWVsc2UgaWYoYXJnX2NvdW50PT09Mil7aWYoc2V0dGluZ3MudG9TdHJpbmcuY2FsbChpZCk9PT0iW29iamVjdCBBcnJheV0iKXtmYWN0b3J5PWRlcGVuZGVuY2llcztkZXBlbmRlbmNpZXM9aWQ7aWQ9bnVsbH1lbHNle2ZhY3Rvcnk9ZGVwZW5kZW5jaWVzO2RlcGVuZGVuY2llcz1bInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIl19fWlmKCFpZCl7YW5vbnltb3VzX3F1ZXVlLnB1c2goW2RlcGVuZGVuY2llcyxmYWN0b3J5XSk7cmV0dXJufWZ1bmN0aW9uIHJlYWR5KCl7dmFyIGhhbmRsZXJzLGNvbnRleHQsbW9kdWxlO2lmKGV4cG9ydHNbaWRdKXtoYW5kbGVycz1leHBvcnRzW2lkXS5oYW5kbGVycztjb250ZXh0PWV4cG9ydHNbaWRdLmNvbnRleHR9bW9kdWxlPWV4cG9ydHNbaWRdPXR5cGVvZiBmYWN0b3J5PT09ImZ1bmN0aW9uIj9mYWN0b3J5LmFwcGx5KG51bGwsYW5vbnltb3VzX3F1ZXVlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKXx8ZXhwb3J0c1tpZF18fHt9OmZhY3Rvcnk7bW9kdWxlLmRjbGFtZD0yO21vZHVsZS5jb250ZXh0PWNvbnRleHQ7Zm9yKHZhciB4PTAseGw9aGFuZGxlcnM/aGFuZGxlcnMubGVuZ3RoOjA7eDx4bDt4Kyspe2hhbmRsZXJzW3hdKG1vZHVsZSl9fXJlcXVpcmUoZGVwZW5kZW5jaWVzLHJlYWR5LGlkKX1kZWZpbmUuYW1kPXt9O2Z1bmN0aW9uIHJlcXVpcmUobW9kdWxlcyxjYWxsYmFjayxjb250ZXh0KXt2YXIgbG9hZGVkX21vZHVsZXM9W10sbG9hZGVkX2NvdW50PTAsaGFzX2xvYWRlZD1mYWxzZTtpZih0eXBlb2YgbW9kdWxlcz09PSJzdHJpbmciKXtpZihleHBvcnRzW21vZHVsZXNdJiZleHBvcnRzW21vZHVsZXNdLmRjbGFtZD09PTIpe3JldHVybiBleHBvcnRzW21vZHVsZXNdfXRocm93IG5ldyBFcnJvcihtb2R1bGVzKyIgaGFzIG5vdCBiZWVuIGRlZmluZWQuIFBsZWFzZSBpbmNsdWRlIGl0IGFzIGEgZGVwZW5kZW5jeSBpbiAiK2NvbnRleHQrIidzIGRlZmluZSgpIil9dmFyIHhsPW1vZHVsZXMubGVuZ3RoO2Zvcih2YXIgeD0wO3g8eGw7eCsrKXtzd2l0Y2gobW9kdWxlc1t4XSl7Y2FzZSJyZXF1aXJlIjp2YXIgX3JlcXVpcmU9ZnVuY3Rpb24obmV3X21vZHVsZSxjYWxsYmFjayl7cmV0dXJuIHJlcXVpcmUobmV3X21vZHVsZSxjYWxsYmFjayxjb250ZXh0KX07X3JlcXVpcmUudG9Vcmw9ZnVuY3Rpb24obW9kdWxlKXtyZXR1cm4gdG9VcmwobW9kdWxlLGNvbnRleHQpfTtsb2FkZWRfbW9kdWxlc1t4XT1fcmVxdWlyZTtsb2FkZWRfY291bnQrKzticmVhaztjYXNlImV4cG9ydHMiOmxvYWRlZF9tb2R1bGVzW3hdPWV4cG9ydHNbY29udGV4dF18fChleHBvcnRzW2NvbnRleHRdPXt9KTtsb2FkZWRfY291bnQrKzticmVhaztjYXNlIm1vZHVsZSI6bG9hZGVkX21vZHVsZXNbeF09e2lkOmNvbnRleHQsdXJpOnRvVXJsKGNvbnRleHQpfTtsb2FkZWRfY291bnQrKzticmVhaztjYXNlIGV4cG9ydHNbY29udGV4dF0/ZXhwb3J0c1tjb250ZXh0XS5jb250ZXh0OiIiOmxvYWRlZF9tb2R1bGVzW3hdPWV4cG9ydHNbZXhwb3J0c1tjb250ZXh0XS5jb250ZXh0XTtsb2FkZWRfY291bnQrKzticmVhaztkZWZhdWx0OihmdW5jdGlvbih4KXtsb2FkKG1vZHVsZXNbeF0sZnVuY3Rpb24oZGVmKXtsb2FkZWRfbW9kdWxlc1t4XT1kZWY7bG9hZGVkX2NvdW50Kys7bG9hZGVkX2NvdW50PT09eGwmJmNhbGxiYWNrJiYoaGFzX2xvYWRlZD10cnVlLGNhbGxiYWNrLmFwcGx5KG51bGwsbG9hZGVkX21vZHVsZXMpKX0sY29udGV4dCl9KSh4KX19IWhhc19sb2FkZWQmJmxvYWRlZF9jb3VudD09PXhsJiZjYWxsYmFjayYmY2FsbGJhY2suYXBwbHkobnVsbCxsb2FkZWRfbW9kdWxlcyl9ZnVuY3Rpb24gbG9hZChtb2R1bGUsY2FsbGJhY2ssY29udGV4dCl7bW9kdWxlPWNvbnRleHQ/dG9VcmwobW9kdWxlLGNvbnRleHQpOm1vZHVsZTtpZihleHBvcnRzW21vZHVsZV0pe2lmKGV4cG9ydHNbbW9kdWxlXS5kY2xhbWQ9PT0xKXtjYWxsYmFjayYmZXhwb3J0c1ttb2R1bGVdLmhhbmRsZXJzLnB1c2goY2FsbGJhY2spfWVsc2V7Y2FsbGJhY2smJmNhbGxiYWNrKGV4cG9ydHNbbW9kdWxlXSl9cmV0dXJufWVsc2V7ZXhwb3J0c1ttb2R1bGVdPXtkY2xhbWQ6MSxoYW5kbGVyczpbY2FsbGJhY2tdLGNvbnRleHQ6Y29udGV4dH19fWZ1bmN0aW9uIHRvVXJsKGlkLGNvbnRleHQpe3ZhciBuZXdfY29udGV4dCxpLGNoYW5nZWQ7c3dpdGNoKGlkKXtjYXNlInJlcXVpcmUiOmNhc2UiZXhwb3J0cyI6Y2FzZSJtb2R1bGUiOnJldHVybiBpZH1uZXdfY29udGV4dD0oY29udGV4dHx8c2V0dGluZ3MuYmFzZVVybCkuc3BsaXQoIi8iKTtuZXdfY29udGV4dC5wb3AoKTtpZD1pZC5zcGxpdCgiLyIpO2k9aWQubGVuZ3RoO3doaWxlKC0taSl7c3dpdGNoKGlkWzBdKXtjYXNlIi4uIjpuZXdfY29udGV4dC5wb3AoKTtjYXNlIi4iOmNhc2UiIjppZC5zaGlmdCgpO2NoYW5nZWQ9dHJ1ZX19cmV0dXJuKG5ld19jb250ZXh0Lmxlbmd0aCYmY2hhbmdlZD9uZXdfY29udGV4dC5qb2luKCIvIikrIi8iOiIiKStpZC5qb2luKCIvIil9cmVxdWlyZS50b1VybD10b1VybDtnbG9iYWwuZGNsYW1kPXtjb25maWc6Y29uZmlnLGRlZmluZTpnbG9iYWwuZGVmaW5lPWRlZmluZSxyZXF1aXJlOnJlcXVpcmUsZXhwb3J0czpleHBvcnRzfX0pKHRoaXMpOzsKLyogZ2FtZS50cyAqLwp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7DQogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgew0KICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8DQogICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8DQogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsNCiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7DQogICAgfQ0KICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgew0KICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOw0KICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0NCiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOw0KICAgIH07DQp9KSgpOw0KdmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykgew0KICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7DQogICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpOw0KICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7DQogICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjsNCn07DQpkZWZpbmUoInBoeXNpY3MiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykgew0KICAgICJ1c2Ugc3RyaWN0IjsNCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KICAgIHZhciBHID0gNi42NzRlLTExOw0KICAgIHZhciBQaHlzaWNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBQaHlzaWNzKCkgew0KICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVggPSAwOw0KICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVkgPSAwOw0KICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVogPSAwOw0KICAgICAgICAgICAgdGhpcy5hY2NlbGVyYXRpb25YID0gMDsNCiAgICAgICAgICAgIHRoaXMuYWNjZWxlcmF0aW9uWSA9IDA7DQogICAgICAgICAgICB0aGlzLmFjY2VsZXJhdGlvblogPSAwOw0KICAgICAgICAgICAgdGhpcy5tYXNzID0gMDsNCiAgICAgICAgICAgIHRoaXMucmlnaWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBQaHlzaWNzID0gX19kZWNvcmF0ZShbDQogICAgICAgICAgICBDb21wb25lbnQoJ3BoeXNpY3MnKQ0KICAgICAgICBdLCBQaHlzaWNzKTsNCiAgICAgICAgcmV0dXJuIFBoeXNpY3M7DQogICAgfSgpKTsNCiAgICBleHBvcnRzLlBoeXNpY3MgPSBQaHlzaWNzOw0KICAgIHZhciBkaXN0ID0gZnVuY3Rpb24gKEEsIEIpIHsNCiAgICAgICAgcmV0dXJuIE1hdGguc3FydCgoQS54IC0gQi54KSAqIChBLnggLSBCLngpICsgKEEueSAtIEIueSkgKiAoQS55IC0gQi55KSArIChBLnogLSBCLnopICogKEEueiAtIEIueikpOw0KICAgIH07DQogICAgdmFyIGRpciA9IGZ1bmN0aW9uIChBLCBCLCBtdWwpIHsgcmV0dXJuICh7DQogICAgICAgIHg6IChBLnggLSBCLngpICogbXVsLA0KICAgICAgICB5OiAoQS55IC0gQi55KSAqIG11bCwNCiAgICAgICAgejogKEEueiAtIEIueikgKiBtdWwNCiAgICB9KTsgfTsNCiAgICB2YXIgUGh5c2ljc1N5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsNCiAgICAgICAgX19leHRlbmRzKFBoeXNpY3NTeXN0ZW0sIF9zdXBlcik7DQogICAgICAgIGZ1bmN0aW9uIFBoeXNpY3NTeXN0ZW0oKSB7DQogICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgUG9zaXRpb24sIFBoeXNpY3MpIHx8IHRoaXM7DQogICAgICAgIH0NCiAgICAgICAgUGh5c2ljc1N5c3RlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhVGltZSkgew0KICAgICAgICAgICAgdmFyIGR0ID0gZGVsdGFUaW1lICogMTUwOw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmVudGl0aWVzKSB7DQogICAgICAgICAgICAgICAgdmFyIGVudGl0eSA9IHRoaXMuZW50aXRpZXNbaV07DQogICAgICAgICAgICAgICAgdmFyIHBoeXNpY3MgPSBlbnRpdHkuZ2V0KFBoeXNpY3MpOw0KICAgICAgICAgICAgICAgIGlmIChwaHlzaWNzLnJpZ2lkKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBlbnRpdHkuZ2V0KFBvc2l0aW9uKTsNCiAgICAgICAgICAgICAgICBwaHlzaWNzLmFjY2VsZXJhdGlvblggPSAwOw0KICAgICAgICAgICAgICAgIHBoeXNpY3MuYWNjZWxlcmF0aW9uWSA9IDA7DQogICAgICAgICAgICAgICAgcGh5c2ljcy5hY2NlbGVyYXRpb25aID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBlIGluIHRoaXMuZW50aXRpZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT09IGkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHlfMSA9IHRoaXMuZW50aXRpZXNbZV07DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25FID0gZW50aXR5XzEuZ2V0KFBvc2l0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaHlzaWNzRSA9IGVudGl0eV8xLmdldChQaHlzaWNzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmF2aXR5Rm9yY2UgPSAoRyAqIChwaHlzaWNzRS5tYXNzICogcGh5c2ljcy5tYXNzKSkgLyBkaXN0KHBvc2l0aW9uLCBwb3NpdGlvbkUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZGlyKHBvc2l0aW9uLCBwb3NpdGlvbkUsIC1ncmF2aXR5Rm9yY2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGh5c2ljcy5hY2NlbGVyYXRpb25YICs9IGRlbHRhLng7DQogICAgICAgICAgICAgICAgICAgICAgICBwaHlzaWNzLmFjY2VsZXJhdGlvblkgKz0gZGVsdGEueTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBoeXNpY3MuYWNjZWxlcmF0aW9uWiArPSBkZWx0YS56Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBoeXNpY3MudmVsb2NpdHlYID0gcGh5c2ljcy52ZWxvY2l0eVggKyBwaHlzaWNzLmFjY2VsZXJhdGlvblggKiBkdDsNCiAgICAgICAgICAgICAgICBwaHlzaWNzLnZlbG9jaXR5WSA9IHBoeXNpY3MudmVsb2NpdHlZICsgcGh5c2ljcy5hY2NlbGVyYXRpb25ZICogZHQ7DQogICAgICAgICAgICAgICAgcGh5c2ljcy52ZWxvY2l0eVogPSBwaHlzaWNzLnZlbG9jaXR5WiArIHBoeXNpY3MuYWNjZWxlcmF0aW9uWiAqIGR0Ow0KICAgICAgICAgICAgICAgIHBvc2l0aW9uLnggPSBwb3NpdGlvbi54ICsgcGh5c2ljcy52ZWxvY2l0eVggKiBkdDsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbi55ID0gcG9zaXRpb24ueSArIHBoeXNpY3MudmVsb2NpdHlZICogZHQ7DQogICAgICAgICAgICAgICAgcG9zaXRpb24ueiA9IHBvc2l0aW9uLnogKyBwaHlzaWNzLnZlbG9jaXR5WiAqIGR0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gUGh5c2ljc1N5c3RlbTsNCiAgICB9KENvbXBvbmVudFN5c3RlbSkpOw0KICAgIGV4cG9ydHMuUGh5c2ljc1N5c3RlbSA9IFBoeXNpY3NTeXN0ZW07DQp9KTsNCmRlZmluZSgiYm91bmRhcmllcyIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7DQogICAgInVzZSBzdHJpY3QiOw0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7DQogICAgdmFyIEJvdW5kYXJ5Q2hlY2tTeXN0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7DQogICAgICAgIF9fZXh0ZW5kcyhCb3VuZGFyeUNoZWNrU3lzdGVtLCBfc3VwZXIpOw0KICAgICAgICBmdW5jdGlvbiBCb3VuZGFyeUNoZWNrU3lzdGVtKCkgew0KICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIFBvc2l0aW9uKSB8fCB0aGlzOw0KICAgICAgICB9DQogICAgICAgIEJvdW5kYXJ5Q2hlY2tTeXN0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5lbnRpdGllcykgew0KICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZW50aXRpZXNbaV0uZ2V0KFBvc2l0aW9uKTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueCA+IDkuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueCA9IDkuNTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueSA+IDkuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueSA9IDkuNTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueiA+IDkuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueiA9IDkuNTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueCA8IDAuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueCA9IDAuNTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueSA8IDAuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueSA9IDAuNTsNCiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24ueiA8IDAuNSkNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueiA9IDAuNTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIEJvdW5kYXJ5Q2hlY2tTeXN0ZW07DQogICAgfShDb21wb25lbnRTeXN0ZW0pKTsNCiAgICBleHBvcnRzLkJvdW5kYXJ5Q2hlY2tTeXN0ZW0gPSBCb3VuZGFyeUNoZWNrU3lzdGVtOw0KfSk7DQpkZWZpbmUoImdhbWUiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJwaHlzaWNzIiwgImJvdW5kYXJpZXMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHBoeXNpY3NfMSwgYm91bmRhcmllc18xKSB7DQogICAgInVzZSBzdHJpY3QiOw0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7DQogICAgZnVuY3Rpb24gc3Bhd24oeCwgeSwgeiwgcmlnaWQpIHsNCiAgICAgICAgdmFyIGN1YmUgPSBuZXcgRW50aXR5KCk7DQogICAgICAgIHZhciBwaHlzaWNzID0gbmV3IHBoeXNpY3NfMS5QaHlzaWNzKCk7DQogICAgICAgIHBoeXNpY3MucmlnaWQgPSByaWdpZDsNCiAgICAgICAgcGh5c2ljcy5tYXNzID0gcGh5c2ljcy5yaWdpZCA/IDEwMDAwIDogTWF0aC5yYW5kb20oKSAqIDEwMDsNCiAgICAgICAgY3ViZS5zZXQocGh5c2ljcyk7DQogICAgICAgIGN1YmUuc2V0KG5ldyBQb3NpdGlvbih4LCB5LCB6KSk7DQogICAgICAgIGlmIChwaHlzaWNzLnJpZ2lkKSB7DQogICAgICAgICAgICBjdWJlLnNldChuZXcgQm94U2hhcGUoKSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBjdWJlLnNldChuZXcgQm94U2hhcGUoKSk7DQogICAgICAgICAgICBjdWJlLnNldChuZXcgU2NhbGUoMC4wMSArIHBoeXNpY3MubWFzcyAvIDEwMDAsIDAuMDEgKyBwaHlzaWNzLm1hc3MgLyAxMDAwLCAwLjAxICsgcGh5c2ljcy5tYXNzIC8gMTAwMCkpOw0KICAgICAgICB9DQogICAgICAgIGVuZ2luZS5hZGRFbnRpdHkoY3ViZSk7DQogICAgfQ0KICAgIGVuZ2luZS5hZGRTeXN0ZW0obmV3IHBoeXNpY3NfMS5QaHlzaWNzU3lzdGVtKCkpOw0KICAgIGVuZ2luZS5hZGRTeXN0ZW0obmV3IGJvdW5kYXJpZXNfMS5Cb3VuZGFyeUNoZWNrU3lzdGVtKCkpOw0KICAgIGZvciAodmFyIHggPSAwOyB4IDwgODsgeCsrKSB7DQogICAgICAgIGZvciAodmFyIHogPSAwOyB6IDwgODsgeisrKSB7DQogICAgICAgICAgICBzcGF3bihNYXRoLnJhbmRvbSgpICogOCArIDEsIDUgKyBNYXRoLnJhbmRvbSgpIC8gMiwgTWF0aC5yYW5kb20oKSAqIDggKyAxLCBmYWxzZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgc3Bhd24oNCwgNSwgNCwgdHJ1ZSk7DQogICAgc3Bhd24oNiwgNSwgNiwgdHJ1ZSk7DQp9KTsNCg=="
  }
}
