!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=21)}({0:function(t,e,i){"use strict";let n=0;function s(...t){"undefined"!=typeof dcl?dcl.log(...t):console.log("DEBUG:",...t)}function o(t,e){"undefined"!=typeof dcl?dcl.error(t,e):console.error("ERROR:",t,e)}function r(t){if(n++,0===t.length)throw new Error("newId(type: string): type cannot be empty");return t+n.toString(36)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function d(t,e){const i=[];for(let n=0;n<t;++n)i.push(e());return i}const h="__event_name__",l=[];function p(t){if(!(h in t)||"string"!=typeof t[h])throw new Error("The EventConstructor is not registered");return t[h]}class c{constructor(){this.listeners={}}addListener(t,e,i){if(!t||"function"!=typeof t)throw new Error("Invalid EventConstructor");const n=p(t);let s=this.listeners[n];s||(s=this.listeners[n]=[]);for(let t=0;t<s.length;t++){if(s[t].listener===e)throw new Error("The provided listener is already registered")}return s.push({listener:e,fn:i}),this}removeListener(t,e){if(!e||"function"!=typeof e)throw new Error("Invalid EventConstructor");const i=p(e);let n=this.listeners[i];if(!n)return!1;for(let e=0;e<n.length;e++){if(n[e].listener===t)return n.splice(e,1),!0}return!1}fireEvent(t){const e=p(t.constructor);let i=this.listeners[e];if(i)for(let e=0;e<i.length;e++)try{const n=i[e];n.fn.call(n.listener,t)}catch(t){o(t)}return this}}function u(){const t=r("EV");if(-1!==l.indexOf(t))throw new Error(`The event name ${t} is already taken`);return l.push(t),e=>(e[h]=t,e)}var y=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let m=class{constructor(t,e,i){this.entity=t,this.componentName=e,this.component=i}};m=y([u(),f("design:paramtypes",[Object,String,Object])],m);let g=class{constructor(t,e,i){this.entity=t,this.componentName=e,this.classId=i}};g=y([u(),f("design:paramtypes",[Object,String,Object])],g);let w=class{constructor(t,e){this.entity=t,this.parent=e}};var x;w=y([u(),f("design:paramtypes",[Object,Object])],w),function(t){t[t.PERCENT=0]="PERCENT",t[t.PIXELS=1]="PIXELS"}(x||(x={}));class R{constructor(t){if(this.type=x.PIXELS,"string"==typeof t){let e=t;e.indexOf("px")>-1?this.type=x.PIXELS:e.indexOf("%")>-1&&(this.type=x.PERCENT),this.value=parseFloat(e)}else this.value=t}toString(){let t=this.value.toString();return this.type===x.PERCENT?t+="%":t+="px",t}}var v=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},b=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const T="__name__symbol_",_="__classId__symbol_",A="__component__id_";let E=class{constructor(t,e,i){this.componentId=t,this.componentName=e,this.classId=i}};E=v([u(),b("design:paramtypes",[String,String,Number])],E);let z=class{constructor(t){this.componentId=t}};z=v([u(),b("design:paramtypes",[String])],z);let C=class{constructor(t,e){this.componentId=t,this.component=e}};function S(t,e){return function(i){if(i.isComponent)throw new TypeError(`You cannot extend a component. Trying to extend ${i.originalClassName} with: ${t}`);const n=i,s=function(){const i=Array.prototype.slice.call(arguments),s=new n(...i);return Object.defineProperty(s,T,{enumerable:!1,writable:!1,configurable:!1,value:t}),void 0!==e&&Object.defineProperty(s,_,{enumerable:!1,writable:!1,configurable:!1,value:e}),s};return void 0!==e&&(s[_]=e),s[T]=t,s.isComponent=!0,s.originalClassName=t,(s.prototype=i.prototype).constructor=i,s}}function I(t,e){return function(i){if(i.isComponent)throw new TypeError(`You cannot extend a component. Trying to extend ${i.originalClassName} with: ${t}`);if("number"!=typeof e||isNaN(e))throw new Error(`classId: ${e} is an invalid integer`);const n=i,s=function(){if(!I.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");const i=Array.prototype.slice.call(arguments),s=new n(...i),o=r("C");return Object.defineProperty(s,T,{enumerable:!1,writable:!1,configurable:!1,value:t}),Object.defineProperty(s,A,{enumerable:!1,writable:!1,configurable:!1,value:o}),void 0!==e&&Object.defineProperty(s,_,{enumerable:!1,writable:!1,configurable:!1,value:e}),I.engine&&I.engine.registerComponent(s),s};return void 0!==e&&(s[_]=e),s[T]=t,s.isComponent=!0,s.isDisposableComponent=!0,s.originalClassName=t,(s.prototype=i.prototype).constructor=i,s}}function F(t){if(!t)throw new TypeError(t+" is not a component.");if(t[T])return t[T];throw new TypeError(t+" is not a registered component.")}function P(t){if(!t)throw new TypeError(t+" is not a component.");if(t[_])return t[_];if(!t[T])throw new TypeError(t+" is not a registered component.");return null}function O(t){if(!t)throw new TypeError(t+" is not a component.");if(t[A])return t[A];throw new TypeError(t+" is not a registered disposable component.")}C=v([u(),b("design:paramtypes",[String,Object])],C),function(t){t.engine=null}(I||(I={}));class N{constructor(){this.dirty=!1,this.data={},this.subscriptions=[]}static component(t,e){if(delete t[e]){const i=e+"_"+Math.random();t[i]=void 0,Object.defineProperty(t,i,Object.assign(Object.assign({},Object.getOwnPropertyDescriptor(t,i)),{enumerable:!1})),Object.defineProperty(t,e.toString(),{get:function(){return this[i]},set:function(t){const n=this[i];if(this.data[e]=t?O(t):null,this[i]=t,t!==n){this.dirty=!0;for(let i=0;i<this.subscriptions.length;i++)this.subscriptions[i](e,t,n)}},enumerable:!0})}}static field(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e]},set:function(t){const i=this.data[e];if(this.data[e]=t,t!==i){this.dirty=!0;for(let n=0;n<this.subscriptions.length;n++)this.subscriptions[n](e,t,i)}},enumerable:!0})}static uiValue(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e].toString()},set:function(t){const i=this.data[e],n=new R(t);if(this.data[e]=n,n!==i){this.dirty=!0;for(let t=0;t<this.subscriptions.length;t++)this.subscriptions[t](e,n,i)}},enumerable:!0})}static readonly(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){if(e in this.data==!1)throw new Error(`The field ${e} is uninitialized`);return this.data[e]},set:function(t){if(e in this.data)throw new Error(`The field ${e} is readonly`);this.data[e]=t,this.dirty=!0},enumerable:!0,configurable:!1})}onChange(t){return this.subscriptions.push(t),this}toJSON(){return this.data}}function M(t){return A in t}class L{constructor(...t){if(this.entities=[],this.active=!1,this._requiresNames=[],!t)throw new Error("ComponentGroup: Could not load the requires list");if(!(t instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return t.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(let e=0;e<t.length;e++){const i=t[e];let n=null;if(!i)throw new Error(`ComponentGroup: the required component at location ${e} is invalid`);try{n=F(i)}catch(t){throw new Error(`ComponentGroup: the required component at location ${e} is not registered as a @Component. Remember to provide the class of the component, not the name`)}if(this._requiresNames.some(t=>t===n))throw new Error(`ComponentGroup: the required component list has a repeated name ${n}`);this._requiresNames.push(n)}}hasEntity(t){return!!t.isAddedToEngine()&&-1!==this.entities.indexOf(t)}addEntity(t){if(!t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(t)&&this.entities.push(t)}removeEntity(t){const e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)}componentRemoved(t,e){-1!==this._requiresNames.indexOf(e)&&this.removeEntity(t)}meetsRequirements(t){for(let e=0;e<this._requiresNames.length;e++){if(!(this._requiresNames[e]in t.components))return!1}return!0}}class H{constructor(t){this.name=t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=r("E"),this.components={},this.engine=null,this._parent=null}addComponentOrReplace(t){if("function"==typeof t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof t)throw new Error(`You passed a ${typeof t}, an instance of component is expected`);const e=F(t);if(this.components[e]){if(this.components[e]===t)return t;this.removeComponent(this.components[e],!1)}return this.addComponent(t)}hasComponent(t){const e=typeof t;if("string"!==e&&"object"!==e&&"function"!==e)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==t)return!1;const i="string"===e?t:F(t),n=this.components[i];return!!n&&("object"===e?n===t:"function"!==e||n instanceof t)}getComponent(t){const e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#get(component): component is not a class or name");const i="string"===e?t:F(t),n=this.components[i];if(!n)throw new Error(`Can not get component "${i}" from entity "${this.identifier}"`);if("function"===e){if(n instanceof t)return n;throw new Error(`Can not get component "${i}" from entity "${this.identifier}" (by instance)`)}return n}getComponentOrNull(t){const e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#getOrNull(component): component is not a class or name");const i="string"===e?t:F(t),n=this.components[i];return n?"function"===e?n instanceof t?n:null:n:null}getComponentOrCreate(t){if("function"!=typeof t)throw new Error("Entity#getOrCreate(component): component is not a class");let e=this.getComponentOrNull(t);return e||(F(e=new t),this.addComponentOrReplace(e)),e}addComponent(t){if("object"!=typeof t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");const e=F(t),i=P(t);if(this.components[e])throw new Error(`A component of type "${e}" is already present in entity "${this.identifier}"`);this.components[e]=t,this.eventManager&&this.eventManager.fireEvent(new g(this,e,i));const n=t;return"function"==typeof n.addedToEntity&&n.addedToEntity(this),t}removeComponent(t,e=!0){const i=typeof t;if("string"!==i&&"function"!==i&&"object"!==i)throw new Error("Entity#remove(component): component is not a class, class or name");const n="string"===i?t:F(t),o=this.components[n];if(o){if("function"===i)return o instanceof t?(delete this.components[n],void(o&&(e&&this.eventManager&&this.eventManager.fireEvent(new m(this,n,o)),"function"==typeof o.removedFromEntity&&o.removedFromEntity(this)))):void s(`Entity Warning: Trying to remove wrong (by constructor) component "${n}" from entity "${this.identifier}"`);delete this.components[n],o&&(e&&this.eventManager&&this.eventManager.fireEvent(new m(this,n,o)),"function"==typeof o.removedFromEntity&&o.removedFromEntity(this))}else s(`Entity Warning: Trying to remove inexisting component "${n}" from entity "${this.identifier}"`)}isAddedToEngine(){return!(!this.engine||!(this.uuid in this.engine.entities||this.engine.rootEntity===this))}setParent(t){let e=!t&&this.engine?this.engine.rootEntity:t,i=this.getParent();if(e===this)throw new Error(`Failed to set parent for entity "${this.identifier}": An entity can't set itself as a its own parent`);if(e===i)return this;const n=this.getCircularAncestor(e);if(n)throw new Error(`Failed to set parent for entity "${this.identifier}": Circular parent references are not allowed (See entity "${n}")`);return i&&delete i.children[this.uuid],null!==e&&"0"!==e.uuid&&(!e.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),e.isAddedToEngine()&&!this.isAddedToEngine()&&e.engine.addEntity(this)),this._parent=e||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new w(this,e)),this}getParent(){return this._parent}get identifier(){return this.name||this.uuid}getCircularAncestor(t){const e=this.engine?this.engine.rootEntity:null;let i=t;for(;i&&i!==e;){const t=i.getParent();if(t===this)return i.uuid;i=t}return null}registerAsChild(){const t=this.getParent();this.uuid&&t&&(t.children[this.uuid]=this)}}Promise.resolve().then.bind(Promise.resolve());var B=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},U=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let j=class{constructor(t,e){this.uuid=t,this.payload=e}};j=B([u(),U("design:paramtypes",[String,Object])],j);let D=class{constructor(t){this.payload=t}};D=B([u(),U("design:paramtypes",[Object])],D);let k=class{constructor(t){this.payload=t}};k=B([u(),U("design:paramtypes",[Object])],k);const q="0";class W{constructor(t){this.dcl=t,this.cachedComponents={}}activate(t){this.engine=t,t.eventManager.addListener(g,this,this.componentAdded),t.eventManager.addListener(m,this,this.componentRemoved),t.eventManager.addListener(E,this,this.disposableComponentCreated),t.eventManager.addListener(z,this,this.disposableComponentRemoved),t.eventManager.addListener(C,this,this.disposableComponentUpdated),t.eventManager.addListener(w,this,this.parentChanged);const e=t.rootEntity.uuid;this.dcl.addEntity(e),this.dcl.onUpdate(e=>{t.update(e),this.presentEntities()}),this.dcl.onEvent(e=>{const i=e.data;switch(e.type){case"uuidEvent":t.eventManager.fireEvent(new j(i.uuid,i.payload));break;case"raycastResponse":"HitFirst"===i.queryType?t.eventManager.fireEvent(new D(i)):"HitAll"===i.queryType&&t.eventManager.fireEvent(new D(i));break;case"pointerEvent":t.eventManager.fireEvent(new k(i.payload))}})}onAddEntity(t){if(t&&t.isAddedToEngine()){const e=t.uuid,i=t.getParent();this.dcl.addEntity(e),i&&this.dcl.setParent(e,i.uuid),this.cachedComponents[e]={};for(let i in t.components){const n=t.components[i],s=P(n);if(null!==s)if(M(n))this.dcl.attachEntityComponent(t.uuid,i,O(n));else{const t=JSON.stringify(n);this.dcl.updateEntityComponent(e,i,s,t),this.cachedComponents[e][i]=t}}}}onRemoveEntity(t){if(t.isAddedToEngine()){const e=t.uuid;this.dcl.removeEntity(e),delete this.cachedComponents[e]}}presentEntities(){for(let t in this.engine.entities){const e=this.engine.entities[t],i=e.uuid;for(let t in e.components){const n=e.components[t],s=P(n);if(null!==s&&!M(n)){const o=JSON.stringify(n);this.cachedComponents[i][t]!==o&&(this.dcl.updateEntityComponent(e.uuid,t,s,o),this.cachedComponents[i][t]=o)}}}for(let t in this.engine.disposableComponents){const e=this.engine.disposableComponents[t];e instanceof N&&e.dirty&&(this.dcl.componentUpdated(t,JSON.stringify(e)),e.dirty=!1)}}componentAdded(t){if(t.entity.isAddedToEngine()){const e=t.entity.components[t.componentName];if(M(e))this.dcl.attachEntityComponent(t.entity.uuid,t.componentName,O(e));else if(null!==t.classId){const i=JSON.stringify(e);this.dcl.updateEntityComponent(t.entity.uuid,t.componentName,t.classId,i),this.cachedComponents[t.entity.uuid][t.componentName]=i}}}componentRemoved(t){t.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(t.entity.uuid,t.componentName),delete this.cachedComponents[t.entity.uuid][t.componentName])}disposableComponentCreated(t){this.dcl.componentCreated(t.componentId,t.componentName,t.classId)}disposableComponentRemoved(t){this.dcl.componentDisposed(t.componentId)}disposableComponentUpdated(t){this.dcl.componentUpdated(t.componentId,JSON.stringify(t.component))}parentChanged(t){this.dcl.setParent(t.entity.uuid,t.parent?t.parent.uuid:q)}}var V,G;!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(V||(V={})),function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(G||(G={}));const Y=1/2.2,X=2.2,$=1e-6,Z=Math.PI/180,Q=360/(2*Math.PI);class K{static WithinEpsilon(t,e,i=1401298e-51){let n=t-e;return-i<=n&&n<=i}static ToHex(t){let e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()}static Sign(t){const e=+t;return 0===e||isNaN(e)?e:e>0?1:-1}static Clamp(t,e=0,i=1){return Math.min(i,Math.max(e,t))}static Log2(t){return Math.log(t)*Math.LOG2E}static Repeat(t,e){return t-Math.floor(t/e)*e}static Normalize(t,e,i){return(t-e)/(i-e)}static Denormalize(t,e,i){return t*(i-e)+e}static DeltaAngle(t,e){let i=K.Repeat(e-t,360);return i>180&&(i-=360),i}static PingPong(t,e){let i=K.Repeat(t,2*e);return e-Math.abs(i-e)}static SmoothStep(t,e,i){let n=K.Clamp(i);return e*(n=-2*n*n*n+3*n*n)+t*(1-n)}static MoveTowards(t,e,i){let n=0;return n=Math.abs(e-t)<=i?e:t+K.Sign(e-t)*i}static MoveTowardsAngle(t,e,i){let n=K.DeltaAngle(t,e),s=0;return s=-i<n&&n<i?e:K.MoveTowards(t,t+n,i)}static Lerp(t,e,i){return t+(e-t)*i}static LerpAngle(t,e,i){let n=K.Repeat(e-t,360);return n>180&&(n-=360),t+n*K.Clamp(i)}static InverseLerp(t,e,i){let n=0;return n=t!==e?K.Clamp((i-t)/(e-t)):0}static Hermite(t,e,i,n,s){let o=s*s,r=s*o;return t*(2*r-3*o+1)+i*(-2*r+3*o)+e*(r-2*o+s)+n*(r-o)}static RandomRange(t,e){return t===e?t:Math.random()*(e-t)+t}static RangeToPercent(t,e,i){return(t-e)/(i-e)}static PercentToRange(t,e,i){return(i-e)*t+e}static NormalizeRadians(t){return t-K.TwoPi*Math.floor((t+Math.PI)/K.TwoPi)}}K.TwoPi=2*Math.PI;class J{constructor(t,e,i,n){this.x=t,this.y=e,this.z=i,this.w=n}static Add(t,e){return new J(t.x,t.y,t.z,t.w).addInPlace(e)}static FromArray(t,e=0){return new J(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2],i.w=t[e+3]}static FromFloatArrayToRef(t,e,i){J.FromArrayToRef(t,e,i)}static FromFloatsToRef(t,e,i,n,s){s.x=t,s.y=e,s.z=i,s.w=n}static Zero(){return new J(0,0,0,0)}static One(){return new J(1,1,1,1)}static Normalize(t){let e=J.Zero();return J.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){e.copyFrom(t),e.normalize()}static Minimize(t,e){let i=new J(t.x,t.y,t.z,t.w);return i.minimizeInPlace(e),i}static Maximize(t,e){let i=new J(t.x,t.y,t.z,t.w);return i.maximizeInPlace(e),i}static Distance(t,e){return Math.sqrt(J.DistanceSquared(t,e))}static DistanceSquared(t,e){let i=t.x-e.x,n=t.y-e.y,s=t.z-e.z,o=t.w-e.w;return i*i+n*n+s*s+o*o}static Center(t,e){let i=J.Add(t,e);return i.scaleInPlace(.5),i}static TransformNormal(t,e){let i=J.Zero();return J.TransformNormalToRef(t,e,i),i}static TransformNormalToRef(t,e,i){const n=e.m;let s=t.x*n[0]+t.y*n[4]+t.z*n[8],o=t.x*n[1]+t.y*n[5]+t.z*n[9],r=t.x*n[2]+t.y*n[6]+t.z*n[10];i.x=s,i.y=o,i.z=r,i.w=t.w}static TransformNormalFromFloatsToRef(t,e,i,n,s,o){const r=s.m;o.x=t*r[0]+e*r[4]+i*r[8],o.y=t*r[1]+e*r[5]+i*r[9],o.z=t*r[2]+e*r[6]+i*r[10],o.w=n}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){let t=new Array;return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new J(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new J(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this}subtractFromFloats(t,e,i,n){return new J(this.x-t,this.y-e,this.z-i,this.w-n)}subtractFromFloatsToRef(t,e,i,n,s){return s.x=this.x-t,s.y=this.y-e,s.z=this.z-i,s.w=this.w-n,this}negate(){return new J(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new J(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=$){return t&&K.WithinEpsilon(this.x,t.x,e)&&K.WithinEpsilon(this.y,t.y,e)&&K.WithinEpsilon(this.z,t.z,e)&&K.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,i,n){return this.x===t&&this.y===e&&this.z===i&&this.w===n}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new J(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this}multiplyByFloats(t,e,i,n){return new J(this.x*t,this.y*e,this.z*i,this.w*n)}divide(t){return new J(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new J(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new J(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){let t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new it(this.x,this.y,this.z)}clone(){return new J(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}setAll(t){return this.x=this.y=this.z=this.w=t,this}}class tt{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return tt._identityReadOnly}static FromArray(t,e=0){let i=new tt;return tt.FromArrayToRef(t,e,i),i}static FromArrayToRef(t,e,i){for(let n=0;n<16;n++)i._m[n]=t[n+e];i._markAsUpdated()}static FromFloatArrayToRefScaled(t,e,i,n){for(let s=0;s<16;s++)n._m[s]=t[s+e]*i;n._markAsUpdated()}static FromValuesToRef(t,e,i,n,s,o,r,a,d,h,l,p,c,u,y,f,m){const g=m._m;g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=s,g[5]=o,g[6]=r,g[7]=a,g[8]=d,g[9]=h,g[10]=l,g[11]=p,g[12]=c,g[13]=u,g[14]=y,g[15]=f,m._markAsUpdated()}static FromValues(t,e,i,n,s,o,r,a,d,h,l,p,c,u,y,f){let m=new tt;const g=m._m;return g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=s,g[5]=o,g[6]=r,g[7]=a,g[8]=d,g[9]=h,g[10]=l,g[11]=p,g[12]=c,g[13]=u,g[14]=y,g[15]=f,m._markAsUpdated(),m}static Compose(t,e,i){let n=new tt;return tt.ComposeToRef(t,e,i,n),n}static ComposeToRef(t,e,i,n){tt.ScalingToRef(t.x,t.y,t.z,nt.Matrix[1]),e.toRotationMatrix(nt.Matrix[0]),nt.Matrix[1].multiplyToRef(nt.Matrix[0],n),n.setTranslation(i)}static Identity(){const t=tt.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){tt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)}static Zero(){const t=tt.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){let e=new tt;return tt.RotationXToRef(t,e),e}static Invert(t){let e=new tt;return t.invertToRef(e),e}static RotationXToRef(t,e){let i=Math.sin(t),n=Math.cos(t);tt.FromValuesToRef(1,0,0,0,0,n,i,0,0,-i,n,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationY(t){let e=new tt;return tt.RotationYToRef(t,e),e}static RotationYToRef(t,e){let i=Math.sin(t),n=Math.cos(t);tt.FromValuesToRef(n,0,-i,0,0,1,0,0,i,0,n,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationZ(t){let e=new tt;return tt.RotationZToRef(t,e),e}static RotationZToRef(t,e){let i=Math.sin(t),n=Math.cos(t);tt.FromValuesToRef(n,i,0,0,-i,n,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationAxis(t,e){let i=new tt;return tt.RotationAxisToRef(t,e,i),i}static RotationAxisToRef(t,e,i){let n=Math.sin(-e),s=Math.cos(-e),o=1-s;t.normalize();const r=i._m;r[0]=t.x*t.x*o+s,r[1]=t.x*t.y*o-t.z*n,r[2]=t.x*t.z*o+t.y*n,r[3]=0,r[4]=t.y*t.x*o+t.z*n,r[5]=t.y*t.y*o+s,r[6]=t.y*t.z*o-t.x*n,r[7]=0,r[8]=t.z*t.x*o-t.y*n,r[9]=t.z*t.y*o+t.x*n,r[10]=t.z*t.z*o+s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,i._markAsUpdated()}static RotationYawPitchRoll(t,e,i){let n=new tt;return tt.RotationYawPitchRollToRef(t,e,i,n),n}static RotationYawPitchRollToRef(t,e,i,n){et.RotationYawPitchRollToRef(t,e,i,nt.Quaternion[0]),nt.Quaternion[0].toRotationMatrix(n)}static Scaling(t,e,i){let n=new tt;return tt.ScalingToRef(t,e,i,n),n}static ScalingToRef(t,e,i,n){tt.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1,n),n._updateIdentityStatus(1===t&&1===e&&1===i)}static Translation(t,e,i){let n=new tt;return tt.TranslationToRef(t,e,i,n),n}static TranslationToRef(t,e,i,n){tt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1,n),n._updateIdentityStatus(0===t&&0===e&&0===i)}static Lerp(t,e,i){let n=new tt;return tt.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){for(let s=0;s<16;s++)n._m[s]=t._m[s]*(1-i)+e._m[s]*i;n._markAsUpdated()}static DecomposeLerp(t,e,i){let n=new tt;return tt.DecomposeLerpToRef(t,e,i,n),n}static DecomposeLerpToRef(t,e,i,n){let s=nt.Vector3[0],o=nt.Quaternion[0],r=nt.Vector3[1];t.decompose(s,o,r);let a=nt.Vector3[2],d=nt.Quaternion[1],h=nt.Vector3[3];e.decompose(a,d,h);let l=nt.Vector3[4];it.LerpToRef(s,a,i,l);let p=nt.Quaternion[2];et.SlerpToRef(o,d,i,p);let c=nt.Vector3[5];it.LerpToRef(r,h,i,c),tt.ComposeToRef(l,p,c,n)}static LookAtLH(t,e,i){let n=new tt;return tt.LookAtLHToRef(t,e,i,n),n}static LookAtLHToRef(t,e,i,n){const s=nt.Vector3[0],o=nt.Vector3[1],r=nt.Vector3[2];e.subtractToRef(t,r),r.normalize(),it.CrossToRef(i,r,s);const a=s.lengthSquared();0===a?s.x=1:s.normalizeFromLength(Math.sqrt(a)),it.CrossToRef(r,s,o),o.normalize();let d=-it.Dot(s,t),h=-it.Dot(o,t),l=-it.Dot(r,t);tt.FromValuesToRef(s.x,o.x,r.x,0,s.y,o.y,r.y,0,s.z,o.z,r.z,0,d,h,l,1,n)}static LookAtRH(t,e,i){let n=new tt;return tt.LookAtRHToRef(t,e,i,n),n}static LookAtRHToRef(t,e,i,n){const s=nt.Vector3[0],o=nt.Vector3[1],r=nt.Vector3[2];t.subtractToRef(e,r),r.normalize(),it.CrossToRef(i,r,s);const a=s.lengthSquared();0===a?s.x=1:s.normalizeFromLength(Math.sqrt(a)),it.CrossToRef(r,s,o),o.normalize();let d=-it.Dot(s,t),h=-it.Dot(o,t),l=-it.Dot(r,t);tt.FromValuesToRef(s.x,o.x,r.x,0,s.y,o.y,r.y,0,s.z,o.z,r.z,0,d,h,l,1,n)}static OrthoLH(t,e,i,n){let s=new tt;return tt.OrthoLHToRef(t,e,i,n,s),s}static OrthoLHToRef(t,e,i,n,s){let o=2/t,r=2/e,a=2/(n-i),d=-(n+i)/(n-i);tt.FromValuesToRef(o,0,0,0,0,r,0,0,0,0,a,0,0,0,d,1,s),s._updateIdentityStatus(1===o&&1===r&&1===a&&0===d)}static OrthoOffCenterLH(t,e,i,n,s,o){let r=new tt;return tt.OrthoOffCenterLHToRef(t,e,i,n,s,o,r),r}static OrthoOffCenterLHToRef(t,e,i,n,s,o,r){let a=2/(e-t),d=2/(n-i),h=2/(o-s),l=-(o+s)/(o-s),p=(t+e)/(t-e),c=(n+i)/(i-n);tt.FromValuesToRef(a,0,0,0,0,d,0,0,0,0,h,0,p,c,l,1,r),r._markAsUpdated()}static OrthoOffCenterRH(t,e,i,n,s,o){let r=new tt;return tt.OrthoOffCenterRHToRef(t,e,i,n,s,o,r),r}static OrthoOffCenterRHToRef(t,e,i,n,s,o,r){tt.OrthoOffCenterLHToRef(t,e,i,n,s,o,r),r._m[10]*=-1}static PerspectiveLH(t,e,i,n){let s=new tt,o=2*i/t,r=2*i/e,a=(n+i)/(n-i),d=-2*n*i/(n-i);return tt.FromValuesToRef(o,0,0,0,0,r,0,0,0,0,a,1,0,0,d,0,s),s._updateIdentityStatus(!1),s}static PerspectiveFovLH(t,e,i,n){let s=new tt;return tt.PerspectiveFovLHToRef(t,e,i,n,s),s}static PerspectiveFovLHToRef(t,e,i,n,s,o=!0){let r=i,a=n,d=1/Math.tan(.5*t),h=o?d/e:d,l=o?d:d*e,p=(a+r)/(a-r),c=-2*a*r/(a-r);tt.FromValuesToRef(h,0,0,0,0,l,0,0,0,0,p,1,0,0,c,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovRH(t,e,i,n){let s=new tt;return tt.PerspectiveFovRHToRef(t,e,i,n,s),s}static PerspectiveFovRHToRef(t,e,i,n,s,o=!0){let r=i,a=n,d=1/Math.tan(.5*t),h=o?d/e:d,l=o?d:d*e,p=-(a+r)/(a-r),c=-2*a*r/(a-r);tt.FromValuesToRef(h,0,0,0,0,l,0,0,0,0,p,-1,0,0,c,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(t,e,i,n,s=!1){let o=s?-1:1,r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),d=Math.tan(t.leftDegrees*Math.PI/180),h=Math.tan(t.rightDegrees*Math.PI/180),l=2/(d+h),p=2/(r+a);const c=n._m;c[0]=l,c[1]=c[2]=c[3]=c[4]=0,c[5]=p,c[6]=c[7]=0,c[8]=(d-h)*l*.5,c[9]=-(r-a)*p*.5,c[10]=-i/(e-i),c[11]=1*o,c[12]=c[13]=c[15]=0,c[14]=-2*i*e/(i-e),n._markAsUpdated()}static GetAsMatrix2x2(t){return[t._m[0],t._m[1],t._m[4],t._m[5]]}static GetAsMatrix3x3(t){return[t._m[0],t._m[1],t._m[2],t._m[4],t._m[5],t._m[6],t._m[8],t._m[9],t._m[10]]}static Transpose(t){let e=new tt;return tt.TransposeToRef(t,e),e}static TransposeToRef(t,e){const i=e._m,n=t._m;i[0]=n[0],i[1]=n[4],i[2]=n[8],i[3]=n[12],i[4]=n[1],i[5]=n[5],i[6]=n[9],i[7]=n[13],i[8]=n[2],i[9]=n[6],i[10]=n[10],i[11]=n[14],i[12]=n[3],i[13]=n[7],i[14]=n[11],i[15]=n[15],e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)}static Reflection(t){let e=new tt;return tt.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();let i=t.normal.x,n=t.normal.y,s=t.normal.z,o=-2*i,r=-2*n,a=-2*s;tt.FromValuesToRef(o*i+1,r*i,a*i,0,o*n,r*n+1,a*n,0,o*s,r*s,a*s+1,0,o*t.d,r*t.d,a*t.d,1,e)}static FromXYZAxesToRef(t,e,i,n){tt.FromValuesToRef(t.x,t.y,t.z,0,e.x,e.y,e.z,0,i.x,i.y,i.z,0,0,0,0,1,n)}static FromQuaternionToRef(t,e){let i=t.x*t.x,n=t.y*t.y,s=t.z*t.z,o=t.x*t.y,r=t.z*t.w,a=t.z*t.x,d=t.y*t.w,h=t.y*t.z,l=t.x*t.w;e._m[0]=1-2*(n+s),e._m[1]=2*(o+r),e._m[2]=2*(a-d),e._m[3]=0,e._m[4]=2*(o-r),e._m[5]=1-2*(s+i),e._m[6]=2*(h+l),e._m[7]=0,e._m[8]=2*(a+d),e._m[9]=2*(h-l),e._m[10]=1-2*(n+i),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e._markAsUpdated()}_markAsUpdated(){this.updateFlag=tt._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,e=t[0],i=t[1],n=t[2],s=t[3],o=t[4],r=t[5],a=t[6],d=t[7],h=t[8],l=t[9],p=t[10],c=t[11],u=t[12],y=t[13],f=t[14],m=t[15],g=p*m-f*c,w=l*m-y*c,x=l*f-y*p,R=h*m-u*c,v=h*f-p*u,b=h*y-u*l;return e*+(r*g-a*w+d*x)+i*-(o*g-a*R+d*v)+n*+(o*w-r*R+d*b)+s*-(o*x-r*v+a*b)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return tt.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){let e=new tt;return this.addToRef(t,e),e}addToRef(t,e){for(let i=0;i<16;i++)e._m[i]=this._m[i]+t._m[i];return e._markAsUpdated(),this}addToSelf(t){for(let e=0;e<16;e++)this._m[e]+=t._m[e];return this._markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return tt.IdentityToRef(t),this;const e=this._m,i=e[0],n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],d=e[6],h=e[7],l=e[8],p=e[9],c=e[10],u=e[11],y=e[12],f=e[13],m=e[14],g=e[15],w=c*g-m*u,x=p*g-f*u,R=p*m-f*c,v=l*g-y*u,b=l*m-c*y,T=l*f-y*p,_=+(a*w-d*x+h*R),A=-(r*w-d*v+h*b),E=+(r*x-a*v+h*T),z=-(r*R-a*b+d*T),C=i*_+n*A+s*E+o*z;if(0===C)return t.copyFrom(this),this;const S=1/C,I=d*g-m*h,F=a*g-f*h,P=a*m-f*d,O=r*g-y*h,N=r*m-y*d,M=r*f-y*a,L=d*u-c*h,H=a*u-p*h,B=a*c-p*d,U=r*u-l*h,j=r*c-l*d,D=r*p-l*a,k=-(n*w-s*x+o*R),q=+(i*w-s*v+o*b),W=-(i*x-n*v+o*T),V=+(i*R-n*b+s*T),G=+(n*I-s*F+o*P),Y=-(i*I-s*O+o*N),X=+(i*F-n*O+o*M),$=-(i*P-n*N+s*M),Z=-(n*L-s*H+o*B),Q=+(i*L-s*U+o*j),K=-(i*H-n*U+o*D),J=+(i*B-n*j+s*D);return tt.FromValuesToRef(_*S,k*S,G*S,Z*S,A*S,q*S,Y*S,Q*S,E*S,W*S,X*S,K*S,z*S,V*S,$*S,J*S,t),this}addAtIndex(t,e){return this._m[t]+=e,this._markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this._markAsUpdated(),this}setTranslationFromFloats(t,e,i){return this._m[12]=t,this._m[13]=e,this._m[14]=i,this._markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t.x,t.y,t.z)}getTranslation(){return new it(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this}removeRotationAndScaling(){const t=this.m;return tt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){let e=new tt;return this.multiplyToRef(t,e),e}copyFrom(t){t.copyToArray(this._m);const e=t;return this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}copyToArray(t,e=0){for(let i=0;i<16;i++)t[e+i]=this._m[i];return this}multiplyToRef(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e._markAsUpdated(),this)}multiplyToArray(t,e,i){const n=this._m,s=t.m;let o=n[0],r=n[1],a=n[2],d=n[3],h=n[4],l=n[5],p=n[6],c=n[7],u=n[8],y=n[9],f=n[10],m=n[11],g=n[12],w=n[13],x=n[14],R=n[15],v=s[0],b=s[1],T=s[2],_=s[3],A=s[4],E=s[5],z=s[6],C=s[7],S=s[8],I=s[9],F=s[10],P=s[11],O=s[12],N=s[13],M=s[14],L=s[15];return e[i]=o*v+r*A+a*S+d*O,e[i+1]=o*b+r*E+a*I+d*N,e[i+2]=o*T+r*z+a*F+d*M,e[i+3]=o*_+r*C+a*P+d*L,e[i+4]=h*v+l*A+p*S+c*O,e[i+5]=h*b+l*E+p*I+c*N,e[i+6]=h*T+l*z+p*F+c*M,e[i+7]=h*_+l*C+p*P+c*L,e[i+8]=u*v+y*A+f*S+m*O,e[i+9]=u*b+y*E+f*I+m*N,e[i+10]=u*T+y*z+f*F+m*M,e[i+11]=u*_+y*C+f*P+m*L,e[i+12]=g*v+w*A+x*S+R*O,e[i+13]=g*b+w*E+x*I+R*N,e[i+14]=g*T+w*z+x*F+R*M,e[i+15]=g*_+w*C+x*P+R*L,this}equals(t){const e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;const i=this.m,n=e.m;return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]}clone(){const t=new tt;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=this._m[0]||0;for(let e=1;e<16;e++)t=397*t^(this._m[e]||0);return t}decompose(t,e,i){if(this._isIdentity)return i&&i.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;const n=this._m;i&&i.copyFromFloats(n[12],n[13],n[14]);const s=t||nt.Vector3[0];if(s.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),s.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),s.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),this.determinant()<=0&&(s.y*=-1),0===s.x||0===s.y||0===s.z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){const t=1/s.x,i=1/s.y,o=1/s.z;tt.FromValuesToRef(n[0]*t,n[1]*t,n[2]*t,0,n[4]*i,n[5]*i,n[6]*i,0,n[8]*o,n[9]*o,n[10]*o,0,0,0,0,1,nt.Matrix[0]),et.FromRotationMatrixToRef(nt.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;let e=4*t;return new J(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){return tt.Transpose(this)}transposeToRef(t){return tt.TransposeToRef(this,t),this}setRowFromFloats(t,e,i,n,s){if(t<0||t>3)return this;let o=4*t;return this._m[o+0]=e,this._m[o+1]=i,this._m[o+2]=n,this._m[o+3]=s,this._markAsUpdated(),this}scale(t){let e=new tt;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let i=0;i<16;i++)e._m[i]=this._m[i]*t;return e._markAsUpdated(),this}scaleAndAddToRef(t,e){for(let i=0;i<16;i++)e._m[i]+=this._m[i]*t;return e._markAsUpdated(),this}toNormalMatrix(t){const e=nt.Matrix[0];this.invertToRef(e),e.transposeToRef(t);let i=t._m;tt.FromValuesToRef(i[0],i[1],i[2],0,i[4],i[5],i[6],0,i[8],i[9],i[10],0,0,0,0,1,t)}getRotationMatrix(){let t=new tt;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const e=nt.Vector3[0];if(!this.decompose(e))return tt.IdentityToRef(t),this;const i=this._m,n=1/e.x,s=1/e.y,o=1/e.z;return tt.FromValuesToRef(i[0]*n,i[1]*n,i[2]*n,0,i[4]*s,i[5]*s,i[6]*s,0,i[8]*o,i[9]*o,i[10]*o,0,0,0,0,1,t),this}toggleModelMatrixHandInPlace(){const t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){let t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(t,e=!1,i=!1,n=!0){this.updateFlag=tt._updateFlagSeed++,this._isIdentity=t,this._isIdentity3x2=t||i,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&n}}tt._updateFlagSeed=0,tt._identityReadOnly=tt.Identity();class et{constructor(t=0,e=0,i=0,n=1){this.x=t,this.y=e,this.z=i,this.w=n}static FromRotationMatrix(t){let e=new et;return et.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){let i,n=t.m,s=n[0],o=n[4],r=n[8],a=n[1],d=n[5],h=n[9],l=n[2],p=n[6],c=n[10],u=s+d+c;u>0?(i=.5/Math.sqrt(u+1),e.w=.25/i,e.x=(p-h)*i,e.y=(r-l)*i,e.z=(a-o)*i):s>d&&s>c?(i=2*Math.sqrt(1+s-d-c),e.w=(p-h)/i,e.x=.25*i,e.y=(o+a)/i,e.z=(r+l)/i):d>c?(i=2*Math.sqrt(1+d-s-c),e.w=(r-l)/i,e.x=(o+a)/i,e.y=.25*i,e.z=(h+p)/i):(i=2*Math.sqrt(1+c-s-d),e.w=(a-o)/i,e.x=(r+l)/i,e.y=(h+p)/i,e.z=.25*i)}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}static AreClose(t,e){return et.Dot(t,e)>=0}static Zero(){return new et(0,0,0,0)}static Inverse(t){return new et(-t.x,-t.y,-t.z,t.w)}static IsIdentity(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w}static RotationAxis(t,e){const i=e*Z;return et.RotationAxisToRef(t,i,new et)}static RotationAxisToRef(t,e,i){const n=e*Z;let s=Math.sin(n/2);return t.normalize(),i.w=Math.cos(n/2),i.x=t.x*s,i.y=t.y*s,i.z=t.z*s,i}static FromArray(t,e=0){return new et(t[e],t[e+1],t[e+2],t[e+3])}static FromEulerAnglesRef(t,e,i,n){return et.RotationYawPitchRollToRef(e*Z,t*Z,i*Z,n)}static RotationYawPitchRoll(t,e,i){let n=new et;return et.RotationYawPitchRollToRef(t,e,i,n),n}static RotationYawPitchRollToRef(t,e,i,n){let s=.5*i,o=.5*e,r=.5*t,a=Math.cos(o),d=Math.cos(r),h=Math.cos(s),l=Math.sin(o),p=Math.sin(r),c=Math.sin(s);n.x=l*d*h+a*p*c,n.y=a*p*h-l*d*c,n.z=a*d*c+l*p*h,n.w=a*d*h-l*p*c}static RotationAlphaBetaGamma(t,e,i){let n=new et;return et.RotationAlphaBetaGammaToRef(t,e,i,n),n}static RotationAlphaBetaGammaToRef(t,e,i,n){let s=.5*(i+t),o=.5*(i-t),r=.5*e;n.x=Math.cos(o)*Math.sin(r),n.y=Math.sin(o)*Math.sin(r),n.z=Math.sin(s)*Math.cos(r),n.w=Math.cos(s)*Math.cos(r)}static RotationQuaternionFromAxis(t,e,i){let n=new et(0,0,0,0);return et.RotationQuaternionFromAxisToRef(t,e,i,n),n}static RotationQuaternionFromAxisToRef(t,e,i,n){let s=nt.Matrix[0];tt.FromXYZAxesToRef(t.normalize(),e.normalize(),i.normalize(),s),et.FromRotationMatrixToRef(s,n)}static Slerp(t,e,i){let n=et.Identity;return et.SlerpToRef(t,e,i,n),n}static SlerpToRef(t,e,i,n){let s,o,r=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,a=!1;if(r<0&&(a=!0,r=-r),r>.999999)o=1-i,s=a?-i:i;else{let t=Math.acos(r),e=1/Math.sin(t);o=Math.sin((1-i)*t)*e,s=a?-Math.sin(i*t)*e:Math.sin(i*t)*e}n.x=o*t.x+s*e.x,n.y=o*t.y+s*e.y,n.z=o*t.z+s*e.z,n.w=o*t.w+s*e.w}static Hermite(t,e,i,n,s){let o=s*s,r=s*o,a=2*r-3*o+1,d=-2*r+3*o,h=r-2*o+s,l=r-o,p=t.x*a+i.x*d+e.x*h+n.x*l,c=t.y*a+i.y*d+e.y*h+n.y*l,u=t.z*a+i.z*d+e.z*h+n.z*l,y=t.w*a+i.w*d+e.w*h+n.w*l;return new et(p,c,u,y)}static get Identity(){return new et(0,0,0,1)}static Angle(t,e){const i=et.Dot(t,e);return 2*Math.acos(Math.min(Math.abs(i),1))*Q}static Euler(t,e,i){return et.RotationYawPitchRoll(e*Z,t*Z,i*Z)}static LookRotation(t,e=nt.staticUp){const i=it.Normalize(t),n=it.Normalize(it.Cross(e,i)),s=it.Cross(i,n);let o=n.x,r=n.y,a=n.z,d=s.x,h=s.y,l=s.z,p=i.x,c=i.y,u=i.z;const y=o+h+u;let f=new et;if(y>0){let t=Math.sqrt(y+1);return f.w=.5*t,t=.5/t,f.x=(l-c)*t,f.y=(p-a)*t,f.z=(r-d)*t,f}if(o>=h&&o>=u){let t=Math.sqrt(1+o-h-u),e=.5/t;return f.x=.5*t,f.y=(r+d)*e,f.z=(a+p)*e,f.w=(l-c)*e,f}if(h>u){let t=Math.sqrt(1+h-o-u),e=.5/t;return f.x=(d+r)*e,f.y=.5*t,f.z=(c+l)*e,f.w=(p-a)*e,f}let m=Math.sqrt(1+u-o-h),g=.5/m;return f.x=(p+a)*g,f.y=(c+l)*g,f.z=.5*m,f.w=(r-d)*g,f}static RotateTowards(t,e,i){const n=et.Angle(t,e);if(0===n)return e;const s=Math.min(1,i/n);return et.Slerp(t,e,s)}static FromToRotation(t,e){const i=new et;let n=t.normalize(),s=e.normalize(),o=it.Dot(n,s);if(o>-1+$){let t=Math.sqrt(2*(1+o)),e=1/t,r=it.Cross(n,s).scaleInPlace(e);i.set(r.x,r.y,r.z,.5*t)}else{if(o>1-$)return new et(0,0,0,1);{let t=it.Cross(it.Right(),n);t.lengthSquared()<$&&(t=it.Cross(it.Forward(),n)),i.set(t.x,t.y,t.z,0)}}return i.normalize()}get normalized(){return this.normalize()}setFromToRotation(t,e,i=nt.staticUp){nt.tmpMatrix=tt.Zero(),tt.LookAtLHToRef(t,e,i,nt.tmpMatrix),nt.tmpMatrix.invert(),et.FromRotationMatrixToRef(nt.tmpMatrix,this)}set eulerAngles(t){this.setEuler(t.x,t.y,t.z)}get eulerAngles(){const t=new it,e=new tt;this.toRotationMatrix(e);const i=tt.GetAsMatrix3x3(e);return t.y=Q*Math.asin(Math.max(-1,Math.min(1,i[6]))),Math.abs(i[6])<.99999?(t.x=Q*Math.atan2(-i[7],i[8]),t.z=Q*Math.atan2(-i[3],i[0])):(t.x=Q*Math.atan2(i[5],i[4]),t.z=0),t}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){return[this.x,this.y,this.z,this.w]}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}clone(){return new et(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}setEuler(t,e,i){return et.RotationYawPitchRollToRef(e*Z,t*Z,i*Z,this),this}add(t){return new et(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return new et(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}scale(t){return new et(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}multiply(t){let e=new et(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){let i=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,n=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,s=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,o=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(i,n,s,o),this}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new et(-this.x,-this.y,-this.z,this.w)}normalize(){let t=1/this.length;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}angleAxis(t,e){if(0===e.lengthSquared())return et.Identity;const i=et.Identity;let n=t*Z;n*=.5;let s=e.normalize();return s=e.scaleInPlace(Math.sin(n)),i.x=s.x,i.y=s.y,i.z=s.z,i.w=Math.cos(n),i.normalize()}toRotationMatrix(t){return tt.FromQuaternionToRef(this,t),this}fromRotationMatrix(t){return et.FromRotationMatrixToRef(t,this),this}}class it{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}get isNonUniform(){let t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;let i=Math.abs(this.z);return t!==i||e!==i}static Add(t,e){return new it(t.x,t.y,t.z).addInPlace(e)}static GetClipFactor(t,e,i,n){let s=it.Dot(t,i)-n;return s/(s-(it.Dot(e,i)-n))}static GetAngleBetweenVectors(t,e,i){const n=t.normalizeToRef(nt.Vector3[1]),s=e.normalizeToRef(nt.Vector3[2]),o=it.Dot(n,s),r=nt.Vector3[3];return it.CrossToRef(n,s,r),it.Dot(r,i)>0?Math.acos(o):-Math.acos(o)}static FromArray(t,e=0){return new it(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return it.FromArray(t,e)}static FromArrayToRef(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2]}static FromFloatArrayToRef(t,e,i){return it.FromArrayToRef(t,e,i)}static FromFloatsToRef(t,e,i,n){n.copyFromFloats(t,e,i)}static Zero(){return new it(0,0,0)}static One(){return new it(1,1,1)}static Up(){return new it(0,1,0)}static Down(){return new it(0,-1,0)}static Forward(){return new it(0,0,1)}static Backward(){return new it(0,0,-1)}static Right(){return new it(1,0,0)}static Left(){return new it(-1,0,0)}static TransformCoordinates(t,e){let i=it.Zero();return it.TransformCoordinatesToRef(t,e,i),i}static TransformCoordinatesToRef(t,e,i){return it.TransformCoordinatesFromFloatsToRef(t.x,t.y,t.z,e,i)}static TransformCoordinatesFromFloatsToRef(t,e,i,n,s){const o=n.m;let r=t*o[0]+e*o[4]+i*o[8]+o[12],a=t*o[1]+e*o[5]+i*o[9]+o[13],d=t*o[2]+e*o[6]+i*o[10]+o[14],h=1/(t*o[3]+e*o[7]+i*o[11]+o[15]);s.x=r*h,s.y=a*h,s.z=d*h}static TransformNormal(t,e){let i=it.Zero();return it.TransformNormalToRef(t,e,i),i}static TransformNormalToRef(t,e,i){this.TransformNormalFromFloatsToRef(t.x,t.y,t.z,e,i)}static TransformNormalFromFloatsToRef(t,e,i,n,s){const o=n.m;s.x=t*o[0]+e*o[4]+i*o[8],s.y=t*o[1]+e*o[5]+i*o[9],s.z=t*o[2]+e*o[6]+i*o[10]}static CatmullRom(t,e,i,n,s){let o=s*s,r=s*o,a=.5*(2*e.x+(-t.x+i.x)*s+(2*t.x-5*e.x+4*i.x-n.x)*o+(-t.x+3*e.x-3*i.x+n.x)*r),d=.5*(2*e.y+(-t.y+i.y)*s+(2*t.y-5*e.y+4*i.y-n.y)*o+(-t.y+3*e.y-3*i.y+n.y)*r),h=.5*(2*e.z+(-t.z+i.z)*s+(2*t.z-5*e.z+4*i.z-n.z)*o+(-t.z+3*e.z-3*i.z+n.z)*r);return new it(a,d,h)}static Clamp(t,e,i){const n=new it;return it.ClampToRef(t,e,i,n),n}static ClampToRef(t,e,i,n){let s=t.x;s=(s=s>i.x?i.x:s)<e.x?e.x:s;let o=t.y;o=(o=o>i.y?i.y:o)<e.y?e.y:o;let r=t.z;r=(r=r>i.z?i.z:r)<e.z?e.z:r,n.copyFromFloats(s,o,r)}static Hermite(t,e,i,n,s){let o=s*s,r=s*o,a=2*r-3*o+1,d=-2*r+3*o,h=r-2*o+s,l=r-o,p=t.x*a+i.x*d+e.x*h+n.x*l,c=t.y*a+i.y*d+e.y*h+n.y*l,u=t.z*a+i.z*d+e.z*h+n.z*l;return new it(p,c,u)}static Lerp(t,e,i){let n=new it(0,0,0);return it.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n.z=t.z+(e.z-t.z)*i}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static Cross(t,e){let i=it.Zero();return it.CrossToRef(t,e,i),i}static CrossToRef(t,e,i){const n=t.y*e.z-t.z*e.y,s=t.z*e.x-t.x*e.z,o=t.x*e.y-t.y*e.x;i.copyFromFloats(n,s,o)}static Normalize(t){let e=it.Zero();return it.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){t.normalizeToRef(e)}static Minimize(t,e){let i=new it(t.x,t.y,t.z);return i.minimizeInPlace(e),i}static Maximize(t,e){let i=new it(t.x,t.y,t.z);return i.maximizeInPlace(e),i}static Distance(t,e){return Math.sqrt(it.DistanceSquared(t,e))}static DistanceSquared(t,e){let i=t.x-e.x,n=t.y-e.y,s=t.z-e.z;return i*i+n*n+s*s}static Center(t,e){let i=it.Add(t,e);return i.scaleInPlace(.5),i}static RotationFromAxis(t,e,i){let n=it.Zero();return it.RotationFromAxisToRef(t,e,i,n),n}static RotationFromAxisToRef(t,e,i,n){let s=nt.Quaternion[0];et.RotationQuaternionFromAxisToRef(t,e,i,s),n.copyFrom(s.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let t=this.x||0;return t=397*(t=397*t^(this.y||0))^(this.z||0)}asArray(){let t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this}toQuaternion(){return et.Identity.setEuler(this.y,this.x,this.z)}addInPlace(t){return this.addInPlaceFromFloats(t.x,t.y,t.z)}addInPlaceFromFloats(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this}add(t){return new it(this.x+t.x,this.y+t.y,this.z+t.z)}addToRef(t,e){return e.copyFromFloats(this.x+t.x,this.y+t.y,this.z+t.z)}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtract(t){return new it(this.x-t.x,this.y-t.y,this.z-t.z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t.x,t.y,t.z,e)}subtractFromFloats(t,e,i){return new it(this.x-t,this.y-e,this.z-i)}subtractFromFloatsToRef(t,e,i,n){return n.copyFromFloats(this.x-t,this.y-e,this.z-i)}applyMatrix4(t){this.applyMatrix4ToRef(t,this)}applyMatrix4ToRef(t,e){const{x:i,y:n,z:s}=this,{m:o}=t,r=1/(o[3]*i+o[7]*n+o[11]*s+o[15]);return e.x=(o[0]*i+o[4]*n+o[8]*s+o[12])*r,e.y=(o[1]*i+o[5]*n+o[9]*s+o[13])*r,e.z=(o[2]*i+o[6]*n+o[10]*s+o[14])*r,e}rotate(t){return this.rotateToRef(t,this)}rotateToRef(t,e){const{x:i,y:n,z:s}=this,{x:o,y:r,z:a,w:d}=t,h=d*i+r*s-a*n,l=d*n+a*i-o*s,p=d*s+o*n-r*i,c=-o*i-r*n-a*s;return e.x=h*d+c*-o+l*-a-p*-r,e.y=l*d+c*-r+p*-o-h*-a,e.z=p*d+c*-a+h*-r-l*-o,e}negate(){return new it(-this.x,-this.y,-this.z)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this}scale(t){return new it(this.x*t,this.y*t,this.z*t)}scaleToRef(t,e){return e.copyFromFloats(this.x*t,this.y*t,this.z*t)}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this.x*t,this.y*t,this.z*t)}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z}equalsWithEpsilon(t,e=$){return t&&K.WithinEpsilon(this.x,t.x,e)&&K.WithinEpsilon(this.y,t.y,e)&&K.WithinEpsilon(this.z,t.z,e)}equalsToFloats(t,e,i){return this.x===t&&this.y===e&&this.z===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiply(t){return this.multiplyByFloats(t.x,t.y,t.z)}multiplyToRef(t,e){return e.copyFromFloats(this.x*t.x,this.y*t.y,this.z*t.z)}multiplyByFloats(t,e,i){return new it(this.x*t,this.y*e,this.z*i)}divide(t){return new it(this.x/t.x,this.y/t.y,this.z/t.z)}divideToRef(t,e){return e.copyFromFloats(this.x/t.x,this.y/t.y,this.z/t.z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.x,t.y,t.z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.x,t.y,t.z)}minimizeInPlaceFromFloats(t,e,i){return t<this.x&&(this.x=t),e<this.y&&(this.y=e),i<this.z&&(this.z=i),this}maximizeInPlaceFromFloats(t,e,i){return t>this.x&&(this.x=t),e>this.y&&(this.y=e),i>this.z&&(this.z=i),this}floor(){return new it(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new it(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new it(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){let e=this.length();return 0===e||1===e?t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/e,t)}clone(){return new it(this.x,this.y,this.z)}copyFrom(t){return this.copyFromFloats(t.x,t.y,t.z)}copyFromFloats(t,e,i){return this.x=t,this.y=e,this.z=i,this}set(t,e,i){return this.copyFromFloats(t,e,i)}setAll(t){return this.x=this.y=this.z=t,this}}const nt={Vector3:d(6,it.Zero),Matrix:d(2,tt.Identity),Quaternion:d(3,et.Zero),staticUp:it.Up(),tmpMatrix:tt.Zero()};class st{}st.X=new it(1,0,0),st.Y=new it(0,1,0),st.Z=new it(0,0,1);class ot{constructor(t=0,e=0,i=0,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static FromHexString(t){if("#"!==t.substring(0,1)||9!==t.length)return new ot(0,0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16),s=parseInt(t.substring(7,9),16);return ot.FromInts(e,i,n,s)}static Lerp(t,e,i){let n=new ot(0,0,0,0);return ot.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.r=t.r+(e.r-t.r)*i,n.g=t.g+(e.g-t.g)*i,n.b=t.b+(e.b-t.b)*i,n.a=t.a+(e.a-t.a)*i}static Red(){return new ot(1,0,0,1)}static Green(){return new ot(0,1,0,1)}static Blue(){return new ot(0,0,1,1)}static Black(){return new ot(0,0,0,1)}static White(){return new ot(1,1,1,1)}static Purple(){return new ot(.5,0,.5,1)}static Magenta(){return new ot(1,0,1,1)}static Yellow(){return new ot(1,1,0,1)}static Gray(){return new ot(.5,.5,.5,1)}static Teal(){return new ot(0,1,1,1)}static Clear(){return new ot(0,0,0,0)}static FromColor3(t,e=1){return new ot(t.r,t.g,t.b,e)}static FromArray(t,e=0){return new ot(t[e],t[e+1],t[e+2],t[e+3])}static FromInts(t,e,i,n){return new ot(t/255,e/255,i/255,n/255)}static CheckColors4(t,e){if(t.length===3*e){let e=[];for(let i=0;i<t.length;i+=3){let n=i/3*4;e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=1}return e}return t}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}asArray(){let t=new Array;return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this}add(t){return new ot(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new ot(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this}scale(t){return new ot(this.r*t,this.g*t,this.b*t,this.a*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this}clampToRef(t=0,e=1,i){return i.r=K.Clamp(this.r,t,e),i.g=K.Clamp(this.g,t,e),i.b=K.Clamp(this.b,t,e),i.a=K.Clamp(this.a,t,e),this}multiply(t){return new ot(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=this.r||0;return t=397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)}clone(){return new ot(this.r,this.g,this.b,this.a)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}toHexString(){let t=255*this.r|0,e=255*this.g|0,i=255*this.b|0,n=255*this.a|0;return"#"+K.ToHex(t)+K.ToHex(e)+K.ToHex(i)+K.ToHex(n)}toLinearSpace(){let t=new ot;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,X),t.g=Math.pow(this.g,X),t.b=Math.pow(this.b,X),t.a=this.a,this}toGammaSpace(){let t=new ot;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,Y),t.g=Math.pow(this.g,Y),t.b=Math.pow(this.b,Y),t.a=this.a,this}}class rt{constructor(t=0,e=0,i=0){this.r=t,this.g=e,this.b=i}static FromHexString(t){if("#"!==t.substring(0,1)||7!==t.length)return new rt(0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return rt.FromInts(e,i,n)}static FromArray(t,e=0){return new rt(t[e],t[e+1],t[e+2])}static FromInts(t,e,i){return new rt(t/255,e/255,i/255)}static Lerp(t,e,i){let n=new rt(0,0,0);return rt.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.r=t.r+(e.r-t.r)*i,n.g=t.g+(e.g-t.g)*i,n.b=t.b+(e.b-t.b)*i}static Red(){return new rt(1,0,0)}static Green(){return new rt(0,1,0)}static Blue(){return new rt(0,0,1)}static Black(){return new rt(0,0,0)}static White(){return new rt(1,1,1)}static Purple(){return new rt(.5,0,.5)}static Magenta(){return new rt(1,0,1)}static Yellow(){return new rt(1,1,0)}static Gray(){return new rt(.5,.5,.5)}static Teal(){return new rt(0,1,1)}static Random(){return new rt(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=this.r||0;return t=397*(t=397*t^(this.g||0))^(this.b||0)}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this}toColor4(t=1){return new ot(this.r,this.g,this.b,t)}asArray(){let t=new Array;return this.toArray(t,0),t}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(t){return new rt(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,e,i){return this.r===t&&this.g===e&&this.b===i}scale(t){return new rt(this.r*t,this.g*t,this.b*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this}clampToRef(t=0,e=1,i){return i.r=K.Clamp(this.r,t,e),i.g=K.Clamp(this.g,t,e),i.b=K.Clamp(this.b,t,e),this}add(t){return new rt(this.r+t.r,this.g+t.g,this.b+t.b)}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this}subtract(t){return new rt(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this}clone(){return new rt(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,e,i){return this.r=t,this.g=e,this.b=i,this}set(t,e,i){return this.copyFromFloats(t,e,i)}toHexString(){let t=255*this.r|0,e=255*this.g|0,i=255*this.b|0;return"#"+K.ToHex(t)+K.ToHex(e)+K.ToHex(i)}toLinearSpace(){let t=new rt;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,X),t.g=Math.pow(this.g,X),t.b=Math.pow(this.b,X),this}toGammaSpace(){let t=new rt;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,Y),t.g=Math.pow(this.g,Y),t.b=Math.pow(this.b,Y),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}var at=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},dt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const ht={looping:!0,speed:1,weight:1};class lt extends N{constructor(t,e=ht){super(),this.isAnimationClip=!0,this.looping=ht.looping,this.weight=ht.weight,this.playing=!1,this.shouldReset=!1,this.speed=ht.speed,this.name=r("AnimClip"),this.clip=t,this.setParams(Object.assign({},e))}setParams(t){return this.looping=void 0!==t.looping?t.looping:this.looping,this.speed=t.speed||this.speed,this}toJSON(){const t=JSON.parse(JSON.stringify(super.toJSON()));return this.shouldReset&&(this.shouldReset=!1),t}play(){this.playing=!0}pause(){this.playing=!1}reset(){this.shouldReset=!0}stop(){this.reset(),this.pause()}}at([N.readonly,dt("design:type",String)],lt.prototype,"clip",void 0),at([N.field,dt("design:type",Boolean)],lt.prototype,"looping",void 0),at([N.field,dt("design:type",Number)],lt.prototype,"weight",void 0),at([N.field,dt("design:type",Boolean)],lt.prototype,"playing",void 0),at([N.field,dt("design:type",Boolean)],lt.prototype,"shouldReset",void 0),at([N.field,dt("design:type",Number)],lt.prototype,"speed",void 0),at([N.readonly,dt("design:type",String)],lt.prototype,"name",void 0);var pt,ct=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ut=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t[t.TRANSFORM=1]="TRANSFORM",t[t.UUID_CALLBACK=8]="UUID_CALLBACK",t[t.BOX_SHAPE=16]="BOX_SHAPE",t[t.SPHERE_SHAPE=17]="SPHERE_SHAPE",t[t.PLANE_SHAPE=18]="PLANE_SHAPE",t[t.CONE_SHAPE=19]="CONE_SHAPE",t[t.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",t[t.TEXT_SHAPE=21]="TEXT_SHAPE",t[t.NFT_SHAPE=22]="NFT_SHAPE",t[t.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",t[t.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",t[t.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",t[t.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",t[t.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",t[t.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",t[t.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",t[t.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",t[t.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",t[t.BILLBOARD=32]="BILLBOARD",t[t.ANIMATION=33]="ANIMATION",t[t.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",t[t.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",t[t.GLTF_SHAPE=54]="GLTF_SHAPE",t[t.OBJ_SHAPE=55]="OBJ_SHAPE",t[t.AVATAR_SHAPE=56]="AVATAR_SHAPE",t[t.BASIC_MATERIAL=64]="BASIC_MATERIAL",t[t.PBR_MATERIAL=65]="PBR_MATERIAL",t[t.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",t[t.SOUND=67]="SOUND",t[t.TEXTURE=68]="TEXTURE",t[t.AUDIO_CLIP=200]="AUDIO_CLIP",t[t.AUDIO_SOURCE=201]="AUDIO_SOURCE",t[t.GIZMOS=203]="GIZMOS"}(pt||(pt={}));let yt=class extends N{constructor(t={}){super(),this.position=t.position||it.Zero(),this.rotation=t.rotation||et.Identity,this.scale=t.scale||new it(1,1,1)}get eulerAngles(){return this.rotation.eulerAngles}lookAt(t,e=nt.staticUp){const i=new tt;return tt.LookAtLHToRef(this.position,t,e,i),i.invert(),et.FromRotationMatrixToRef(i,this.rotation),this}rotate(t,e){return this.rotation.multiplyInPlace(this.rotation.angleAxis(e,t)),this}translate(t){return this.position.addInPlace(t),this}};ct([N.field,ut("design:type",it)],yt.prototype,"position",void 0),ct([N.field,ut("design:type",et)],yt.prototype,"rotation",void 0),ct([N.field,ut("design:type",it)],yt.prototype,"scale",void 0),yt=ct([S("engine.transform",pt.TRANSFORM),ut("design:paramtypes",[Object])],yt);let ft=class extends N{constructor(t=!0,e=!0,i=!0){super(),this.x=!0,this.y=!0,this.z=!0,this.x=t,this.y=e,this.z=i}};ct([N.field,ut("design:type",Boolean)],ft.prototype,"x",void 0),ct([N.field,ut("design:type",Boolean)],ft.prototype,"y",void 0),ct([N.field,ut("design:type",Boolean)],ft.prototype,"z",void 0),ft=ct([S("engine.billboard",pt.BILLBOARD),ut("design:paramtypes",[Boolean,Boolean,Boolean])],ft);class mt extends N{constructor(){super(...arguments),this.withCollisions=!0,this.visible=!0}}ct([N.field,ut("design:type",Boolean)],mt.prototype,"withCollisions",void 0),ct([N.field,ut("design:type",Boolean)],mt.prototype,"visible",void 0);let gt=class extends mt{};gt=ct([I("engine.shape",pt.BOX_SHAPE)],gt);let wt=class extends mt{};wt=ct([I("engine.shape",pt.SPHERE_SHAPE)],wt);let xt=class extends mt{};ct([N.field,ut("design:type",Number)],xt.prototype,"segments",void 0),ct([N.field,ut("design:type",Number)],xt.prototype,"arc",void 0),xt=ct([I("engine.shape",pt.CIRCLE_SHAPE)],xt);let Rt=class extends mt{constructor(){super(...arguments),this.width=1,this.height=1}};ct([N.field,ut("design:type",Number)],Rt.prototype,"width",void 0),ct([N.field,ut("design:type",Number)],Rt.prototype,"height",void 0),ct([N.field,ut("design:type",Array)],Rt.prototype,"uvs",void 0),Rt=ct([I("engine.shape",pt.PLANE_SHAPE)],Rt);let vt=class extends mt{constructor(){super(...arguments),this.radiusTop=0,this.radiusBottom=1,this.segmentsHeight=1,this.segmentsRadial=36,this.openEnded=!1,this.radius=null,this.arc=360}};ct([N.field,ut("design:type",Number)],vt.prototype,"radiusTop",void 0),ct([N.field,ut("design:type",Number)],vt.prototype,"radiusBottom",void 0),ct([N.field,ut("design:type",Number)],vt.prototype,"segmentsHeight",void 0),ct([N.field,ut("design:type",Number)],vt.prototype,"segmentsRadial",void 0),ct([N.field,ut("design:type",Boolean)],vt.prototype,"openEnded",void 0),ct([N.field,ut("design:type",Object)],vt.prototype,"radius",void 0),ct([N.field,ut("design:type",Number)],vt.prototype,"arc",void 0),vt=ct([I("engine.shape",pt.CONE_SHAPE)],vt);let bt=class extends mt{constructor(){super(...arguments),this.radiusTop=0,this.radiusBottom=1,this.segmentsHeight=1,this.segmentsRadial=36,this.openEnded=!1,this.radius=null,this.arc=360}};ct([N.field,ut("design:type",Number)],bt.prototype,"radiusTop",void 0),ct([N.field,ut("design:type",Number)],bt.prototype,"radiusBottom",void 0),ct([N.field,ut("design:type",Number)],bt.prototype,"segmentsHeight",void 0),ct([N.field,ut("design:type",Number)],bt.prototype,"segmentsRadial",void 0),ct([N.field,ut("design:type",Boolean)],bt.prototype,"openEnded",void 0),ct([N.field,ut("design:type",Object)],bt.prototype,"radius",void 0),ct([N.field,ut("design:type",Number)],bt.prototype,"arc",void 0),bt=ct([I("engine.shape",pt.CYLINDER_SHAPE)],bt);let Tt=class extends mt{constructor(t){super(),this.src=t}};ct([mt.readonly,ut("design:type",String)],Tt.prototype,"src",void 0),Tt=ct([I("engine.shape",pt.GLTF_SHAPE),ut("design:paramtypes",[String])],Tt);let _t=class extends mt{constructor(t,e=new rt(.6404918,.611472,.8584906)){super(),this.src=t,this.color=e}};ct([mt.readonly,ut("design:type",String)],_t.prototype,"src",void 0),ct([N.field,ut("design:type",rt)],_t.prototype,"color",void 0),_t=ct([I("engine.shape",pt.NFT_SHAPE),ut("design:paramtypes",[String,rt])],_t);let At=class extends N{constructor(t,e){if(super(),this.src=t,e)for(let t in e){this[t]=e[t]}}};ct([N.readonly,ut("design:type",String)],At.prototype,"src",void 0),ct([N.readonly,ut("design:type",Number)],At.prototype,"samplingMode",void 0),ct([N.readonly,ut("design:type",Number)],At.prototype,"wrap",void 0),ct([N.readonly,ut("design:type",Boolean)],At.prototype,"hasAlpha",void 0),At=ct([I("engine.texture",pt.TEXTURE),ut("design:paramtypes",[String,Object])],At);let Et=class extends mt{constructor(){super(...arguments),this.states=[]}addClip(t){return this.states.push(t),t.onChange(()=>{this.dirty=!0}),this}getClip(t){for(let e=0;e<this.states.length;e++){const i=this.states[e];if(i.clip===t)return i}const e=new lt(t);return this.addClip(e),e}};ct([N.readonly,ut("design:type",Array)],Et.prototype,"states",void 0),Et=ct([S("engine.animator",pt.ANIMATION)],Et);let zt=class extends mt{constructor(t){super(),this.src=t}};ct([N.readonly,ut("design:type",String)],zt.prototype,"src",void 0),zt=ct([I("engine.shape",pt.OBJ_SHAPE),ut("design:paramtypes",[String])],zt);let Ct=class extends mt{constructor(t){super(),this.outlineWidth=0,this.outlineColor=new rt(1,1,1),this.color=new rt(1,1,1),this.fontSize=10,this.fontWeight="normal",this.opacity=1,this.value="",this.lineSpacing="0px",this.lineCount=0,this.resizeToFit=!1,this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=new rt(1,1,1),this.zIndex=0,this.hTextAlign="center",this.vTextAlign="center",this.width=1,this.height=1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.isPickable=!1,this.billboard=!1,t&&(this.value=t)}};var St;ct([N.field,ut("design:type",Number)],Ct.prototype,"outlineWidth",void 0),ct([N.field,ut("design:type",rt)],Ct.prototype,"outlineColor",void 0),ct([N.field,ut("design:type",rt)],Ct.prototype,"color",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"fontSize",void 0),ct([N.field,ut("design:type",String)],Ct.prototype,"fontWeight",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"opacity",void 0),ct([N.field,ut("design:type",String)],Ct.prototype,"value",void 0),ct([N.field,ut("design:type",String)],Ct.prototype,"lineSpacing",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"lineCount",void 0),ct([N.field,ut("design:type",Boolean)],Ct.prototype,"resizeToFit",void 0),ct([N.field,ut("design:type",Boolean)],Ct.prototype,"textWrapping",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"shadowBlur",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"shadowOffsetX",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"shadowOffsetY",void 0),ct([N.field,ut("design:type",rt)],Ct.prototype,"shadowColor",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"zIndex",void 0),ct([N.field,ut("design:type",String)],Ct.prototype,"hTextAlign",void 0),ct([N.field,ut("design:type",String)],Ct.prototype,"vTextAlign",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"width",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"height",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"paddingTop",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"paddingRight",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"paddingBottom",void 0),ct([N.field,ut("design:type",Number)],Ct.prototype,"paddingLeft",void 0),ct([N.field,ut("design:type",Boolean)],Ct.prototype,"isPickable",void 0),ct([N.field,ut("design:type",Boolean)],Ct.prototype,"billboard",void 0),Ct=ct([S("engine.text",pt.TEXT_SHAPE),ut("design:paramtypes",[String])],Ct),function(t){t[t.OPAQUE=0]="OPAQUE",t[t.ALPHA_TEST=1]="ALPHA_TEST",t[t.ALPHA_BLEND=2]="ALPHA_BLEND",t[t.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",t[t.AUTO=4]="AUTO"}(St||(St={}));let It=class extends N{constructor(){super(...arguments),this.alphaTest=.5,this.transparencyMode=St.AUTO}};ct([N.field,ut("design:type",Number)],It.prototype,"alphaTest",void 0),ct([N.field,ut("design:type",Object)],It.prototype,"albedoColor",void 0),ct([N.field,ut("design:type",rt)],It.prototype,"emissiveColor",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"metallic",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"roughness",void 0),ct([N.field,ut("design:type",rt)],It.prototype,"ambientColor",void 0),ct([N.field,ut("design:type",rt)],It.prototype,"reflectionColor",void 0),ct([N.field,ut("design:type",rt)],It.prototype,"reflectivityColor",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"directIntensity",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"microSurface",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"emissiveIntensity",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"environmentIntensity",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"specularIntensity",void 0),ct([N.component,ut("design:type",At)],It.prototype,"albedoTexture",void 0),ct([N.component,ut("design:type",At)],It.prototype,"alphaTexture",void 0),ct([N.component,ut("design:type",At)],It.prototype,"emissiveTexture",void 0),ct([N.component,ut("design:type",At)],It.prototype,"bumpTexture",void 0),ct([N.component,ut("design:type",At)],It.prototype,"refractionTexture",void 0),ct([N.field,ut("design:type",Boolean)],It.prototype,"disableLighting",void 0),ct([N.field,ut("design:type",Number)],It.prototype,"transparencyMode",void 0),It=ct([I("engine.material",pt.PBR_MATERIAL)],It);let Ft=class extends N{constructor(){super(...arguments),this.alphaTest=.5}};ct([N.component,ut("design:type",At)],Ft.prototype,"texture",void 0),ct([N.field,ut("design:type",Number)],Ft.prototype,"alphaTest",void 0),Ft=ct([I("engine.material",pt.BASIC_MATERIAL)],Ft);class Pt extends N{constructor(t){if(super(),this.uuid=r("UUID"),!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");this.callback=t}static uuidEvent(t,e){if(delete t[e]){const i=e+"_"+Math.random();t[i]=void 0,Object.defineProperty(t,i,Object.assign(Object.assign({},Object.getOwnPropertyDescriptor(t,i)),{enumerable:!1})),Object.defineProperty(t,e.toString(),{get:function(){return this[i]},set:function(t){const n=this[i];if(t){if(!(t instanceof Pt))throw new Error("value is not an OnUUIDEvent");this.data[e]=t.uuid}else this.data[e]=null;if(this[i]=t,t!==n){this.dirty=!0;for(let i=0;i<this.subscriptions.length;i++)this.subscriptions[i](e,t,n)}},enumerable:!0})}}toJSON(){return{uuid:this.uuid,type:this.type}}}ct([N.field,ut("design:type",Function)],Pt.prototype,"callback",void 0);let Ot=class extends Pt{constructor(){super(...arguments),this.type="onPointerLock"}};ct([N.readonly,ut("design:type",String)],Ot.prototype,"type",void 0),Ot=ct([S("engine.onPointerLock",pt.UUID_CALLBACK)],Ot);let Nt=class extends Pt{constructor(){super(...arguments),this.type="onAnimationEnd"}};var Mt;ct([N.readonly,ut("design:type",String)],Nt.prototype,"type",void 0),Nt=ct([S("engine.onAnimationEnd",pt.UUID_CALLBACK)],Nt),function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP"}(Mt||(Mt={}));var Lt,Ht=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t.POINTER="POINTER",t.PRIMARY="PRIMARY",t.SECONDARY="SECONDARY"}(Lt||(Lt={}));class Bt{constructor(t){if(this.callback=t,!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");kt.ensureInstance()}}let Ut=class extends Bt{};Ut=Ht([S("pointerDown")],Ut);let jt=class extends Bt{};jt=Ht([S("pointerUp")],jt);class Dt{constructor(t,e){this.fn=t,this.useRaycast=e}}class kt{constructor(){this.subscriptions={[Lt.POINTER]:{BUTTON_DOWN:[],BUTTON_UP:[]},[Lt.PRIMARY]:{BUTTON_DOWN:[],BUTTON_UP:[]},[Lt.SECONDARY]:{BUTTON_DOWN:[],BUTTON_UP:[]}},this.internalState={[Lt.POINTER]:{BUTTON_DOWN:!1},[Lt.PRIMARY]:{BUTTON_DOWN:!1},[Lt.SECONDARY]:{BUTTON_DOWN:!1}}}static get instance(){return kt.ensureInstance(),kt._instance}static ensureInstance(){kt._instance||(kt._instance=new kt)}isButtonPressed(t){return this.internalState[t]}subscribe(t,e,i,n){return this.subscriptions[e][t].push(new Dt(n,i)),()=>this.unsubscribe(t,e,n)}unsubscribe(t,e,i){const n=this.getSubscriptionId(t,e,i);return n>-1&&this.subscriptions[e][t].splice(n,1)}handlePointerEvent(t){const e=this.getPointerById(t.buttonId);let i=Object.assign(Object.assign({},t),{button:e,direction:(new it).copyFrom(t.direction),origin:(new it).copyFrom(t.origin),hit:void 0});const n=t.hit?Object.assign(Object.assign({},t.hit),{hitPoint:(new it).copyFrom(t.hit.hitPoint),normal:(new it).copyFrom(t.hit.normal),worldNormal:(new it).copyFrom(t.hit.worldNormal)}):void 0;if(t.type===Mt.DOWN){this.internalState[e].BUTTON_DOWN=!0;for(let t=0;t<this.subscriptions[e].BUTTON_DOWN.length;t++){let s=this.subscriptions[e].BUTTON_DOWN[t];s.useRaycast?i.hit=n:i.hit=void 0,s.fn(i)}if(n&&n.entityId&&I.engine){const t=I.engine.entities[n.entityId],e=t&&t.getComponentOrNull(Ut);e&&(i.hit=n,e.callback(i))}}else{this.internalState[e].BUTTON_DOWN=!1;for(let t=0;t<this.subscriptions[e].BUTTON_UP.length;t++){let s=this.subscriptions[e].BUTTON_UP[t];s.useRaycast?i.hit=n:i.hit=void 0,s.fn(i)}if(n&&n.entityId&&I.engine){const t=I.engine.entities[n.entityId],e=t&&t.getComponentOrNull(jt);e&&(i.hit=n,e.callback(i))}}}getSubscriptionId(t,e,i){for(let n=0;n<this.subscriptions[e][t].length;n++)if(this.subscriptions[e][t][n].fn===i)return n;return-1}getPointerById(t){return 0===t?Lt.POINTER:1===t?Lt.PRIMARY:Lt.SECONDARY}}class qt{constructor(){this.position=new it,this.rotation=new et,this.feetPosition=new it,this.worldPosition=new it,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.onEvent(t=>{switch(t.type){case"positionChanged":this.positionChanged(t.data);break;case"rotationChanged":this.rotationChanged(t.data)}})),Object.defineProperty(this.position,"x",{get:()=>this.lastEventPosition.x}),Object.defineProperty(this.position,"y",{get:()=>this.lastEventPosition.y}),Object.defineProperty(this.position,"z",{get:()=>this.lastEventPosition.z}),Object.defineProperty(this.worldPosition,"x",{get:()=>this.lastEventWorldPosition.x}),Object.defineProperty(this.worldPosition,"y",{get:()=>this.lastEventWorldPosition.y}),Object.defineProperty(this.worldPosition,"z",{get:()=>this.lastEventWorldPosition.z}),Object.defineProperty(this.feetPosition,"x",{get:()=>this.lastEventPosition.x}),Object.defineProperty(this.feetPosition,"y",{get:()=>this.lastEventPosition.y-this.playerHeight}),Object.defineProperty(this.feetPosition,"z",{get:()=>this.lastEventPosition.z}),Object.defineProperty(this.rotation,"x",{get:()=>this.lastEventRotation.x}),Object.defineProperty(this.rotation,"y",{get:()=>this.lastEventRotation.y}),Object.defineProperty(this.rotation,"z",{get:()=>this.lastEventRotation.z}),Object.defineProperty(this.rotation,"w",{get:()=>this.lastEventRotation.w})}static get instance(){return qt._instance||(qt._instance=new qt),qt._instance}get playerHeight(){return this._playerHeight}positionChanged(t){this.lastEventPosition=t.position,this.lastEventWorldPosition=t.cameraPosition,this._playerHeight=t.playerHeight}rotationChanged(t){this.lastEventRotation=t.quaternion}}class Wt{constructor(){this.queries={}}static get instance(){return Wt.ensureInstance(),Wt._instance}static ensureInstance(){Wt._instance||(Wt._instance=new Wt)}getRayFromCamera(t){let e=qt.instance.rotation,i=tt.Identity();e.toRotationMatrix(i);let n=it.TransformCoordinates(it.Forward(),i);return{origin:qt.instance.position,direction:n,distance:t}}getRayFromPositions(t,e){const i=e.subtract(t),n=i.length();return{origin:t,direction:i.normalize(),distance:n}}hitFirst(t,e){const i=a();this.queries[i]=e,dcl&&dcl.query("raycast",{queryId:i,queryType:"HitFirst",ray:t})}hitAll(t,e){const i=a();this.queries[i]=e,dcl&&dcl.query("raycast",{queryId:i,queryType:"HitAll",ray:t})}hitFirstAvatar(t,e){s("not implemented yet")}hitAllAvatars(t,e){s("not implemented yet")}handleRaycastHitFirstResponse(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]}handleRaycastHitAllResponse(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]}}const Vt=new class{activate(t){t.eventManager.addListener(D,this,t=>{"HitFirst"===t.payload.queryType?Wt.instance.handleRaycastHitFirstResponse(t):"HitAll"===t.payload.queryType&&Wt.instance.handleRaycastHitAllResponse(t)}),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")}deactivate(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")}};const Gt=new class{activate(t){t.eventManager.addListener(k,this,t=>{kt.instance.handlePointerEvent(t.payload)}),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))}deactivate(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))}};const Yt=new class{constructor(){this.handlerMap={}}activate(t){t.eventManager.addListener(j,this,this.handleEvent),t.eventManager.addListener(g,this,this.componentAdded),t.eventManager.addListener(m,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")}deactivate(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")}onAddEntity(t){for(let e in t.components){const i=t.components[e];i instanceof Pt&&(this.handlerMap[i.uuid]=i)}}onRemoveEntity(t){for(let e in t.components){const i=t.components[e];i instanceof Pt&&delete this.handlerMap[i.uuid]}}componentAdded(t){if(t.entity.isAddedToEngine()){const e=t.entity.components[t.componentName];e instanceof Pt&&(this.handlerMap[e.uuid]=e)}}componentRemoved(t){t.entity.isAddedToEngine()&&t.component instanceof Pt&&delete this.handlerMap[t.component.uuid]}handleEvent(t){if(t.uuid in this.handlerMap){const e=this.handlerMap[t.uuid];e&&e.callback&&"call"in e.callback&&e.callback(t.payload)}}};var Xt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},$t=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Zt=class extends N{constructor(t){super(),this.loop=!1,this.volume=1,this.url=t}};Xt([N.readonly,$t("design:type",String)],Zt.prototype,"url",void 0),Xt([N.field,$t("design:type",Boolean)],Zt.prototype,"loop",void 0),Xt([N.field,$t("design:type",String)],Zt.prototype,"loadingCompleteEventId",void 0),Xt([N.field,$t("design:type",Number)],Zt.prototype,"volume",void 0),Zt=Xt([I("engine.AudioClip",pt.AUDIO_CLIP),$t("design:paramtypes",[String])],Zt);let Qt=class extends N{constructor(t){if(super(),this.audioClip=t,this.loop=!1,this.volume=1,this.playing=!1,this.pitch=1,!(t instanceof Zt))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");this.audioClipId=O(t)}playOnce(){return this.playing=!0,this.dirty=!0,this.data.nonce=Math.random(),this}};Xt([N.readonly,$t("design:type",String)],Qt.prototype,"audioClipId",void 0),Xt([N.field,$t("design:type",Boolean)],Qt.prototype,"loop",void 0),Xt([N.field,$t("design:type",Number)],Qt.prototype,"volume",void 0),Xt([N.field,$t("design:type",Boolean)],Qt.prototype,"playing",void 0),Xt([N.field,$t("design:type",Number)],Qt.prototype,"pitch",void 0),Qt=Xt([S("engine.AudioSource",pt.AUDIO_SOURCE),$t("design:paramtypes",[Zt])],Qt);var Kt,Jt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},te=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.MOVE="MOVE",t.ROTATE="ROTATE",t.SCALE="SCALE",t.NONE="NONE"}(Kt||(Kt={}));let ee=class extends Pt{constructor(){super(...arguments),this.type="gizmoEvent"}};Jt([N.readonly,te("design:type",String)],ee.prototype,"type",void 0),ee=Jt([S("engine.gizmoEvent",pt.UUID_CALLBACK)],ee);let ie=class extends N{constructor(){super(...arguments),this.position=!0,this.rotation=!0,this.scale=!0,this.cycle=!0,this.localReference=!1}};Jt([N.field,te("design:type",Boolean)],ie.prototype,"position",void 0),Jt([N.field,te("design:type",Boolean)],ie.prototype,"rotation",void 0),Jt([N.field,te("design:type",Boolean)],ie.prototype,"scale",void 0),Jt([N.field,te("design:type",Boolean)],ie.prototype,"cycle",void 0),Jt([N.field,te("design:type",String)],ie.prototype,"selectedGizmo",void 0),Jt([N.field,te("design:type",Boolean)],ie.prototype,"localReference",void 0),ie=Jt([S("engine.gizmos",pt.GIZMOS)],ie);var ne=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},se=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class oe extends N{constructor(t){super(),this.name=null,this.visible=!0,this.opacity=1,this.hAlign="center",this.vAlign="center",this.width="100px",this.height="50px",this.positionX="0px",this.positionY="0px",this.isPointerBlocker=!0,t&&(this._parent=t,this.data.parentComponent=O(t))}get parent(){return this._parent}get parentComponent(){return this.data.parentComponent}}ne([N.field,se("design:type",Object)],oe.prototype,"name",void 0),ne([N.field,se("design:type",Boolean)],oe.prototype,"visible",void 0),ne([N.field,se("design:type",Number)],oe.prototype,"opacity",void 0),ne([N.field,se("design:type",String)],oe.prototype,"hAlign",void 0),ne([N.field,se("design:type",String)],oe.prototype,"vAlign",void 0),ne([N.uiValue,se("design:type",Object)],oe.prototype,"width",void 0),ne([N.uiValue,se("design:type",Object)],oe.prototype,"height",void 0),ne([N.uiValue,se("design:type",Object)],oe.prototype,"positionX",void 0),ne([N.uiValue,se("design:type",Object)],oe.prototype,"positionY",void 0),ne([N.field,se("design:type",Boolean)],oe.prototype,"isPointerBlocker",void 0);let re=class extends oe{constructor(){super(null)}};re=ne([I("engine.shape",pt.UI_FULLSCREEN_SHAPE),se("design:paramtypes",[])],re);let ae=class extends oe{constructor(){super(null)}};ae=ne([I("engine.shape",pt.UI_WORLD_SPACE_SHAPE),se("design:paramtypes",[])],ae);let de=class extends oe{constructor(){super(null)}};de=ne([I("engine.shape",pt.UI_SCREEN_SPACE_SHAPE),se("design:paramtypes",[])],de);let he=class extends oe{constructor(){super(...arguments),this.adaptWidth=!1,this.adaptHeight=!1,this.thickness=0,this.color=ot.Clear(),this.alignmentUsesSize=!0}};var le;ne([N.field,se("design:type",Boolean)],he.prototype,"adaptWidth",void 0),ne([N.field,se("design:type",Boolean)],he.prototype,"adaptHeight",void 0),ne([N.field,se("design:type",Number)],he.prototype,"thickness",void 0),ne([N.field,se("design:type",ot)],he.prototype,"color",void 0),ne([N.field,se("design:type",Boolean)],he.prototype,"alignmentUsesSize",void 0),he=ne([I("engine.shape",pt.UI_CONTAINER_RECT)],he),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(le||(le={}));let pe=class extends oe{constructor(){super(...arguments),this.adaptWidth=!0,this.adaptHeight=!0,this.color=ot.Clear(),this.stackOrientation=le.VERTICAL,this.spacing=0}};ne([N.field,se("design:type",Boolean)],pe.prototype,"adaptWidth",void 0),ne([N.field,se("design:type",Boolean)],pe.prototype,"adaptHeight",void 0),ne([N.field,se("design:type",ot)],pe.prototype,"color",void 0),ne([N.field,se("design:type",Number)],pe.prototype,"stackOrientation",void 0),ne([N.field,se("design:type",Number)],pe.prototype,"spacing",void 0),pe=ne([I("engine.shape",pt.UI_CONTAINER_STACK)],pe);let ce=class extends oe{constructor(){super(...arguments),this.fontSize=10,this.fontWeight="normal",this.thickness=0,this.cornerRadius=0,this.color=ot.White(),this.background=ot.White(),this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ot.Black(),this.text="button"}};ne([N.field,se("design:type",Number)],ce.prototype,"fontSize",void 0),ne([N.field,se("design:type",String)],ce.prototype,"fontWeight",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"thickness",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"cornerRadius",void 0),ne([N.field,se("design:type",ot)],ce.prototype,"color",void 0),ne([N.field,se("design:type",ot)],ce.prototype,"background",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"paddingTop",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"paddingRight",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"paddingBottom",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"paddingLeft",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"shadowBlur",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"shadowOffsetX",void 0),ne([N.field,se("design:type",Number)],ce.prototype,"shadowOffsetY",void 0),ne([N.field,se("design:type",ot)],ce.prototype,"shadowColor",void 0),ne([N.field,se("design:type",String)],ce.prototype,"text",void 0),ce=ne([I("engine.shape",pt.UI_BUTTON_SHAPE)],ce);let ue=class extends oe{constructor(){super(...arguments),this.outlineWidth=0,this.outlineColor=ot.White(),this.color=ot.White(),this.fontSize=10,this.fontAutoSize=!1,this.fontWeight="normal",this.value="",this.lineSpacing=0,this.lineCount=0,this.adaptWidth=!1,this.adaptHeight=!1,this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ot.Black(),this.hTextAlign="left",this.vTextAlign="bottom",this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0}};ne([N.field,se("design:type",Number)],ue.prototype,"outlineWidth",void 0),ne([N.field,se("design:type",ot)],ue.prototype,"outlineColor",void 0),ne([N.field,se("design:type",ot)],ue.prototype,"color",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"fontSize",void 0),ne([N.field,se("design:type",Boolean)],ue.prototype,"fontAutoSize",void 0),ne([N.field,se("design:type",String)],ue.prototype,"fontWeight",void 0),ne([N.field,se("design:type",String)],ue.prototype,"value",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"lineSpacing",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"lineCount",void 0),ne([N.field,se("design:type",Boolean)],ue.prototype,"adaptWidth",void 0),ne([N.field,se("design:type",Boolean)],ue.prototype,"adaptHeight",void 0),ne([N.field,se("design:type",Boolean)],ue.prototype,"textWrapping",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"shadowBlur",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"shadowOffsetX",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"shadowOffsetY",void 0),ne([N.field,se("design:type",ot)],ue.prototype,"shadowColor",void 0),ne([N.field,se("design:type",String)],ue.prototype,"hTextAlign",void 0),ne([N.field,se("design:type",String)],ue.prototype,"vTextAlign",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"paddingTop",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"paddingRight",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"paddingBottom",void 0),ne([N.field,se("design:type",Number)],ue.prototype,"paddingLeft",void 0),ue=ne([I("engine.shape",pt.UI_TEXT_SHAPE)],ue);let ye=class extends oe{constructor(){super(...arguments),this.outlineWidth=0,this.outlineColor=ot.Black(),this.color=ot.Clear(),this.thickness=1,this.fontSize=10,this.fontWeight="normal",this.value="",this.placeholderColor=ot.White(),this.placeholder="",this.margin=10,this.maxWidth=100,this.hTextAlign="left",this.vTextAlign="bottom",this.autoStretchWidth=!0,this.background=ot.Black(),this.focusedBackground=ot.Black(),this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ot.White(),this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.onTextSubmit=null,this.onChanged=null,this.onFocus=null,this.onBlur=null}};ne([N.field,se("design:type",Number)],ye.prototype,"outlineWidth",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"outlineColor",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"color",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"thickness",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"fontSize",void 0),ne([N.field,se("design:type",String)],ye.prototype,"fontWeight",void 0),ne([N.field,se("design:type",String)],ye.prototype,"value",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"placeholderColor",void 0),ne([N.field,se("design:type",String)],ye.prototype,"placeholder",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"margin",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"maxWidth",void 0),ne([N.field,se("design:type",String)],ye.prototype,"hTextAlign",void 0),ne([N.field,se("design:type",String)],ye.prototype,"vTextAlign",void 0),ne([N.field,se("design:type",Boolean)],ye.prototype,"autoStretchWidth",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"background",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"focusedBackground",void 0),ne([N.field,se("design:type",Boolean)],ye.prototype,"textWrapping",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"shadowBlur",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"shadowOffsetX",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"shadowOffsetY",void 0),ne([N.field,se("design:type",ot)],ye.prototype,"shadowColor",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"paddingTop",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"paddingRight",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"paddingBottom",void 0),ne([N.field,se("design:type",Number)],ye.prototype,"paddingLeft",void 0),ne([Pt.uuidEvent,se("design:type",Object)],ye.prototype,"onTextSubmit",void 0),ne([Pt.uuidEvent,se("design:type",Object)],ye.prototype,"onChanged",void 0),ne([Pt.uuidEvent,se("design:type",Object)],ye.prototype,"onFocus",void 0),ne([Pt.uuidEvent,se("design:type",Object)],ye.prototype,"onBlur",void 0),ye=ne([I("engine.shape",pt.UI_INPUT_TEXT_SHAPE)],ye);let fe=class extends oe{constructor(t,e){super(t),this.sourceLeft=0,this.sourceTop=0,this.sourceWidth=1,this.sourceHeight=1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.sizeInPixels=!0,this.onClick=null,this.source=e}};ne([N.field,se("design:type",Number)],fe.prototype,"sourceLeft",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"sourceTop",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"sourceWidth",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"sourceHeight",void 0),ne([N.component,se("design:type",At)],fe.prototype,"source",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"paddingTop",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"paddingRight",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"paddingBottom",void 0),ne([N.field,se("design:type",Number)],fe.prototype,"paddingLeft",void 0),ne([N.field,se("design:type",Boolean)],fe.prototype,"sizeInPixels",void 0),ne([Pt.uuidEvent,se("design:type",Object)],fe.prototype,"onClick",void 0),fe=ne([I("engine.shape",pt.UI_IMAGE_SHAPE),se("design:paramtypes",[oe,At])],fe);let me=class extends oe{constructor(){super(...arguments),this.valueX=0,this.valueY=0,this.borderColor=ot.White(),this.backgroundColor=ot.Clear(),this.isHorizontal=!1,this.isVertical=!1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.onChanged=null}};ne([N.field,se("design:type",Number)],me.prototype,"valueX",void 0),ne([N.field,se("design:type",Number)],me.prototype,"valueY",void 0),ne([N.field,se("design:type",ot)],me.prototype,"borderColor",void 0),ne([N.field,se("design:type",ot)],me.prototype,"backgroundColor",void 0),ne([N.field,se("design:type",Boolean)],me.prototype,"isHorizontal",void 0),ne([N.field,se("design:type",Boolean)],me.prototype,"isVertical",void 0),ne([N.field,se("design:type",Number)],me.prototype,"paddingTop",void 0),ne([N.field,se("design:type",Number)],me.prototype,"paddingRight",void 0),ne([N.field,se("design:type",Number)],me.prototype,"paddingBottom",void 0),ne([N.field,se("design:type",Number)],me.prototype,"paddingLeft",void 0),ne([Pt.uuidEvent,se("design:type",Object)],me.prototype,"onChanged",void 0),me=ne([I("engine.shape",pt.UI_SLIDER_SHAPE)],me);var ge,we=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},xe=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Re=ge=class extends N{constructor(){super(...arguments),this.useDummyModel=!1}static Dummy(){const t=new ge;return t.useDummyModel=!0,t}};we([N.field,xe("design:type",String)],Re.prototype,"id",void 0),we([N.field,xe("design:type",String)],Re.prototype,"name",void 0),we([N.field,xe("design:type",String)],Re.prototype,"bodyShape",void 0),we([N.field,xe("design:type",Array)],Re.prototype,"wearables",void 0),we([N.field,xe("design:type",Object)],Re.prototype,"skinColor",void 0),we([N.field,xe("design:type",Object)],Re.prototype,"hairColor",void 0),we([N.field,xe("design:type",Object)],Re.prototype,"eyeColor",void 0),we([N.field,xe("design:type",Boolean)],Re.prototype,"useDummyModel",void 0),Re=ge=we([S("engine.avatarShape",pt.AVATAR_SHAPE)],Re);var ve=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},be=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Te=class extends Pt{constructor(t){super(t),this.type="onFocus",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Te.prototype,"type",void 0),Te=ve([S("engine.onFocus",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Te);let _e=class extends Pt{constructor(t){super(t),this.type="onTextSubmit",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],_e.prototype,"type",void 0),_e=ve([S("engine.onTextSubmit",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],_e);let Ae=class extends Pt{constructor(t){super(t),this.type="onBlur",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Ae.prototype,"type",void 0),Ae=ve([S("engine.onBlur",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Ae);let Ee=class extends Pt{constructor(t){super(t),this.type="onClick",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Ee.prototype,"type",void 0),Ee=ve([S("engine.onClick",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Ee);let ze=class extends Pt{constructor(t){super(t),this.type="onEnter",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],ze.prototype,"type",void 0),ze=ve([S("engine.onEnter",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],ze);let Ce=class extends Pt{constructor(t){super(t),this.type="onChange",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Ce.prototype,"type",void 0),Ce=ve([S("engine.onChange",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Ce);let Se=class extends Pt{constructor(t){super(t),this.type="pointerDown",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Se.prototype,"type",void 0),Se=ve([S("engine.pointerDown",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Se);let Ie=class extends Pt{constructor(t){super(t),this.type="pointerUp",Yt.handlerMap[this.uuid]=this}};ve([N.readonly,be("design:type",String)],Ie.prototype,"type",void 0),Ie=ve([S("engine.pointerUp",pt.UUID_CALLBACK),be("design:paramtypes",[Function])],Ie);i.d(e,"G",(function(){return Pe})),i.d(e,"k",(function(){return S})),i.d(e,"l",(function(){return H})),i.d(e,"H",(function(){return s})),i.d(e,"A",(function(){return yt})),i.d(e,"f",(function(){return ft})),i.d(e,"g",(function(){return gt})),i.d(e,"v",(function(){return Rt})),i.d(e,"m",(function(){return Tt})),i.d(e,"q",(function(){return _t})),i.d(e,"z",(function(){return At})),i.d(e,"c",(function(){return Et})),i.d(e,"r",(function(){return zt})),i.d(e,"y",(function(){return Ct})),i.d(e,"p",(function(){return It})),i.d(e,"h",(function(){return qt})),i.d(e,"i",(function(){return rt})),i.d(e,"j",(function(){return ot})),i.d(e,"w",(function(){return et})),i.d(e,"x",(function(){return K})),i.d(e,"F",(function(){return it})),i.d(e,"b",(function(){return lt})),i.d(e,"a",(function(){return Lt})),i.d(e,"o",(function(){return kt})),i.d(e,"d",(function(){return Zt})),i.d(e,"e",(function(){return Qt})),i.d(e,"t",(function(){return ee})),i.d(e,"n",(function(){return ie})),i.d(e,"B",(function(){return de})),i.d(e,"C",(function(){return he})),i.d(e,"E",(function(){return ue})),i.d(e,"D",(function(){return fe})),i.d(e,"s",(function(){return Ee})),i.d(e,"u",(function(){return Se}));const Fe=new H("scene");Fe.uuid="0";const Pe=new class{constructor(t){this.eventManager=new c,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(g,this,this.componentAddedHandler),this.eventManager.addListener(m,this,this.componentRemovedHandler),this.rootEntity=t}get entities(){return this._entities}get disposableComponents(){return this._disposableComponents}addEntity(t){const e=t.getParent();if(t.isAddedToEngine())return t;t.eventManager=this.eventManager,t.engine=this,this._entities[t.uuid]=t,this.checkRequirementsAndAdd(t),e?e.isAddedToEngine()||e===this.rootEntity||s("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+e.uuid):t.setParent(this.rootEntity),t.alive=!0;for(let e in t.children){const i=t.children[e];i&&(i.isAddedToEngine()||this.addEntity(i))}return t}removeEntity(t){const e=t.uuid;if(t.isAddedToEngine()){for(let i in t.components){const n=this._componentGroups[i];if(n)for(let e in n)n[e].removeEntity(t);delete this.entityLists[i][e]}for(let e=0;e<this.simpleSystems.length;e++){const i=this.simpleSystems[e];i.onRemoveEntity&&i.onRemoveEntity(t)}for(let e in t.children){const i=t.children[e];i&&this.removeEntity(i)}return t.alive=!1,t.eventManager=null,delete this._entities[e],!0}s("Engine: Trying to remove non existent entity from engine."),t.isAddedToEngine()?s("Engine: Entity id: "+e):s(`Engine: Entity "${t.uuid}" has not been added to any engine yet.`),s("Engine: Entity's components:");for(let e in t.components)s(e);return!1}addSystem(t,e=0){if(-1!==this.addedSystems.indexOf(t))return s("Engine: Trying to add a system that is already added. Aborting"),t;if(this.systems.length>0)for(let i=0;i<this.systems.length;i++){const n=this.systems[i],s=i===this.systems.length-1;if(n.priority>e){this.addedSystems.push(t),this.systems.splice(i,0,{system:t,priority:e});break}if(s){this.addedSystems.push(t),this.systems.splice(i+1,0,{system:t,priority:e});break}}else this.addedSystems.push(t),this.systems.splice(1,0,{system:t,priority:e});return this.registerSystem(t),t}removeSystem(t){const e=this.addedSystems.indexOf(t);if(-1!==e){t.active=!1,t.deactivate&&t.deactivate(),this.addedSystems.splice(e,1);for(let e=0;e<this.systems.length;e++){this.systems[e].system===t&&this.systems.splice(e,1)}return!0}return!1}update(t){for(let e in this.systems){const i=this.systems[e].system;if(i.active&&i.update)try{i.update(t)}catch(t){o(t)}}return this}getEntitiesWithComponent(t){const e="string"==typeof t?t:F(t);return e in this.entityLists?this.entityLists[e]:this.entityLists[e]={}}registerComponent(t){const e=O(t),i=F(t),n=P(t);this._disposableComponents[e]=t,null!==n&&(this.eventManager.fireEvent(new E(e,i,n)),this.eventManager.fireEvent(new C(e,t)))}disposeComponent(t){const e=O(t);return delete this._disposableComponents[e]&&(this.eventManager.fireEvent(new z(e)),t.onDispose&&t.onDispose(),!0)}updateComponent(t){this.eventManager.fireEvent(new C(O(t),t))}getComponentGroup(...t){const e=new L(...t);e.active=!0;const i=e.requiresNames;for(let t=0;t<i.length;t++){const n=i[t];let s=this._componentGroups[n];s||(this._componentGroups[n]=s=[]),-1===s.indexOf(e)&&s.push(e)}for(let t in this._entities)this.checkRequirements(this._entities[t],e);return e}removeComponentGroup(t){if(t.active){t.active=!1;const e=t.requiresNames;for(let i=0;i<e.length;i++){const n=e[i];let s=this._componentGroups[n];if(s){const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}return!0}return!1}registerSystem(t){t.active=!0,t.activate&&t.activate(this),this.simpleSystems.push(t)}checkRequirementsAndAdd(t){if(t.isAddedToEngine()){for(let e in t.components){e in this.entityLists||(this.entityLists[e]={}),this.entityLists[e][t.uuid]=t;const i=this._componentGroups[e];if(i)for(let e in i)this.checkRequirements(t,i[e])}for(let e=0;e<this.simpleSystems.length;e++){const i=this.simpleSystems[e];i.onAddEntity&&i.onAddEntity(t)}}}checkRequirements(t,e){e.meetsRequirements(t)?e.hasEntity(t)||e.addEntity(t):e.hasEntity(t)&&e.removeEntity(t)}componentAddedHandler(t){const{entity:e,componentName:i}=t;if(!e.isAddedToEngine())return;this.entityLists[i]?this.entityLists[i][e.uuid]=e:this.entityLists[i]={[e.uuid]:e};const n=this._componentGroups[i];if(n)for(let t in n)this.checkRequirements(e,n[t])}componentRemovedHandler(t){const{entity:e,componentName:i}=t;if(!e.isAddedToEngine())return;delete this.entityLists[i][e.uuid];const n=this._componentGroups[i];if(n)for(let t in n)this.checkRequirements(e,n[t])}}(Fe);I.engine=Pe,"undefined"!=typeof dcl&&Pe.addSystem(new W(dcl),1/0),Pe.addSystem(Yt),Pe.addSystem(Gt),Pe.addSystem(Vt)},21:function(t,e,i){"use strict";i.r(e);var n=i(0);function s(t,e,i,s){const o=new n.l,r=new n.r(t);return o.addComponentOrReplace(r),o.addComponentOrReplace(new n.A({position:e,rotation:s?n.w.Euler(s.x,s.y,s.z):void 0,scale:i})),n.G.addEntity(o),r}s("models/base.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/play_button.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/croc0.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/croc0_001.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/croc0_002.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/croc0_003.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/croc0_004.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/game_over.obj",new n.F(5,0,5),new n.F(.3,.3,.3)).visible=!1,s("models/instructions.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/notice.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator_001.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator_002.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator_003.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator_004.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/separator_005.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/subtitle.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/side.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/side2.obj",new n.F(5,0,5),new n.F(.3,.3,.3)),s("models/title.obj",new n.F(5,0,5),new n.F(.3,.3,.3))}})}));