!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";n.r(t);var r,s,o,E;!function(e){e.ENCODE="ENCODE",e.DECODE="DECODE",e.DESTROY_ENCODER="DESTROY_ENCODER",e.DESTROY_DECODER="DESTROY_ENCODER"}(r||(r={})),function(e){e.ENCODE="ENCODE",e.PAUSE="PAUSE",e.RESUME="RESUME",e.ON_PAUSED="ON_PAUSED",e.ON_RECORDING="ON_RECORDING"}(s||(s={})),function(e){e.ENCODE="ENCODE_OUTPUT",e.DECODE="DECODE_OUTPUT"}(o||(o={})),function(e){e[e.RECORDING=0]="RECORDING",e[e.PAUSE_REQUESTED=1]="PAUSE_REQUESTED",e[e.PAUSED=2]="PAUSED"}(E||(E={}));class i extends AudioWorkletProcessor{constructor(...e){super(...e),this.status=E.PAUSED,this.inputSamplesCount=0,this.port.onmessage=e=>{e.data.topic===s.PAUSE&&(this.status=E.PAUSE_REQUESTED),e.data.topic===s.RESUME&&(this.status=E.RECORDING,this.notify(s.ON_RECORDING))}}process(e,t,n){if(this.status===E.PAUSED)return!0;let r=e[0][0];if(this.status===E.PAUSE_REQUESTED){const e=960*Math.floor(r.length/960)+960-this.inputSamplesCount%960;r=r.slice(0,e),this.status=E.PAUSED,this.notify(s.ON_PAUSED)}return this.sendDataToEncode(r),this.inputSamplesCount+=r.length,!0}notify(e){this.port.postMessage({topic:e})}sendDataToEncode(e){this.port.postMessage({topic:s.ENCODE,samples:e},[e.buffer])}}registerProcessor("inputProcessor",i)},function(e,t,n){"use strict";n.r(t);const r=n(0);var s;r&&r.__esModule&&r.default&&new r.default((s=self,{onConnect(e){s.addEventListener("message",()=>e(),{once:!0})},onError(e){s.addEventListener("error",t=>{t.error?e(t.error):t.message&&e(Object.assign(new Error(t.message),{colno:t.colno,error:t.error,filename:t.filename,lineno:t.lineno,message:t.message}))})},onMessage(e){s.addEventListener("message",t=>{e(t.data)})},sendMessage(e){s.postMessage(e)},close(){"terminate"in s?s.terminate():"close"in s&&s.close()}}))}]));