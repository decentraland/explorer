!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=21)}({1:function(t,e,i){"use strict";let n=0;function s(...t){"undefined"!=typeof dcl?dcl.log(...t):console.log("DEBUG:",...t)}function o(t,e){"undefined"!=typeof dcl?dcl.error(t,e):console.error("ERROR:",t,e)}function r(t){if(n++,0===t.length)throw new Error("newId(type: string): type cannot be empty");return t+n.toString(36)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function d(t,e){const i=[];for(let n=0;n<t;++n)i.push(e());return i}const h="__event_name__",l=[];function p(t){if(!(h in t)||"string"!=typeof t[h])throw new Error("The EventConstructor is not registered");return t[h]}class c{constructor(){this.listeners={}}addListener(t,e,i){if(!t||"function"!=typeof t)throw new Error("Invalid EventConstructor");const n=p(t);let s=this.listeners[n];s||(s=this.listeners[n]=[]);for(let t=0;t<s.length;t++){if(s[t].listener===e)throw new Error("The provided listener is already registered")}return s.push({listener:e,fn:i}),this}removeListener(t,e){if(!e||"function"!=typeof e)throw new Error("Invalid EventConstructor");const i=p(e);let n=this.listeners[i];if(!n)return!1;for(let e=0;e<n.length;e++){if(n[e].listener===t)return n.splice(e,1),!0}return!1}fireEvent(t){const e=p(t.constructor);let i=this.listeners[e];if(i)for(let e=0;e<i.length;e++)try{const n=i[e];n.fn.call(n.listener,t)}catch(t){o(t)}return this}}function u(){const t=r("EV");if(-1!==l.indexOf(t))throw new Error(`The event name ${t} is already taken`);return l.push(t),e=>(e[h]=t,e)}var y=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let m=class{constructor(t,e,i){this.entity=t,this.componentName=e,this.component=i}};m=y([u(),f("design:paramtypes",[Object,String,Object])],m);let g=class{constructor(t,e,i){this.entity=t,this.componentName=e,this.classId=i}};g=y([u(),f("design:paramtypes",[Object,String,Object])],g);let v=class{constructor(t,e){this.entity=t,this.parent=e}};var w;v=y([u(),f("design:paramtypes",[Object,Object])],v),function(t){t[t.PERCENT=0]="PERCENT",t[t.PIXELS=1]="PIXELS"}(w||(w={}));class x{constructor(t){if(this.type=w.PIXELS,"string"==typeof t){let e=t;e.indexOf("px")>-1?this.type=w.PIXELS:e.indexOf("%")>-1&&(this.type=w.PERCENT),this.value=parseFloat(e)}else this.value=t}toString(){let t=this.value.toString();return this.type===w.PERCENT?t+="%":t+="px",t}}var R=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},b=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const T="__name__symbol_",_="__classId__symbol_",A="__component__id_";let E=class{constructor(t,e,i){this.componentId=t,this.componentName=e,this.classId=i}};E=R([u(),b("design:paramtypes",[String,String,Number])],E);let z=class{constructor(t){this.componentId=t}};z=R([u(),b("design:paramtypes",[String])],z);let C=class{constructor(t,e){this.componentId=t,this.component=e}};function S(t,e){return function(i){if(i.isComponent)throw new TypeError(`You cannot extend a component. Trying to extend ${i.originalClassName} with: ${t}`);const n=i,s=function(){const i=Array.prototype.slice.call(arguments),s=new n(...i);return Object.defineProperty(s,T,{enumerable:!1,writable:!1,configurable:!1,value:t}),void 0!==e&&Object.defineProperty(s,_,{enumerable:!1,writable:!1,configurable:!1,value:e}),s};return void 0!==e&&(s[_]=e),s[T]=t,s.isComponent=!0,s.originalClassName=t,(s.prototype=i.prototype).constructor=i,s}}function O(t,e){return function(i){if(i.isComponent)throw new TypeError(`You cannot extend a component. Trying to extend ${i.originalClassName} with: ${t}`);if("number"!=typeof e||isNaN(e))throw new Error(`classId: ${e} is an invalid integer`);const n=i,s=function(){if(!O.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");const i=Array.prototype.slice.call(arguments),s=new n(...i),o=r("C");return Object.defineProperty(s,T,{enumerable:!1,writable:!1,configurable:!1,value:t}),Object.defineProperty(s,A,{enumerable:!1,writable:!1,configurable:!1,value:o}),void 0!==e&&Object.defineProperty(s,_,{enumerable:!1,writable:!1,configurable:!1,value:e}),O.engine&&O.engine.registerComponent(s),s};return void 0!==e&&(s[_]=e),s[T]=t,s.isComponent=!0,s.isDisposableComponent=!0,s.originalClassName=t,(s.prototype=i.prototype).constructor=i,s}}function I(t){if(!t)throw new TypeError(t+" is not a component.");if(t[T])return t[T];throw new TypeError(t+" is not a registered component.")}function P(t){if(!t)throw new TypeError(t+" is not a component.");if(t[_])return t[_];if(!t[T])throw new TypeError(t+" is not a registered component.");return null}function N(t){if(!t)throw new TypeError(t+" is not a component.");if(t[A])return t[A];throw new TypeError(t+" is not a registered disposable component.")}C=R([u(),b("design:paramtypes",[String,Object])],C),function(t){t.engine=null}(O||(O={}));class F{constructor(){this.dirty=!1,this.data={},this.subscriptions=[]}static component(t,e){if(delete t[e]){const i=e+"_"+Math.random();t[i]=void 0,Object.defineProperty(t,i,Object.assign(Object.assign({},Object.getOwnPropertyDescriptor(t,i)),{enumerable:!1})),Object.defineProperty(t,e.toString(),{get:function(){return this[i]},set:function(t){const n=this[i];if(this.data[e]=t?N(t):null,this[i]=t,t!==n){this.dirty=!0;for(let i=0;i<this.subscriptions.length;i++)this.subscriptions[i](e,t,n)}},enumerable:!0})}}static field(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e]},set:function(t){const i=this.data[e];if(this.data[e]=t,t!==i){this.dirty=!0;for(let n=0;n<this.subscriptions.length;n++)this.subscriptions[n](e,t,i)}},enumerable:!0})}static uiValue(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e].toString()},set:function(t){const i=this.data[e],n=new x(t);if(this.data[e]=n,n!==i){this.dirty=!0;for(let t=0;t<this.subscriptions.length;t++)this.subscriptions[t](e,n,i)}},enumerable:!0})}static readonly(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){if(e in this.data==!1)throw new Error(`The field ${e} is uninitialized`);return this.data[e]},set:function(t){if(e in this.data)throw new Error(`The field ${e} is readonly`);this.data[e]=t,this.dirty=!0},enumerable:!0,configurable:!1})}onChange(t){return this.subscriptions.push(t),this}toJSON(){return this.data}}function M(t){return A in t}class L{constructor(...t){if(this.entities=[],this.active=!1,this._requiresNames=[],!t)throw new Error("ComponentGroup: Could not load the requires list");if(!(t instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return t.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(let e=0;e<t.length;e++){const i=t[e];let n=null;if(!i)throw new Error(`ComponentGroup: the required component at location ${e} is invalid`);try{n=I(i)}catch(t){throw new Error(`ComponentGroup: the required component at location ${e} is not registered as a @Component. Remember to provide the class of the component, not the name`)}if(this._requiresNames.some(t=>t===n))throw new Error(`ComponentGroup: the required component list has a repeated name ${n}`);this._requiresNames.push(n)}}hasEntity(t){return!!t.isAddedToEngine()&&-1!==this.entities.indexOf(t)}addEntity(t){if(!t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(t)&&this.entities.push(t)}removeEntity(t){const e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)}componentRemoved(t,e){-1!==this._requiresNames.indexOf(e)&&this.removeEntity(t)}meetsRequirements(t){for(let e=0;e<this._requiresNames.length;e++){if(!(this._requiresNames[e]in t.components))return!1}return!0}}class U{constructor(t){this.name=t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=r("E"),this.components={},this.engine=null,this._parent=null}addComponentOrReplace(t){if("function"==typeof t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof t)throw new Error(`You passed a ${typeof t}, an instance of component is expected`);const e=I(t);if(this.components[e]){if(this.components[e]===t)return t;this.removeComponent(this.components[e],!1)}return this.addComponent(t)}hasComponent(t){const e=typeof t;if("string"!==e&&"object"!==e&&"function"!==e)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==t)return!1;const i="string"===e?t:I(t),n=this.components[i];return!!n&&("object"===e?n===t:"function"!==e||n instanceof t)}getComponent(t){const e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#get(component): component is not a class or name");const i="string"===e?t:I(t),n=this.components[i];if(!n)throw new Error(`Can not get component "${i}" from entity "${this.identifier}"`);if("function"===e){if(n instanceof t)return n;throw new Error(`Can not get component "${i}" from entity "${this.identifier}" (by instance)`)}return n}getComponentOrNull(t){const e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#getOrNull(component): component is not a class or name");const i="string"===e?t:I(t),n=this.components[i];return n?"function"===e?n instanceof t?n:null:n:null}getComponentOrCreate(t){if("function"!=typeof t)throw new Error("Entity#getOrCreate(component): component is not a class");let e=this.getComponentOrNull(t);return e||(I(e=new t),this.addComponentOrReplace(e)),e}addComponent(t){if("object"!=typeof t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");const e=I(t),i=P(t);if(this.components[e])throw new Error(`A component of type "${e}" is already present in entity "${this.identifier}"`);this.components[e]=t,this.eventManager&&this.eventManager.fireEvent(new g(this,e,i));const n=t;return"function"==typeof n.addedToEntity&&n.addedToEntity(this),t}removeComponent(t,e=!0){const i=typeof t;if("string"!==i&&"function"!==i&&"object"!==i)throw new Error("Entity#remove(component): component is not a class, class or name");const n="string"===i?t:I(t),o=this.components[n];if(o){if("function"===i)return o instanceof t?(delete this.components[n],void(o&&(e&&this.eventManager&&this.eventManager.fireEvent(new m(this,n,o)),"function"==typeof o.removedFromEntity&&o.removedFromEntity(this)))):void s(`Entity Warning: Trying to remove wrong (by constructor) component "${n}" from entity "${this.identifier}"`);delete this.components[n],o&&(e&&this.eventManager&&this.eventManager.fireEvent(new m(this,n,o)),"function"==typeof o.removedFromEntity&&o.removedFromEntity(this))}else s(`Entity Warning: Trying to remove inexisting component "${n}" from entity "${this.identifier}"`)}isAddedToEngine(){return!(!this.engine||!(this.uuid in this.engine.entities||this.engine.rootEntity===this))}setParent(t){let e=!t&&this.engine?this.engine.rootEntity:t,i=this.getParent();if(e===this)throw new Error(`Failed to set parent for entity "${this.identifier}": An entity can't set itself as a its own parent`);if(e===i)return this;const n=this.getCircularAncestor(e);if(n)throw new Error(`Failed to set parent for entity "${this.identifier}": Circular parent references are not allowed (See entity "${n}")`);return i&&delete i.children[this.uuid],null!==e&&"0"!==e.uuid&&(!e.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),e.isAddedToEngine()&&!this.isAddedToEngine()&&e.engine.addEntity(this)),this._parent=e||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new v(this,e)),this}getParent(){return this._parent}get identifier(){return this.name||this.uuid}getCircularAncestor(t){const e=this.engine?this.engine.rootEntity:null;let i=t;for(;i&&i!==e;){const t=i.getParent();if(t===this)return i.uuid;i=t}return null}registerAsChild(){const t=this.getParent();this.uuid&&t&&(t.children[this.uuid]=this)}}const B=Promise.resolve().then.bind(Promise.resolve());class H{constructor(t,e=!1,i,n){this.initalize(t,e,i,n)}initalize(t,e=!1,i,n){return this.mask=t,this.skipNextObservers=e,this.target=i,this.currentTarget=n,this}}class D{constructor(t,e,i=null){this.callback=t,this.mask=e,this.scope=i,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1}}class j{constructor(t){this._observers=new Array,this._onObserverAdded=null,this._eventState=new H(0),t&&(this._onObserverAdded=t)}add(t,e=-1,i=!1,n=null,s=!1){if(!t)return null;let o=new D(t,e,n);return o.unregisterOnNextCall=s,i?this._observers.unshift(o):this._observers.push(o),this._onObserverAdded&&this._onObserverAdded(o),o}addOnce(t){return this.add(t,void 0,void 0,void 0,!0)}remove(t){if(!t)return!1;return-1!==this._observers.indexOf(t)&&(this._deferUnregister(t),!0)}removeCallback(t,e){for(let i=0;i<this._observers.length;i++)if(this._observers[i].callback===t&&(!e||e===this._observers[i].scope))return this._deferUnregister(this._observers[i]),!0;return!1}notifyObservers(t,e=-1,i,n){if(!this._observers.length)return!0;let s=this._eventState;s.mask=e,s.target=i,s.currentTarget=n,s.skipNextObservers=!1,s.lastReturnValue=t;for(let i of this._observers)if(!i._willBeUnregistered&&(i.mask&e&&(i.scope?s.lastReturnValue=i.callback.apply(i.scope,[t,s]):s.lastReturnValue=i.callback(t,s),i.unregisterOnNextCall&&this._deferUnregister(i)),s.skipNextObservers))return!1;return!0}notifyObserversWithPromise(t,e=-1,i,n){let s=Promise.resolve(t);if(!this._observers.length)return s;let o=this._eventState;return o.mask=e,o.target=i,o.currentTarget=n,o.skipNextObservers=!1,this._observers.forEach(i=>{o.skipNextObservers||i._willBeUnregistered||i.mask&e&&(s=i.scope?s.then(e=>(o.lastReturnValue=e,i.callback.apply(i.scope,[t,o]))):s.then(e=>(o.lastReturnValue=e,i.callback(t,o))),i.unregisterOnNextCall&&this._deferUnregister(i))}),s.then(()=>t)}notifyObserver(t,e,i=-1){let n=this._eventState;n.mask=i,n.skipNextObservers=!1,t.callback(e,n)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){let t=new j;return t._observers=this._observers.slice(0),t}hasSpecificMask(t=-1){for(let e of this._observers)if(e.mask&t||e.mask===t)return!0;return!1}_deferUnregister(t){t.unregisterOnNextCall=!1,t._willBeUnregistered=!0,function(t){const e=B(t);e.isComplete=!1,e.then(t=>{e.isComplete=!0,e.result=t,e.didFail=!1}).catch(t=>{e.isComplete=!0,e.error=t,e.didFail=!0,o("executeTask: FAILED "+t.toString(),t)})}(async()=>this._remove(t))}_remove(t){if(!t)return!1;let e=this._observers.indexOf(t);return-1!==e&&(this._observers.splice(e,1),!0)}}var k=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},q=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let W=class{constructor(t,e){this.uuid=t,this.payload=e}};W=k([u(),q("design:paramtypes",[String,Object])],W);let V=class{constructor(t){this.payload=t}};V=k([u(),q("design:paramtypes",[Object])],V);let G=class{constructor(t){this.payload=t}};G=k([u(),q("design:paramtypes",[Object])],G);const Y="0";class X{constructor(t){this.dcl=t,this.cachedComponents={}}activate(t){this.engine=t,t.eventManager.addListener(g,this,this.componentAdded),t.eventManager.addListener(m,this,this.componentRemoved),t.eventManager.addListener(E,this,this.disposableComponentCreated),t.eventManager.addListener(z,this,this.disposableComponentRemoved),t.eventManager.addListener(C,this,this.disposableComponentUpdated),t.eventManager.addListener(v,this,this.parentChanged);const e=t.rootEntity.uuid;this.dcl.addEntity(e),this.dcl.onUpdate(e=>{t.update(e),this.presentEntities()}),this.dcl.onEvent(e=>{const i=e.data;switch(e.type){case"uuidEvent":t.eventManager.fireEvent(new W(i.uuid,i.payload));break;case"raycastResponse":"HitFirst"===i.queryType?t.eventManager.fireEvent(new V(i)):"HitAll"===i.queryType&&t.eventManager.fireEvent(new V(i));break;case"pointerEvent":t.eventManager.fireEvent(new G(i.payload))}})}onAddEntity(t){if(t&&t.isAddedToEngine()){const e=t.uuid,i=t.getParent();this.dcl.addEntity(e),i&&this.dcl.setParent(e,i.uuid),this.cachedComponents[e]={};for(let i in t.components){const n=t.components[i],s=P(n);if(null!==s)if(M(n))this.dcl.attachEntityComponent(t.uuid,i,N(n));else{const t=JSON.stringify(n);this.dcl.updateEntityComponent(e,i,s,t),this.cachedComponents[e][i]=t}}}}onRemoveEntity(t){if(t.isAddedToEngine()){const e=t.uuid;this.dcl.removeEntity(e),delete this.cachedComponents[e]}}presentEntities(){for(let t in this.engine.entities){const e=this.engine.entities[t],i=e.uuid;for(let t in e.components){const n=e.components[t],s=P(n);if(null!==s&&!M(n)){const o=JSON.stringify(n);this.cachedComponents[i][t]!==o&&(this.dcl.updateEntityComponent(e.uuid,t,s,o),this.cachedComponents[i][t]=o)}}}for(let t in this.engine.disposableComponents){const e=this.engine.disposableComponents[t];e instanceof F&&e.dirty&&(this.dcl.componentUpdated(t,JSON.stringify(e)),e.dirty=!1)}}componentAdded(t){if(t.entity.isAddedToEngine()){const e=t.entity.components[t.componentName];if(M(e))this.dcl.attachEntityComponent(t.entity.uuid,t.componentName,N(e));else if(null!==t.classId){const i=JSON.stringify(e);this.dcl.updateEntityComponent(t.entity.uuid,t.componentName,t.classId,i),this.cachedComponents[t.entity.uuid][t.componentName]=i}}}componentRemoved(t){t.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(t.entity.uuid,t.componentName),delete this.cachedComponents[t.entity.uuid][t.componentName])}disposableComponentCreated(t){this.dcl.componentCreated(t.componentId,t.componentName,t.classId)}disposableComponentRemoved(t){this.dcl.componentDisposed(t.componentId)}disposableComponentUpdated(t){this.dcl.componentUpdated(t.componentId,JSON.stringify(t.component))}parentChanged(t){this.dcl.setParent(t.entity.uuid,t.parent?t.parent.uuid:Y)}}var $,Z;!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}($||($={})),function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(Z||(Z={}));const Q=1/2.2,J=2.2,K=1e-6,tt=Math.PI/180,et=360/(2*Math.PI);class it{static WithinEpsilon(t,e,i=1401298e-51){let n=t-e;return-i<=n&&n<=i}static ToHex(t){let e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()}static Sign(t){const e=+t;return 0===e||isNaN(e)?e:e>0?1:-1}static Clamp(t,e=0,i=1){return Math.min(i,Math.max(e,t))}static Log2(t){return Math.log(t)*Math.LOG2E}static Repeat(t,e){return t-Math.floor(t/e)*e}static Normalize(t,e,i){return(t-e)/(i-e)}static Denormalize(t,e,i){return t*(i-e)+e}static DeltaAngle(t,e){let i=it.Repeat(e-t,360);return i>180&&(i-=360),i}static PingPong(t,e){let i=it.Repeat(t,2*e);return e-Math.abs(i-e)}static SmoothStep(t,e,i){let n=it.Clamp(i);return e*(n=-2*n*n*n+3*n*n)+t*(1-n)}static MoveTowards(t,e,i){let n=0;return n=Math.abs(e-t)<=i?e:t+it.Sign(e-t)*i}static MoveTowardsAngle(t,e,i){let n=it.DeltaAngle(t,e),s=0;return s=-i<n&&n<i?e:it.MoveTowards(t,t+n,i)}static Lerp(t,e,i){return t+(e-t)*i}static LerpAngle(t,e,i){let n=it.Repeat(e-t,360);return n>180&&(n-=360),t+n*it.Clamp(i)}static InverseLerp(t,e,i){let n=0;return n=t!==e?it.Clamp((i-t)/(e-t)):0}static Hermite(t,e,i,n,s){let o=s*s,r=s*o;return t*(2*r-3*o+1)+i*(-2*r+3*o)+e*(r-2*o+s)+n*(r-o)}static RandomRange(t,e){return t===e?t:Math.random()*(e-t)+t}static RangeToPercent(t,e,i){return(t-e)/(i-e)}static PercentToRange(t,e,i){return(i-e)*t+e}static NormalizeRadians(t){return t-it.TwoPi*Math.floor((t+Math.PI)/it.TwoPi)}}it.TwoPi=2*Math.PI;class nt{constructor(t,e,i,n){this.x=t,this.y=e,this.z=i,this.w=n}static Add(t,e){return new nt(t.x,t.y,t.z,t.w).addInPlace(e)}static FromArray(t,e=0){return new nt(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2],i.w=t[e+3]}static FromFloatArrayToRef(t,e,i){nt.FromArrayToRef(t,e,i)}static FromFloatsToRef(t,e,i,n,s){s.x=t,s.y=e,s.z=i,s.w=n}static Zero(){return new nt(0,0,0,0)}static One(){return new nt(1,1,1,1)}static Normalize(t){let e=nt.Zero();return nt.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){e.copyFrom(t),e.normalize()}static Minimize(t,e){let i=new nt(t.x,t.y,t.z,t.w);return i.minimizeInPlace(e),i}static Maximize(t,e){let i=new nt(t.x,t.y,t.z,t.w);return i.maximizeInPlace(e),i}static Distance(t,e){return Math.sqrt(nt.DistanceSquared(t,e))}static DistanceSquared(t,e){let i=t.x-e.x,n=t.y-e.y,s=t.z-e.z,o=t.w-e.w;return i*i+n*n+s*s+o*o}static Center(t,e){let i=nt.Add(t,e);return i.scaleInPlace(.5),i}static TransformNormal(t,e){let i=nt.Zero();return nt.TransformNormalToRef(t,e,i),i}static TransformNormalToRef(t,e,i){const n=e.m;let s=t.x*n[0]+t.y*n[4]+t.z*n[8],o=t.x*n[1]+t.y*n[5]+t.z*n[9],r=t.x*n[2]+t.y*n[6]+t.z*n[10];i.x=s,i.y=o,i.z=r,i.w=t.w}static TransformNormalFromFloatsToRef(t,e,i,n,s,o){const r=s.m;o.x=t*r[0]+e*r[4]+i*r[8],o.y=t*r[1]+e*r[5]+i*r[9],o.z=t*r[2]+e*r[6]+i*r[10],o.w=n}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){let t=new Array;return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new nt(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new nt(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this}subtractFromFloats(t,e,i,n){return new nt(this.x-t,this.y-e,this.z-i,this.w-n)}subtractFromFloatsToRef(t,e,i,n,s){return s.x=this.x-t,s.y=this.y-e,s.z=this.z-i,s.w=this.w-n,this}negate(){return new nt(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new nt(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=K){return t&&it.WithinEpsilon(this.x,t.x,e)&&it.WithinEpsilon(this.y,t.y,e)&&it.WithinEpsilon(this.z,t.z,e)&&it.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,i,n){return this.x===t&&this.y===e&&this.z===i&&this.w===n}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new nt(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this}multiplyByFloats(t,e,i,n){return new nt(this.x*t,this.y*e,this.z*i,this.w*n)}divide(t){return new nt(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new nt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new nt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){let t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new rt(this.x,this.y,this.z)}clone(){return new nt(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}setAll(t){return this.x=this.y=this.z=this.w=t,this}}class st{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return st._identityReadOnly}static FromArray(t,e=0){let i=new st;return st.FromArrayToRef(t,e,i),i}static FromArrayToRef(t,e,i){for(let n=0;n<16;n++)i._m[n]=t[n+e];i._markAsUpdated()}static FromFloatArrayToRefScaled(t,e,i,n){for(let s=0;s<16;s++)n._m[s]=t[s+e]*i;n._markAsUpdated()}static FromValuesToRef(t,e,i,n,s,o,r,a,d,h,l,p,c,u,y,f,m){const g=m._m;g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=s,g[5]=o,g[6]=r,g[7]=a,g[8]=d,g[9]=h,g[10]=l,g[11]=p,g[12]=c,g[13]=u,g[14]=y,g[15]=f,m._markAsUpdated()}static FromValues(t,e,i,n,s,o,r,a,d,h,l,p,c,u,y,f){let m=new st;const g=m._m;return g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=s,g[5]=o,g[6]=r,g[7]=a,g[8]=d,g[9]=h,g[10]=l,g[11]=p,g[12]=c,g[13]=u,g[14]=y,g[15]=f,m._markAsUpdated(),m}static Compose(t,e,i){let n=new st;return st.ComposeToRef(t,e,i,n),n}static ComposeToRef(t,e,i,n){st.ScalingToRef(t.x,t.y,t.z,at.Matrix[1]),e.toRotationMatrix(at.Matrix[0]),at.Matrix[1].multiplyToRef(at.Matrix[0],n),n.setTranslation(i)}static Identity(){const t=st.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){st.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)}static Zero(){const t=st.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){let e=new st;return st.RotationXToRef(t,e),e}static Invert(t){let e=new st;return t.invertToRef(e),e}static RotationXToRef(t,e){let i=Math.sin(t),n=Math.cos(t);st.FromValuesToRef(1,0,0,0,0,n,i,0,0,-i,n,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationY(t){let e=new st;return st.RotationYToRef(t,e),e}static RotationYToRef(t,e){let i=Math.sin(t),n=Math.cos(t);st.FromValuesToRef(n,0,-i,0,0,1,0,0,i,0,n,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationZ(t){let e=new st;return st.RotationZToRef(t,e),e}static RotationZToRef(t,e){let i=Math.sin(t),n=Math.cos(t);st.FromValuesToRef(n,i,0,0,-i,n,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===n&&0===i)}static RotationAxis(t,e){let i=new st;return st.RotationAxisToRef(t,e,i),i}static RotationAxisToRef(t,e,i){let n=Math.sin(-e),s=Math.cos(-e),o=1-s;t.normalize();const r=i._m;r[0]=t.x*t.x*o+s,r[1]=t.x*t.y*o-t.z*n,r[2]=t.x*t.z*o+t.y*n,r[3]=0,r[4]=t.y*t.x*o+t.z*n,r[5]=t.y*t.y*o+s,r[6]=t.y*t.z*o-t.x*n,r[7]=0,r[8]=t.z*t.x*o-t.y*n,r[9]=t.z*t.y*o+t.x*n,r[10]=t.z*t.z*o+s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,i._markAsUpdated()}static RotationYawPitchRoll(t,e,i){let n=new st;return st.RotationYawPitchRollToRef(t,e,i,n),n}static RotationYawPitchRollToRef(t,e,i,n){ot.RotationYawPitchRollToRef(t,e,i,at.Quaternion[0]),at.Quaternion[0].toRotationMatrix(n)}static Scaling(t,e,i){let n=new st;return st.ScalingToRef(t,e,i,n),n}static ScalingToRef(t,e,i,n){st.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1,n),n._updateIdentityStatus(1===t&&1===e&&1===i)}static Translation(t,e,i){let n=new st;return st.TranslationToRef(t,e,i,n),n}static TranslationToRef(t,e,i,n){st.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1,n),n._updateIdentityStatus(0===t&&0===e&&0===i)}static Lerp(t,e,i){let n=new st;return st.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){for(let s=0;s<16;s++)n._m[s]=t._m[s]*(1-i)+e._m[s]*i;n._markAsUpdated()}static DecomposeLerp(t,e,i){let n=new st;return st.DecomposeLerpToRef(t,e,i,n),n}static DecomposeLerpToRef(t,e,i,n){let s=at.Vector3[0],o=at.Quaternion[0],r=at.Vector3[1];t.decompose(s,o,r);let a=at.Vector3[2],d=at.Quaternion[1],h=at.Vector3[3];e.decompose(a,d,h);let l=at.Vector3[4];rt.LerpToRef(s,a,i,l);let p=at.Quaternion[2];ot.SlerpToRef(o,d,i,p);let c=at.Vector3[5];rt.LerpToRef(r,h,i,c),st.ComposeToRef(l,p,c,n)}static LookAtLH(t,e,i){let n=new st;return st.LookAtLHToRef(t,e,i,n),n}static LookAtLHToRef(t,e,i,n){const s=at.Vector3[0],o=at.Vector3[1],r=at.Vector3[2];e.subtractToRef(t,r),r.normalize(),rt.CrossToRef(i,r,s);const a=s.lengthSquared();0===a?s.x=1:s.normalizeFromLength(Math.sqrt(a)),rt.CrossToRef(r,s,o),o.normalize();let d=-rt.Dot(s,t),h=-rt.Dot(o,t),l=-rt.Dot(r,t);st.FromValuesToRef(s.x,o.x,r.x,0,s.y,o.y,r.y,0,s.z,o.z,r.z,0,d,h,l,1,n)}static LookAtRH(t,e,i){let n=new st;return st.LookAtRHToRef(t,e,i,n),n}static LookAtRHToRef(t,e,i,n){const s=at.Vector3[0],o=at.Vector3[1],r=at.Vector3[2];t.subtractToRef(e,r),r.normalize(),rt.CrossToRef(i,r,s);const a=s.lengthSquared();0===a?s.x=1:s.normalizeFromLength(Math.sqrt(a)),rt.CrossToRef(r,s,o),o.normalize();let d=-rt.Dot(s,t),h=-rt.Dot(o,t),l=-rt.Dot(r,t);st.FromValuesToRef(s.x,o.x,r.x,0,s.y,o.y,r.y,0,s.z,o.z,r.z,0,d,h,l,1,n)}static OrthoLH(t,e,i,n){let s=new st;return st.OrthoLHToRef(t,e,i,n,s),s}static OrthoLHToRef(t,e,i,n,s){let o=2/t,r=2/e,a=2/(n-i),d=-(n+i)/(n-i);st.FromValuesToRef(o,0,0,0,0,r,0,0,0,0,a,0,0,0,d,1,s),s._updateIdentityStatus(1===o&&1===r&&1===a&&0===d)}static OrthoOffCenterLH(t,e,i,n,s,o){let r=new st;return st.OrthoOffCenterLHToRef(t,e,i,n,s,o,r),r}static OrthoOffCenterLHToRef(t,e,i,n,s,o,r){let a=2/(e-t),d=2/(n-i),h=2/(o-s),l=-(o+s)/(o-s),p=(t+e)/(t-e),c=(n+i)/(i-n);st.FromValuesToRef(a,0,0,0,0,d,0,0,0,0,h,0,p,c,l,1,r),r._markAsUpdated()}static OrthoOffCenterRH(t,e,i,n,s,o){let r=new st;return st.OrthoOffCenterRHToRef(t,e,i,n,s,o,r),r}static OrthoOffCenterRHToRef(t,e,i,n,s,o,r){st.OrthoOffCenterLHToRef(t,e,i,n,s,o,r),r._m[10]*=-1}static PerspectiveLH(t,e,i,n){let s=new st,o=2*i/t,r=2*i/e,a=(n+i)/(n-i),d=-2*n*i/(n-i);return st.FromValuesToRef(o,0,0,0,0,r,0,0,0,0,a,1,0,0,d,0,s),s._updateIdentityStatus(!1),s}static PerspectiveFovLH(t,e,i,n){let s=new st;return st.PerspectiveFovLHToRef(t,e,i,n,s),s}static PerspectiveFovLHToRef(t,e,i,n,s,o=!0){let r=i,a=n,d=1/Math.tan(.5*t),h=o?d/e:d,l=o?d:d*e,p=(a+r)/(a-r),c=-2*a*r/(a-r);st.FromValuesToRef(h,0,0,0,0,l,0,0,0,0,p,1,0,0,c,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovRH(t,e,i,n){let s=new st;return st.PerspectiveFovRHToRef(t,e,i,n,s),s}static PerspectiveFovRHToRef(t,e,i,n,s,o=!0){let r=i,a=n,d=1/Math.tan(.5*t),h=o?d/e:d,l=o?d:d*e,p=-(a+r)/(a-r),c=-2*a*r/(a-r);st.FromValuesToRef(h,0,0,0,0,l,0,0,0,0,p,-1,0,0,c,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(t,e,i,n,s=!1){let o=s?-1:1,r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),d=Math.tan(t.leftDegrees*Math.PI/180),h=Math.tan(t.rightDegrees*Math.PI/180),l=2/(d+h),p=2/(r+a);const c=n._m;c[0]=l,c[1]=c[2]=c[3]=c[4]=0,c[5]=p,c[6]=c[7]=0,c[8]=(d-h)*l*.5,c[9]=-(r-a)*p*.5,c[10]=-i/(e-i),c[11]=1*o,c[12]=c[13]=c[15]=0,c[14]=-2*i*e/(i-e),n._markAsUpdated()}static GetAsMatrix2x2(t){return[t._m[0],t._m[1],t._m[4],t._m[5]]}static GetAsMatrix3x3(t){return[t._m[0],t._m[1],t._m[2],t._m[4],t._m[5],t._m[6],t._m[8],t._m[9],t._m[10]]}static Transpose(t){let e=new st;return st.TransposeToRef(t,e),e}static TransposeToRef(t,e){const i=e._m,n=t._m;i[0]=n[0],i[1]=n[4],i[2]=n[8],i[3]=n[12],i[4]=n[1],i[5]=n[5],i[6]=n[9],i[7]=n[13],i[8]=n[2],i[9]=n[6],i[10]=n[10],i[11]=n[14],i[12]=n[3],i[13]=n[7],i[14]=n[11],i[15]=n[15],e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)}static Reflection(t){let e=new st;return st.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();let i=t.normal.x,n=t.normal.y,s=t.normal.z,o=-2*i,r=-2*n,a=-2*s;st.FromValuesToRef(o*i+1,r*i,a*i,0,o*n,r*n+1,a*n,0,o*s,r*s,a*s+1,0,o*t.d,r*t.d,a*t.d,1,e)}static FromXYZAxesToRef(t,e,i,n){st.FromValuesToRef(t.x,t.y,t.z,0,e.x,e.y,e.z,0,i.x,i.y,i.z,0,0,0,0,1,n)}static FromQuaternionToRef(t,e){let i=t.x*t.x,n=t.y*t.y,s=t.z*t.z,o=t.x*t.y,r=t.z*t.w,a=t.z*t.x,d=t.y*t.w,h=t.y*t.z,l=t.x*t.w;e._m[0]=1-2*(n+s),e._m[1]=2*(o+r),e._m[2]=2*(a-d),e._m[3]=0,e._m[4]=2*(o-r),e._m[5]=1-2*(s+i),e._m[6]=2*(h+l),e._m[7]=0,e._m[8]=2*(a+d),e._m[9]=2*(h-l),e._m[10]=1-2*(n+i),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e._markAsUpdated()}_markAsUpdated(){this.updateFlag=st._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,e=t[0],i=t[1],n=t[2],s=t[3],o=t[4],r=t[5],a=t[6],d=t[7],h=t[8],l=t[9],p=t[10],c=t[11],u=t[12],y=t[13],f=t[14],m=t[15],g=p*m-f*c,v=l*m-y*c,w=l*f-y*p,x=h*m-u*c,R=h*f-p*u,b=h*y-u*l;return e*+(r*g-a*v+d*w)+i*-(o*g-a*x+d*R)+n*+(o*v-r*x+d*b)+s*-(o*w-r*R+a*b)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return st.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){let e=new st;return this.addToRef(t,e),e}addToRef(t,e){for(let i=0;i<16;i++)e._m[i]=this._m[i]+t._m[i];return e._markAsUpdated(),this}addToSelf(t){for(let e=0;e<16;e++)this._m[e]+=t._m[e];return this._markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return st.IdentityToRef(t),this;const e=this._m,i=e[0],n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],d=e[6],h=e[7],l=e[8],p=e[9],c=e[10],u=e[11],y=e[12],f=e[13],m=e[14],g=e[15],v=c*g-m*u,w=p*g-f*u,x=p*m-f*c,R=l*g-y*u,b=l*m-c*y,T=l*f-y*p,_=+(a*v-d*w+h*x),A=-(r*v-d*R+h*b),E=+(r*w-a*R+h*T),z=-(r*x-a*b+d*T),C=i*_+n*A+s*E+o*z;if(0===C)return t.copyFrom(this),this;const S=1/C,O=d*g-m*h,I=a*g-f*h,P=a*m-f*d,N=r*g-y*h,F=r*m-y*d,M=r*f-y*a,L=d*u-c*h,U=a*u-p*h,B=a*c-p*d,H=r*u-l*h,D=r*c-l*d,j=r*p-l*a,k=-(n*v-s*w+o*x),q=+(i*v-s*R+o*b),W=-(i*w-n*R+o*T),V=+(i*x-n*b+s*T),G=+(n*O-s*I+o*P),Y=-(i*O-s*N+o*F),X=+(i*I-n*N+o*M),$=-(i*P-n*F+s*M),Z=-(n*L-s*U+o*B),Q=+(i*L-s*H+o*D),J=-(i*U-n*H+o*j),K=+(i*B-n*D+s*j);return st.FromValuesToRef(_*S,k*S,G*S,Z*S,A*S,q*S,Y*S,Q*S,E*S,W*S,X*S,J*S,z*S,V*S,$*S,K*S,t),this}addAtIndex(t,e){return this._m[t]+=e,this._markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this._markAsUpdated(),this}setTranslationFromFloats(t,e,i){return this._m[12]=t,this._m[13]=e,this._m[14]=i,this._markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t.x,t.y,t.z)}getTranslation(){return new rt(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this}removeRotationAndScaling(){const t=this.m;return st.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){let e=new st;return this.multiplyToRef(t,e),e}copyFrom(t){t.copyToArray(this._m);const e=t;return this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}copyToArray(t,e=0){for(let i=0;i<16;i++)t[e+i]=this._m[i];return this}multiplyToRef(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e._markAsUpdated(),this)}multiplyToArray(t,e,i){const n=this._m,s=t.m;let o=n[0],r=n[1],a=n[2],d=n[3],h=n[4],l=n[5],p=n[6],c=n[7],u=n[8],y=n[9],f=n[10],m=n[11],g=n[12],v=n[13],w=n[14],x=n[15],R=s[0],b=s[1],T=s[2],_=s[3],A=s[4],E=s[5],z=s[6],C=s[7],S=s[8],O=s[9],I=s[10],P=s[11],N=s[12],F=s[13],M=s[14],L=s[15];return e[i]=o*R+r*A+a*S+d*N,e[i+1]=o*b+r*E+a*O+d*F,e[i+2]=o*T+r*z+a*I+d*M,e[i+3]=o*_+r*C+a*P+d*L,e[i+4]=h*R+l*A+p*S+c*N,e[i+5]=h*b+l*E+p*O+c*F,e[i+6]=h*T+l*z+p*I+c*M,e[i+7]=h*_+l*C+p*P+c*L,e[i+8]=u*R+y*A+f*S+m*N,e[i+9]=u*b+y*E+f*O+m*F,e[i+10]=u*T+y*z+f*I+m*M,e[i+11]=u*_+y*C+f*P+m*L,e[i+12]=g*R+v*A+w*S+x*N,e[i+13]=g*b+v*E+w*O+x*F,e[i+14]=g*T+v*z+w*I+x*M,e[i+15]=g*_+v*C+w*P+x*L,this}equals(t){const e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;const i=this.m,n=e.m;return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]}clone(){const t=new st;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=this._m[0]||0;for(let e=1;e<16;e++)t=397*t^(this._m[e]||0);return t}decompose(t,e,i){if(this._isIdentity)return i&&i.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;const n=this._m;i&&i.copyFromFloats(n[12],n[13],n[14]);const s=t||at.Vector3[0];if(s.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),s.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),s.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),this.determinant()<=0&&(s.y*=-1),0===s.x||0===s.y||0===s.z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){const t=1/s.x,i=1/s.y,o=1/s.z;st.FromValuesToRef(n[0]*t,n[1]*t,n[2]*t,0,n[4]*i,n[5]*i,n[6]*i,0,n[8]*o,n[9]*o,n[10]*o,0,0,0,0,1,at.Matrix[0]),ot.FromRotationMatrixToRef(at.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;let e=4*t;return new nt(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){return st.Transpose(this)}transposeToRef(t){return st.TransposeToRef(this,t),this}setRowFromFloats(t,e,i,n,s){if(t<0||t>3)return this;let o=4*t;return this._m[o+0]=e,this._m[o+1]=i,this._m[o+2]=n,this._m[o+3]=s,this._markAsUpdated(),this}scale(t){let e=new st;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let i=0;i<16;i++)e._m[i]=this._m[i]*t;return e._markAsUpdated(),this}scaleAndAddToRef(t,e){for(let i=0;i<16;i++)e._m[i]+=this._m[i]*t;return e._markAsUpdated(),this}toNormalMatrix(t){const e=at.Matrix[0];this.invertToRef(e),e.transposeToRef(t);let i=t._m;st.FromValuesToRef(i[0],i[1],i[2],0,i[4],i[5],i[6],0,i[8],i[9],i[10],0,0,0,0,1,t)}getRotationMatrix(){let t=new st;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const e=at.Vector3[0];if(!this.decompose(e))return st.IdentityToRef(t),this;const i=this._m,n=1/e.x,s=1/e.y,o=1/e.z;return st.FromValuesToRef(i[0]*n,i[1]*n,i[2]*n,0,i[4]*s,i[5]*s,i[6]*s,0,i[8]*o,i[9]*o,i[10]*o,0,0,0,0,1,t),this}toggleModelMatrixHandInPlace(){const t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){let t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(t,e=!1,i=!1,n=!0){this.updateFlag=st._updateFlagSeed++,this._isIdentity=t,this._isIdentity3x2=t||i,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&n}}st._updateFlagSeed=0,st._identityReadOnly=st.Identity();class ot{constructor(t=0,e=0,i=0,n=1){this.x=t,this.y=e,this.z=i,this.w=n}static FromRotationMatrix(t){let e=new ot;return ot.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){let i,n=t.m,s=n[0],o=n[4],r=n[8],a=n[1],d=n[5],h=n[9],l=n[2],p=n[6],c=n[10],u=s+d+c;u>0?(i=.5/Math.sqrt(u+1),e.w=.25/i,e.x=(p-h)*i,e.y=(r-l)*i,e.z=(a-o)*i):s>d&&s>c?(i=2*Math.sqrt(1+s-d-c),e.w=(p-h)/i,e.x=.25*i,e.y=(o+a)/i,e.z=(r+l)/i):d>c?(i=2*Math.sqrt(1+d-s-c),e.w=(r-l)/i,e.x=(o+a)/i,e.y=.25*i,e.z=(h+p)/i):(i=2*Math.sqrt(1+c-s-d),e.w=(a-o)/i,e.x=(r+l)/i,e.y=(h+p)/i,e.z=.25*i)}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}static AreClose(t,e){return ot.Dot(t,e)>=0}static Zero(){return new ot(0,0,0,0)}static Inverse(t){return new ot(-t.x,-t.y,-t.z,t.w)}static IsIdentity(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w}static RotationAxis(t,e){const i=e*tt;return ot.RotationAxisToRef(t,i,new ot)}static RotationAxisToRef(t,e,i){const n=e*tt;let s=Math.sin(n/2);return t.normalize(),i.w=Math.cos(n/2),i.x=t.x*s,i.y=t.y*s,i.z=t.z*s,i}static FromArray(t,e=0){return new ot(t[e],t[e+1],t[e+2],t[e+3])}static FromEulerAnglesRef(t,e,i,n){return ot.RotationYawPitchRollToRef(e*tt,t*tt,i*tt,n)}static RotationYawPitchRoll(t,e,i){let n=new ot;return ot.RotationYawPitchRollToRef(t,e,i,n),n}static RotationYawPitchRollToRef(t,e,i,n){let s=.5*i,o=.5*e,r=.5*t,a=Math.cos(o),d=Math.cos(r),h=Math.cos(s),l=Math.sin(o),p=Math.sin(r),c=Math.sin(s);n.x=l*d*h+a*p*c,n.y=a*p*h-l*d*c,n.z=a*d*c+l*p*h,n.w=a*d*h-l*p*c}static RotationAlphaBetaGamma(t,e,i){let n=new ot;return ot.RotationAlphaBetaGammaToRef(t,e,i,n),n}static RotationAlphaBetaGammaToRef(t,e,i,n){let s=.5*(i+t),o=.5*(i-t),r=.5*e;n.x=Math.cos(o)*Math.sin(r),n.y=Math.sin(o)*Math.sin(r),n.z=Math.sin(s)*Math.cos(r),n.w=Math.cos(s)*Math.cos(r)}static RotationQuaternionFromAxis(t,e,i){let n=new ot(0,0,0,0);return ot.RotationQuaternionFromAxisToRef(t,e,i,n),n}static RotationQuaternionFromAxisToRef(t,e,i,n){let s=at.Matrix[0];st.FromXYZAxesToRef(t.normalize(),e.normalize(),i.normalize(),s),ot.FromRotationMatrixToRef(s,n)}static Slerp(t,e,i){let n=ot.Identity;return ot.SlerpToRef(t,e,i,n),n}static SlerpToRef(t,e,i,n){let s,o,r=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,a=!1;if(r<0&&(a=!0,r=-r),r>.999999)o=1-i,s=a?-i:i;else{let t=Math.acos(r),e=1/Math.sin(t);o=Math.sin((1-i)*t)*e,s=a?-Math.sin(i*t)*e:Math.sin(i*t)*e}n.x=o*t.x+s*e.x,n.y=o*t.y+s*e.y,n.z=o*t.z+s*e.z,n.w=o*t.w+s*e.w}static Hermite(t,e,i,n,s){let o=s*s,r=s*o,a=2*r-3*o+1,d=-2*r+3*o,h=r-2*o+s,l=r-o,p=t.x*a+i.x*d+e.x*h+n.x*l,c=t.y*a+i.y*d+e.y*h+n.y*l,u=t.z*a+i.z*d+e.z*h+n.z*l,y=t.w*a+i.w*d+e.w*h+n.w*l;return new ot(p,c,u,y)}static get Identity(){return new ot(0,0,0,1)}static Angle(t,e){const i=ot.Dot(t,e);return 2*Math.acos(Math.min(Math.abs(i),1))*et}static Euler(t,e,i){return ot.RotationYawPitchRoll(e*tt,t*tt,i*tt)}static LookRotation(t,e=at.staticUp){const i=rt.Normalize(t),n=rt.Normalize(rt.Cross(e,i)),s=rt.Cross(i,n);let o=n.x,r=n.y,a=n.z,d=s.x,h=s.y,l=s.z,p=i.x,c=i.y,u=i.z;const y=o+h+u;let f=new ot;if(y>0){let t=Math.sqrt(y+1);return f.w=.5*t,t=.5/t,f.x=(l-c)*t,f.y=(p-a)*t,f.z=(r-d)*t,f}if(o>=h&&o>=u){let t=Math.sqrt(1+o-h-u),e=.5/t;return f.x=.5*t,f.y=(r+d)*e,f.z=(a+p)*e,f.w=(l-c)*e,f}if(h>u){let t=Math.sqrt(1+h-o-u),e=.5/t;return f.x=(d+r)*e,f.y=.5*t,f.z=(c+l)*e,f.w=(p-a)*e,f}let m=Math.sqrt(1+u-o-h),g=.5/m;return f.x=(p+a)*g,f.y=(c+l)*g,f.z=.5*m,f.w=(r-d)*g,f}static RotateTowards(t,e,i){const n=ot.Angle(t,e);if(0===n)return e;const s=Math.min(1,i/n);return ot.Slerp(t,e,s)}static FromToRotation(t,e){const i=new ot;let n=t.normalize(),s=e.normalize(),o=rt.Dot(n,s);if(o>-1+K){let t=Math.sqrt(2*(1+o)),e=1/t,r=rt.Cross(n,s).scaleInPlace(e);i.set(r.x,r.y,r.z,.5*t)}else{if(o>1-K)return new ot(0,0,0,1);{let t=rt.Cross(rt.Right(),n);t.lengthSquared()<K&&(t=rt.Cross(rt.Forward(),n)),i.set(t.x,t.y,t.z,0)}}return i.normalize()}get normalized(){return this.normalize()}setFromToRotation(t,e,i=at.staticUp){at.tmpMatrix=st.Zero(),st.LookAtLHToRef(t,e,i,at.tmpMatrix),at.tmpMatrix.invert(),ot.FromRotationMatrixToRef(at.tmpMatrix,this)}set eulerAngles(t){this.setEuler(t.x,t.y,t.z)}get eulerAngles(){const t=new rt,e=new st;this.toRotationMatrix(e);const i=st.GetAsMatrix3x3(e);return t.y=et*Math.asin(Math.max(-1,Math.min(1,i[6]))),Math.abs(i[6])<.99999?(t.x=et*Math.atan2(-i[7],i[8]),t.z=et*Math.atan2(-i[3],i[0])):(t.x=et*Math.atan2(i[5],i[4]),t.z=0),t}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){return[this.x,this.y,this.z,this.w]}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}clone(){return new ot(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}setEuler(t,e,i){return ot.RotationYawPitchRollToRef(e*tt,t*tt,i*tt,this),this}add(t){return new ot(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return new ot(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}scale(t){return new ot(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}multiply(t){let e=new ot(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){let i=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,n=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,s=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,o=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(i,n,s,o),this}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new ot(-this.x,-this.y,-this.z,this.w)}normalize(){let t=1/this.length;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}angleAxis(t,e){if(0===e.lengthSquared())return ot.Identity;const i=ot.Identity;let n=t*tt;n*=.5;let s=e.normalize();return s=e.scaleInPlace(Math.sin(n)),i.x=s.x,i.y=s.y,i.z=s.z,i.w=Math.cos(n),i.normalize()}toRotationMatrix(t){return st.FromQuaternionToRef(this,t),this}fromRotationMatrix(t){return ot.FromRotationMatrixToRef(t,this),this}}class rt{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}get isNonUniform(){let t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;let i=Math.abs(this.z);return t!==i||e!==i}static Add(t,e){return new rt(t.x,t.y,t.z).addInPlace(e)}static GetClipFactor(t,e,i,n){let s=rt.Dot(t,i)-n;return s/(s-(rt.Dot(e,i)-n))}static GetAngleBetweenVectors(t,e,i){const n=t.normalizeToRef(at.Vector3[1]),s=e.normalizeToRef(at.Vector3[2]),o=rt.Dot(n,s),r=at.Vector3[3];return rt.CrossToRef(n,s,r),rt.Dot(r,i)>0?Math.acos(o):-Math.acos(o)}static FromArray(t,e=0){return new rt(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return rt.FromArray(t,e)}static FromArrayToRef(t,e,i){i.x=t[e],i.y=t[e+1],i.z=t[e+2]}static FromFloatArrayToRef(t,e,i){return rt.FromArrayToRef(t,e,i)}static FromFloatsToRef(t,e,i,n){n.copyFromFloats(t,e,i)}static Zero(){return new rt(0,0,0)}static One(){return new rt(1,1,1)}static Up(){return new rt(0,1,0)}static Down(){return new rt(0,-1,0)}static Forward(){return new rt(0,0,1)}static Backward(){return new rt(0,0,-1)}static Right(){return new rt(1,0,0)}static Left(){return new rt(-1,0,0)}static TransformCoordinates(t,e){let i=rt.Zero();return rt.TransformCoordinatesToRef(t,e,i),i}static TransformCoordinatesToRef(t,e,i){return rt.TransformCoordinatesFromFloatsToRef(t.x,t.y,t.z,e,i)}static TransformCoordinatesFromFloatsToRef(t,e,i,n,s){const o=n.m;let r=t*o[0]+e*o[4]+i*o[8]+o[12],a=t*o[1]+e*o[5]+i*o[9]+o[13],d=t*o[2]+e*o[6]+i*o[10]+o[14],h=1/(t*o[3]+e*o[7]+i*o[11]+o[15]);s.x=r*h,s.y=a*h,s.z=d*h}static TransformNormal(t,e){let i=rt.Zero();return rt.TransformNormalToRef(t,e,i),i}static TransformNormalToRef(t,e,i){this.TransformNormalFromFloatsToRef(t.x,t.y,t.z,e,i)}static TransformNormalFromFloatsToRef(t,e,i,n,s){const o=n.m;s.x=t*o[0]+e*o[4]+i*o[8],s.y=t*o[1]+e*o[5]+i*o[9],s.z=t*o[2]+e*o[6]+i*o[10]}static CatmullRom(t,e,i,n,s){let o=s*s,r=s*o,a=.5*(2*e.x+(-t.x+i.x)*s+(2*t.x-5*e.x+4*i.x-n.x)*o+(-t.x+3*e.x-3*i.x+n.x)*r),d=.5*(2*e.y+(-t.y+i.y)*s+(2*t.y-5*e.y+4*i.y-n.y)*o+(-t.y+3*e.y-3*i.y+n.y)*r),h=.5*(2*e.z+(-t.z+i.z)*s+(2*t.z-5*e.z+4*i.z-n.z)*o+(-t.z+3*e.z-3*i.z+n.z)*r);return new rt(a,d,h)}static Clamp(t,e,i){const n=new rt;return rt.ClampToRef(t,e,i,n),n}static ClampToRef(t,e,i,n){let s=t.x;s=(s=s>i.x?i.x:s)<e.x?e.x:s;let o=t.y;o=(o=o>i.y?i.y:o)<e.y?e.y:o;let r=t.z;r=(r=r>i.z?i.z:r)<e.z?e.z:r,n.copyFromFloats(s,o,r)}static Hermite(t,e,i,n,s){let o=s*s,r=s*o,a=2*r-3*o+1,d=-2*r+3*o,h=r-2*o+s,l=r-o,p=t.x*a+i.x*d+e.x*h+n.x*l,c=t.y*a+i.y*d+e.y*h+n.y*l,u=t.z*a+i.z*d+e.z*h+n.z*l;return new rt(p,c,u)}static Lerp(t,e,i){let n=new rt(0,0,0);return rt.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n.z=t.z+(e.z-t.z)*i}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static Cross(t,e){let i=rt.Zero();return rt.CrossToRef(t,e,i),i}static CrossToRef(t,e,i){const n=t.y*e.z-t.z*e.y,s=t.z*e.x-t.x*e.z,o=t.x*e.y-t.y*e.x;i.copyFromFloats(n,s,o)}static Normalize(t){let e=rt.Zero();return rt.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){t.normalizeToRef(e)}static Minimize(t,e){let i=new rt(t.x,t.y,t.z);return i.minimizeInPlace(e),i}static Maximize(t,e){let i=new rt(t.x,t.y,t.z);return i.maximizeInPlace(e),i}static Distance(t,e){return Math.sqrt(rt.DistanceSquared(t,e))}static DistanceSquared(t,e){let i=t.x-e.x,n=t.y-e.y,s=t.z-e.z;return i*i+n*n+s*s}static Center(t,e){let i=rt.Add(t,e);return i.scaleInPlace(.5),i}static RotationFromAxis(t,e,i){let n=rt.Zero();return rt.RotationFromAxisToRef(t,e,i,n),n}static RotationFromAxisToRef(t,e,i,n){let s=at.Quaternion[0];ot.RotationQuaternionFromAxisToRef(t,e,i,s),n.copyFrom(s.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let t=this.x||0;return t=397*(t=397*t^(this.y||0))^(this.z||0)}asArray(){let t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this}toQuaternion(){return ot.Identity.setEuler(this.y,this.x,this.z)}addInPlace(t){return this.addInPlaceFromFloats(t.x,t.y,t.z)}addInPlaceFromFloats(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this}add(t){return new rt(this.x+t.x,this.y+t.y,this.z+t.z)}addToRef(t,e){return e.copyFromFloats(this.x+t.x,this.y+t.y,this.z+t.z)}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtract(t){return new rt(this.x-t.x,this.y-t.y,this.z-t.z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t.x,t.y,t.z,e)}subtractFromFloats(t,e,i){return new rt(this.x-t,this.y-e,this.z-i)}subtractFromFloatsToRef(t,e,i,n){return n.copyFromFloats(this.x-t,this.y-e,this.z-i)}applyMatrix4(t){this.applyMatrix4ToRef(t,this)}applyMatrix4ToRef(t,e){const{x:i,y:n,z:s}=this,{m:o}=t,r=1/(o[3]*i+o[7]*n+o[11]*s+o[15]);return e.x=(o[0]*i+o[4]*n+o[8]*s+o[12])*r,e.y=(o[1]*i+o[5]*n+o[9]*s+o[13])*r,e.z=(o[2]*i+o[6]*n+o[10]*s+o[14])*r,e}rotate(t){return this.rotateToRef(t,this)}rotateToRef(t,e){const{x:i,y:n,z:s}=this,{x:o,y:r,z:a,w:d}=t,h=d*i+r*s-a*n,l=d*n+a*i-o*s,p=d*s+o*n-r*i,c=-o*i-r*n-a*s;return e.x=h*d+c*-o+l*-a-p*-r,e.y=l*d+c*-r+p*-o-h*-a,e.z=p*d+c*-a+h*-r-l*-o,e}negate(){return new rt(-this.x,-this.y,-this.z)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this}scale(t){return new rt(this.x*t,this.y*t,this.z*t)}scaleToRef(t,e){return e.copyFromFloats(this.x*t,this.y*t,this.z*t)}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this.x*t,this.y*t,this.z*t)}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z}equalsWithEpsilon(t,e=K){return t&&it.WithinEpsilon(this.x,t.x,e)&&it.WithinEpsilon(this.y,t.y,e)&&it.WithinEpsilon(this.z,t.z,e)}equalsToFloats(t,e,i){return this.x===t&&this.y===e&&this.z===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiply(t){return this.multiplyByFloats(t.x,t.y,t.z)}multiplyToRef(t,e){return e.copyFromFloats(this.x*t.x,this.y*t.y,this.z*t.z)}multiplyByFloats(t,e,i){return new rt(this.x*t,this.y*e,this.z*i)}divide(t){return new rt(this.x/t.x,this.y/t.y,this.z/t.z)}divideToRef(t,e){return e.copyFromFloats(this.x/t.x,this.y/t.y,this.z/t.z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.x,t.y,t.z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.x,t.y,t.z)}minimizeInPlaceFromFloats(t,e,i){return t<this.x&&(this.x=t),e<this.y&&(this.y=e),i<this.z&&(this.z=i),this}maximizeInPlaceFromFloats(t,e,i){return t>this.x&&(this.x=t),e>this.y&&(this.y=e),i>this.z&&(this.z=i),this}floor(){return new rt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new rt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new rt(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){let e=this.length();return 0===e||1===e?t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/e,t)}clone(){return new rt(this.x,this.y,this.z)}copyFrom(t){return this.copyFromFloats(t.x,t.y,t.z)}copyFromFloats(t,e,i){return this.x=t,this.y=e,this.z=i,this}set(t,e,i){return this.copyFromFloats(t,e,i)}setAll(t){return this.x=this.y=this.z=t,this}}const at={Vector3:d(6,rt.Zero),Matrix:d(2,st.Identity),Quaternion:d(3,ot.Zero),staticUp:rt.Up(),tmpMatrix:st.Zero()};class dt{}dt.X=new rt(1,0,0),dt.Y=new rt(0,1,0),dt.Z=new rt(0,0,1);class ht{constructor(t=0,e=0,i=0,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static FromHexString(t){if("#"!==t.substring(0,1)||9!==t.length)return new ht(0,0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16),s=parseInt(t.substring(7,9),16);return ht.FromInts(e,i,n,s)}static Lerp(t,e,i){let n=new ht(0,0,0,0);return ht.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.r=t.r+(e.r-t.r)*i,n.g=t.g+(e.g-t.g)*i,n.b=t.b+(e.b-t.b)*i,n.a=t.a+(e.a-t.a)*i}static Red(){return new ht(1,0,0,1)}static Green(){return new ht(0,1,0,1)}static Blue(){return new ht(0,0,1,1)}static Black(){return new ht(0,0,0,1)}static White(){return new ht(1,1,1,1)}static Purple(){return new ht(.5,0,.5,1)}static Magenta(){return new ht(1,0,1,1)}static Yellow(){return new ht(1,1,0,1)}static Gray(){return new ht(.5,.5,.5,1)}static Teal(){return new ht(0,1,1,1)}static Clear(){return new ht(0,0,0,0)}static FromColor3(t,e=1){return new ht(t.r,t.g,t.b,e)}static FromArray(t,e=0){return new ht(t[e],t[e+1],t[e+2],t[e+3])}static FromInts(t,e,i,n){return new ht(t/255,e/255,i/255,n/255)}static CheckColors4(t,e){if(t.length===3*e){let e=[];for(let i=0;i<t.length;i+=3){let n=i/3*4;e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=1}return e}return t}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}asArray(){let t=new Array;return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this}add(t){return new ht(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new ht(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this}scale(t){return new ht(this.r*t,this.g*t,this.b*t,this.a*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this}clampToRef(t=0,e=1,i){return i.r=it.Clamp(this.r,t,e),i.g=it.Clamp(this.g,t,e),i.b=it.Clamp(this.b,t,e),i.a=it.Clamp(this.a,t,e),this}multiply(t){return new ht(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=this.r||0;return t=397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)}clone(){return new ht(this.r,this.g,this.b,this.a)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this}set(t,e,i,n){return this.copyFromFloats(t,e,i,n)}toHexString(){let t=255*this.r|0,e=255*this.g|0,i=255*this.b|0,n=255*this.a|0;return"#"+it.ToHex(t)+it.ToHex(e)+it.ToHex(i)+it.ToHex(n)}toLinearSpace(){let t=new ht;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,J),t.g=Math.pow(this.g,J),t.b=Math.pow(this.b,J),t.a=this.a,this}toGammaSpace(){let t=new ht;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,Q),t.g=Math.pow(this.g,Q),t.b=Math.pow(this.b,Q),t.a=this.a,this}}class lt{constructor(t=0,e=0,i=0){this.r=t,this.g=e,this.b=i}static FromHexString(t){if("#"!==t.substring(0,1)||7!==t.length)return new lt(0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return lt.FromInts(e,i,n)}static FromArray(t,e=0){return new lt(t[e],t[e+1],t[e+2])}static FromInts(t,e,i){return new lt(t/255,e/255,i/255)}static Lerp(t,e,i){let n=new lt(0,0,0);return lt.LerpToRef(t,e,i,n),n}static LerpToRef(t,e,i,n){n.r=t.r+(e.r-t.r)*i,n.g=t.g+(e.g-t.g)*i,n.b=t.b+(e.b-t.b)*i}static Red(){return new lt(1,0,0)}static Green(){return new lt(0,1,0)}static Blue(){return new lt(0,0,1)}static Black(){return new lt(0,0,0)}static White(){return new lt(1,1,1)}static Purple(){return new lt(.5,0,.5)}static Magenta(){return new lt(1,0,1)}static Yellow(){return new lt(1,1,0)}static Gray(){return new lt(.5,.5,.5)}static Teal(){return new lt(0,1,1)}static Random(){return new lt(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=this.r||0;return t=397*(t=397*t^(this.g||0))^(this.b||0)}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this}toColor4(t=1){return new ht(this.r,this.g,this.b,t)}asArray(){let t=new Array;return this.toArray(t,0),t}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(t){return new lt(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,e,i){return this.r===t&&this.g===e&&this.b===i}scale(t){return new lt(this.r*t,this.g*t,this.b*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this}clampToRef(t=0,e=1,i){return i.r=it.Clamp(this.r,t,e),i.g=it.Clamp(this.g,t,e),i.b=it.Clamp(this.b,t,e),this}add(t){return new lt(this.r+t.r,this.g+t.g,this.b+t.b)}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this}subtract(t){return new lt(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this}clone(){return new lt(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,e,i){return this.r=t,this.g=e,this.b=i,this}set(t,e,i){return this.copyFromFloats(t,e,i)}toHexString(){let t=255*this.r|0,e=255*this.g|0,i=255*this.b|0;return"#"+it.ToHex(t)+it.ToHex(e)+it.ToHex(i)}toLinearSpace(){let t=new lt;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,J),t.g=Math.pow(this.g,J),t.b=Math.pow(this.b,J),this}toGammaSpace(){let t=new lt;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,Q),t.g=Math.pow(this.g,Q),t.b=Math.pow(this.b,Q),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}var pt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ct=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const ut={looping:!0,speed:1,weight:1};class yt extends F{constructor(t,e=ut){super(),this.isAnimationClip=!0,this.looping=ut.looping,this.weight=ut.weight,this.playing=!1,this.shouldReset=!1,this.speed=ut.speed,this.name=r("AnimClip"),this.clip=t,this.setParams(Object.assign({},e))}setParams(t){return this.looping=void 0!==t.looping?t.looping:this.looping,this.speed=t.speed||this.speed,this}toJSON(){const t=JSON.parse(JSON.stringify(super.toJSON()));return this.shouldReset&&(this.shouldReset=!1),t}play(){this.playing=!0}pause(){this.playing=!1}reset(){this.shouldReset=!0}stop(){this.reset(),this.pause()}}pt([F.readonly,ct("design:type",String)],yt.prototype,"clip",void 0),pt([F.field,ct("design:type",Boolean)],yt.prototype,"looping",void 0),pt([F.field,ct("design:type",Number)],yt.prototype,"weight",void 0),pt([F.field,ct("design:type",Boolean)],yt.prototype,"playing",void 0),pt([F.field,ct("design:type",Boolean)],yt.prototype,"shouldReset",void 0),pt([F.field,ct("design:type",Number)],yt.prototype,"speed",void 0),pt([F.readonly,ct("design:type",String)],yt.prototype,"name",void 0);var ft,mt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},gt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t[t.TRANSFORM=1]="TRANSFORM",t[t.UUID_CALLBACK=8]="UUID_CALLBACK",t[t.BOX_SHAPE=16]="BOX_SHAPE",t[t.SPHERE_SHAPE=17]="SPHERE_SHAPE",t[t.PLANE_SHAPE=18]="PLANE_SHAPE",t[t.CONE_SHAPE=19]="CONE_SHAPE",t[t.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",t[t.TEXT_SHAPE=21]="TEXT_SHAPE",t[t.NFT_SHAPE=22]="NFT_SHAPE",t[t.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",t[t.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",t[t.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",t[t.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",t[t.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",t[t.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",t[t.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",t[t.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",t[t.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",t[t.BILLBOARD=32]="BILLBOARD",t[t.ANIMATION=33]="ANIMATION",t[t.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",t[t.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",t[t.GLTF_SHAPE=54]="GLTF_SHAPE",t[t.OBJ_SHAPE=55]="OBJ_SHAPE",t[t.AVATAR_SHAPE=56]="AVATAR_SHAPE",t[t.BASIC_MATERIAL=64]="BASIC_MATERIAL",t[t.PBR_MATERIAL=65]="PBR_MATERIAL",t[t.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",t[t.SOUND=67]="SOUND",t[t.TEXTURE=68]="TEXTURE",t[t.AUDIO_CLIP=200]="AUDIO_CLIP",t[t.AUDIO_SOURCE=201]="AUDIO_SOURCE",t[t.GIZMOS=203]="GIZMOS"}(ft||(ft={}));let vt=class extends F{constructor(t={}){super(),this.position=t.position||rt.Zero(),this.rotation=t.rotation||ot.Identity,this.scale=t.scale||new rt(1,1,1)}get eulerAngles(){return this.rotation.eulerAngles}lookAt(t,e=at.staticUp){const i=new st;return st.LookAtLHToRef(this.position,t,e,i),i.invert(),ot.FromRotationMatrixToRef(i,this.rotation),this}rotate(t,e){return this.rotation.multiplyInPlace(this.rotation.angleAxis(e,t)),this}translate(t){return this.position.addInPlace(t),this}};mt([F.field,gt("design:type",rt)],vt.prototype,"position",void 0),mt([F.field,gt("design:type",ot)],vt.prototype,"rotation",void 0),mt([F.field,gt("design:type",rt)],vt.prototype,"scale",void 0),vt=mt([S("engine.transform",ft.TRANSFORM),gt("design:paramtypes",[Object])],vt);let wt=class extends F{constructor(t=!0,e=!0,i=!0){super(),this.x=!0,this.y=!0,this.z=!0,this.x=t,this.y=e,this.z=i}};mt([F.field,gt("design:type",Boolean)],wt.prototype,"x",void 0),mt([F.field,gt("design:type",Boolean)],wt.prototype,"y",void 0),mt([F.field,gt("design:type",Boolean)],wt.prototype,"z",void 0),wt=mt([S("engine.billboard",ft.BILLBOARD),gt("design:paramtypes",[Boolean,Boolean,Boolean])],wt);class xt extends F{constructor(){super(...arguments),this.withCollisions=!0,this.visible=!0}}mt([F.field,gt("design:type",Boolean)],xt.prototype,"withCollisions",void 0),mt([F.field,gt("design:type",Boolean)],xt.prototype,"visible",void 0);let Rt=class extends xt{};Rt=mt([O("engine.shape",ft.BOX_SHAPE)],Rt);let bt=class extends xt{};bt=mt([O("engine.shape",ft.SPHERE_SHAPE)],bt);let Tt=class extends xt{};mt([F.field,gt("design:type",Number)],Tt.prototype,"segments",void 0),mt([F.field,gt("design:type",Number)],Tt.prototype,"arc",void 0),Tt=mt([O("engine.shape",ft.CIRCLE_SHAPE)],Tt);let _t=class extends xt{constructor(){super(...arguments),this.width=1,this.height=1}};mt([F.field,gt("design:type",Number)],_t.prototype,"width",void 0),mt([F.field,gt("design:type",Number)],_t.prototype,"height",void 0),mt([F.field,gt("design:type",Array)],_t.prototype,"uvs",void 0),_t=mt([O("engine.shape",ft.PLANE_SHAPE)],_t);let At=class extends xt{constructor(){super(...arguments),this.radiusTop=0,this.radiusBottom=1,this.segmentsHeight=1,this.segmentsRadial=36,this.openEnded=!1,this.radius=null,this.arc=360}};mt([F.field,gt("design:type",Number)],At.prototype,"radiusTop",void 0),mt([F.field,gt("design:type",Number)],At.prototype,"radiusBottom",void 0),mt([F.field,gt("design:type",Number)],At.prototype,"segmentsHeight",void 0),mt([F.field,gt("design:type",Number)],At.prototype,"segmentsRadial",void 0),mt([F.field,gt("design:type",Boolean)],At.prototype,"openEnded",void 0),mt([F.field,gt("design:type",Object)],At.prototype,"radius",void 0),mt([F.field,gt("design:type",Number)],At.prototype,"arc",void 0),At=mt([O("engine.shape",ft.CONE_SHAPE)],At);let Et=class extends xt{constructor(){super(...arguments),this.radiusTop=0,this.radiusBottom=1,this.segmentsHeight=1,this.segmentsRadial=36,this.openEnded=!1,this.radius=null,this.arc=360}};mt([F.field,gt("design:type",Number)],Et.prototype,"radiusTop",void 0),mt([F.field,gt("design:type",Number)],Et.prototype,"radiusBottom",void 0),mt([F.field,gt("design:type",Number)],Et.prototype,"segmentsHeight",void 0),mt([F.field,gt("design:type",Number)],Et.prototype,"segmentsRadial",void 0),mt([F.field,gt("design:type",Boolean)],Et.prototype,"openEnded",void 0),mt([F.field,gt("design:type",Object)],Et.prototype,"radius",void 0),mt([F.field,gt("design:type",Number)],Et.prototype,"arc",void 0),Et=mt([O("engine.shape",ft.CYLINDER_SHAPE)],Et);let zt=class extends xt{constructor(t){super(),this.src=t}};mt([xt.readonly,gt("design:type",String)],zt.prototype,"src",void 0),zt=mt([O("engine.shape",ft.GLTF_SHAPE),gt("design:paramtypes",[String])],zt);let Ct=class extends xt{constructor(t,e=new lt(.6404918,.611472,.8584906)){super(),this.src=t,this.color=e}};mt([xt.readonly,gt("design:type",String)],Ct.prototype,"src",void 0),mt([F.field,gt("design:type",lt)],Ct.prototype,"color",void 0),Ct=mt([O("engine.shape",ft.NFT_SHAPE),gt("design:paramtypes",[String,lt])],Ct);let St=class extends F{constructor(t,e){if(super(),this.src=t,e)for(let t in e){this[t]=e[t]}}};mt([F.readonly,gt("design:type",String)],St.prototype,"src",void 0),mt([F.readonly,gt("design:type",Number)],St.prototype,"samplingMode",void 0),mt([F.readonly,gt("design:type",Number)],St.prototype,"wrap",void 0),mt([F.readonly,gt("design:type",Boolean)],St.prototype,"hasAlpha",void 0),St=mt([O("engine.texture",ft.TEXTURE),gt("design:paramtypes",[String,Object])],St);let Ot=class extends xt{constructor(){super(...arguments),this.states=[]}addClip(t){return this.states.push(t),t.onChange(()=>{this.dirty=!0}),this}getClip(t){for(let e=0;e<this.states.length;e++){const i=this.states[e];if(i.clip===t)return i}const e=new yt(t);return this.addClip(e),e}};mt([F.readonly,gt("design:type",Array)],Ot.prototype,"states",void 0),Ot=mt([S("engine.animator",ft.ANIMATION)],Ot);let It=class extends xt{constructor(t){super(),this.src=t}};mt([F.readonly,gt("design:type",String)],It.prototype,"src",void 0),It=mt([O("engine.shape",ft.OBJ_SHAPE),gt("design:paramtypes",[String])],It);let Pt=class extends xt{constructor(t){super(),this.outlineWidth=0,this.outlineColor=new lt(1,1,1),this.color=new lt(1,1,1),this.fontSize=10,this.fontWeight="normal",this.opacity=1,this.value="",this.lineSpacing="0px",this.lineCount=0,this.resizeToFit=!1,this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=new lt(1,1,1),this.zIndex=0,this.hTextAlign="center",this.vTextAlign="center",this.width=1,this.height=1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.isPickable=!1,this.billboard=!1,t&&(this.value=t)}};var Nt;mt([F.field,gt("design:type",Number)],Pt.prototype,"outlineWidth",void 0),mt([F.field,gt("design:type",lt)],Pt.prototype,"outlineColor",void 0),mt([F.field,gt("design:type",lt)],Pt.prototype,"color",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"fontSize",void 0),mt([F.field,gt("design:type",String)],Pt.prototype,"fontWeight",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"opacity",void 0),mt([F.field,gt("design:type",String)],Pt.prototype,"value",void 0),mt([F.field,gt("design:type",String)],Pt.prototype,"lineSpacing",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"lineCount",void 0),mt([F.field,gt("design:type",Boolean)],Pt.prototype,"resizeToFit",void 0),mt([F.field,gt("design:type",Boolean)],Pt.prototype,"textWrapping",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"shadowBlur",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"shadowOffsetX",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"shadowOffsetY",void 0),mt([F.field,gt("design:type",lt)],Pt.prototype,"shadowColor",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"zIndex",void 0),mt([F.field,gt("design:type",String)],Pt.prototype,"hTextAlign",void 0),mt([F.field,gt("design:type",String)],Pt.prototype,"vTextAlign",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"width",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"height",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"paddingTop",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"paddingRight",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"paddingBottom",void 0),mt([F.field,gt("design:type",Number)],Pt.prototype,"paddingLeft",void 0),mt([F.field,gt("design:type",Boolean)],Pt.prototype,"isPickable",void 0),mt([F.field,gt("design:type",Boolean)],Pt.prototype,"billboard",void 0),Pt=mt([S("engine.text",ft.TEXT_SHAPE),gt("design:paramtypes",[String])],Pt),function(t){t[t.OPAQUE=0]="OPAQUE",t[t.ALPHA_TEST=1]="ALPHA_TEST",t[t.ALPHA_BLEND=2]="ALPHA_BLEND",t[t.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",t[t.AUTO=4]="AUTO"}(Nt||(Nt={}));let Ft=class extends F{constructor(){super(...arguments),this.alphaTest=.5,this.transparencyMode=Nt.AUTO}};mt([F.field,gt("design:type",Number)],Ft.prototype,"alphaTest",void 0),mt([F.field,gt("design:type",Object)],Ft.prototype,"albedoColor",void 0),mt([F.field,gt("design:type",lt)],Ft.prototype,"emissiveColor",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"metallic",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"roughness",void 0),mt([F.field,gt("design:type",lt)],Ft.prototype,"ambientColor",void 0),mt([F.field,gt("design:type",lt)],Ft.prototype,"reflectionColor",void 0),mt([F.field,gt("design:type",lt)],Ft.prototype,"reflectivityColor",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"directIntensity",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"microSurface",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"emissiveIntensity",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"environmentIntensity",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"specularIntensity",void 0),mt([F.component,gt("design:type",St)],Ft.prototype,"albedoTexture",void 0),mt([F.component,gt("design:type",St)],Ft.prototype,"alphaTexture",void 0),mt([F.component,gt("design:type",St)],Ft.prototype,"emissiveTexture",void 0),mt([F.component,gt("design:type",St)],Ft.prototype,"bumpTexture",void 0),mt([F.component,gt("design:type",St)],Ft.prototype,"refractionTexture",void 0),mt([F.field,gt("design:type",Boolean)],Ft.prototype,"disableLighting",void 0),mt([F.field,gt("design:type",Number)],Ft.prototype,"transparencyMode",void 0),Ft=mt([O("engine.material",ft.PBR_MATERIAL)],Ft);let Mt=class extends F{constructor(){super(...arguments),this.alphaTest=.5}};mt([F.component,gt("design:type",St)],Mt.prototype,"texture",void 0),mt([F.field,gt("design:type",Number)],Mt.prototype,"alphaTest",void 0),Mt=mt([O("engine.material",ft.BASIC_MATERIAL)],Mt);class Lt extends F{constructor(t){if(super(),this.uuid=r("UUID"),!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");this.callback=t}static uuidEvent(t,e){if(delete t[e]){const i=e+"_"+Math.random();t[i]=void 0,Object.defineProperty(t,i,Object.assign(Object.assign({},Object.getOwnPropertyDescriptor(t,i)),{enumerable:!1})),Object.defineProperty(t,e.toString(),{get:function(){return this[i]},set:function(t){const n=this[i];if(t){if(!(t instanceof Lt))throw new Error("value is not an OnUUIDEvent");this.data[e]=t.uuid}else this.data[e]=null;if(this[i]=t,t!==n){this.dirty=!0;for(let i=0;i<this.subscriptions.length;i++)this.subscriptions[i](e,t,n)}},enumerable:!0})}}toJSON(){return{uuid:this.uuid,type:this.type}}}mt([F.field,gt("design:type",Function)],Lt.prototype,"callback",void 0);let Ut=class extends Lt{constructor(){super(...arguments),this.type="onPointerLock"}};mt([F.readonly,gt("design:type",String)],Ut.prototype,"type",void 0),Ut=mt([S("engine.onPointerLock",ft.UUID_CALLBACK)],Ut);let Bt=class extends Lt{constructor(){super(...arguments),this.type="onAnimationEnd"}};var Ht;mt([F.readonly,gt("design:type",String)],Bt.prototype,"type",void 0),Bt=mt([S("engine.onAnimationEnd",ft.UUID_CALLBACK)],Bt),function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP"}(Ht||(Ht={}));var Dt,jt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t.POINTER="POINTER",t.PRIMARY="PRIMARY",t.SECONDARY="SECONDARY"}(Dt||(Dt={}));class kt{constructor(t){if(this.callback=t,!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");Gt.ensureInstance()}}let qt=class extends kt{};qt=jt([S("pointerDown")],qt);let Wt=class extends kt{};Wt=jt([S("pointerUp")],Wt);class Vt{constructor(t,e){this.fn=t,this.useRaycast=e}}class Gt{constructor(){this.subscriptions={[Dt.POINTER]:{BUTTON_DOWN:[],BUTTON_UP:[]},[Dt.PRIMARY]:{BUTTON_DOWN:[],BUTTON_UP:[]},[Dt.SECONDARY]:{BUTTON_DOWN:[],BUTTON_UP:[]}},this.internalState={[Dt.POINTER]:{BUTTON_DOWN:!1},[Dt.PRIMARY]:{BUTTON_DOWN:!1},[Dt.SECONDARY]:{BUTTON_DOWN:!1}}}static get instance(){return Gt.ensureInstance(),Gt._instance}static ensureInstance(){Gt._instance||(Gt._instance=new Gt)}isButtonPressed(t){return this.internalState[t]}subscribe(t,e,i,n){return this.subscriptions[e][t].push(new Vt(n,i)),()=>this.unsubscribe(t,e,n)}unsubscribe(t,e,i){const n=this.getSubscriptionId(t,e,i);return n>-1&&this.subscriptions[e][t].splice(n,1)}handlePointerEvent(t){const e=this.getPointerById(t.buttonId);let i=Object.assign(Object.assign({},t),{button:e,direction:(new rt).copyFrom(t.direction),origin:(new rt).copyFrom(t.origin),hit:void 0});const n=t.hit?Object.assign(Object.assign({},t.hit),{hitPoint:(new rt).copyFrom(t.hit.hitPoint),normal:(new rt).copyFrom(t.hit.normal),worldNormal:(new rt).copyFrom(t.hit.worldNormal)}):void 0;if(t.type===Ht.DOWN){this.internalState[e].BUTTON_DOWN=!0;for(let t=0;t<this.subscriptions[e].BUTTON_DOWN.length;t++){let s=this.subscriptions[e].BUTTON_DOWN[t];s.useRaycast?i.hit=n:i.hit=void 0,s.fn(i)}if(n&&n.entityId&&O.engine){const t=O.engine.entities[n.entityId],e=t&&t.getComponentOrNull(qt);e&&(i.hit=n,e.callback(i))}}else{this.internalState[e].BUTTON_DOWN=!1;for(let t=0;t<this.subscriptions[e].BUTTON_UP.length;t++){let s=this.subscriptions[e].BUTTON_UP[t];s.useRaycast?i.hit=n:i.hit=void 0,s.fn(i)}if(n&&n.entityId&&O.engine){const t=O.engine.entities[n.entityId],e=t&&t.getComponentOrNull(Wt);e&&(i.hit=n,e.callback(i))}}}getSubscriptionId(t,e,i){for(let n=0;n<this.subscriptions[e][t].length;n++)if(this.subscriptions[e][t][n].fn===i)return n;return-1}getPointerById(t){return 0===t?Dt.POINTER:1===t?Dt.PRIMARY:Dt.SECONDARY}}class Yt{constructor(){this.position=new rt,this.rotation=new ot,this.feetPosition=new rt,this.worldPosition=new rt,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.onEvent(t=>{switch(t.type){case"positionChanged":this.positionChanged(t.data);break;case"rotationChanged":this.rotationChanged(t.data)}})),Object.defineProperty(this.position,"x",{get:()=>this.lastEventPosition.x}),Object.defineProperty(this.position,"y",{get:()=>this.lastEventPosition.y}),Object.defineProperty(this.position,"z",{get:()=>this.lastEventPosition.z}),Object.defineProperty(this.worldPosition,"x",{get:()=>this.lastEventWorldPosition.x}),Object.defineProperty(this.worldPosition,"y",{get:()=>this.lastEventWorldPosition.y}),Object.defineProperty(this.worldPosition,"z",{get:()=>this.lastEventWorldPosition.z}),Object.defineProperty(this.feetPosition,"x",{get:()=>this.lastEventPosition.x}),Object.defineProperty(this.feetPosition,"y",{get:()=>this.lastEventPosition.y-this.playerHeight}),Object.defineProperty(this.feetPosition,"z",{get:()=>this.lastEventPosition.z}),Object.defineProperty(this.rotation,"x",{get:()=>this.lastEventRotation.x}),Object.defineProperty(this.rotation,"y",{get:()=>this.lastEventRotation.y}),Object.defineProperty(this.rotation,"z",{get:()=>this.lastEventRotation.z}),Object.defineProperty(this.rotation,"w",{get:()=>this.lastEventRotation.w})}static get instance(){return Yt._instance||(Yt._instance=new Yt),Yt._instance}get playerHeight(){return this._playerHeight}positionChanged(t){this.lastEventPosition=t.position,this.lastEventWorldPosition=t.cameraPosition,this._playerHeight=t.playerHeight}rotationChanged(t){this.lastEventRotation=t.quaternion}}class Xt{constructor(){this.queries={}}static get instance(){return Xt.ensureInstance(),Xt._instance}static ensureInstance(){Xt._instance||(Xt._instance=new Xt)}getRayFromCamera(t){let e=Yt.instance.rotation,i=st.Identity();e.toRotationMatrix(i);let n=rt.TransformCoordinates(rt.Forward(),i);return{origin:Yt.instance.position,direction:n,distance:t}}getRayFromPositions(t,e){const i=e.subtract(t),n=i.length();return{origin:t,direction:i.normalize(),distance:n}}hitFirst(t,e){const i=a();this.queries[i]=e,dcl&&dcl.query("raycast",{queryId:i,queryType:"HitFirst",ray:t})}hitAll(t,e){const i=a();this.queries[i]=e,dcl&&dcl.query("raycast",{queryId:i,queryType:"HitAll",ray:t})}hitFirstAvatar(t,e){s("not implemented yet")}hitAllAvatars(t,e){s("not implemented yet")}handleRaycastHitFirstResponse(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]}handleRaycastHitAllResponse(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]}}const $t=new class{activate(t){t.eventManager.addListener(V,this,t=>{"HitFirst"===t.payload.queryType?Xt.instance.handleRaycastHitFirstResponse(t):"HitAll"===t.payload.queryType&&Xt.instance.handleRaycastHitAllResponse(t)}),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")}deactivate(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")}};const Zt=new class{activate(t){t.eventManager.addListener(G,this,t=>{Gt.instance.handlePointerEvent(t.payload)}),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))}deactivate(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))}};const Qt=new class{constructor(){this.handlerMap={}}activate(t){t.eventManager.addListener(W,this,this.handleEvent),t.eventManager.addListener(g,this,this.componentAdded),t.eventManager.addListener(m,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")}deactivate(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")}onAddEntity(t){for(let e in t.components){const i=t.components[e];i instanceof Lt&&(this.handlerMap[i.uuid]=i)}}onRemoveEntity(t){for(let e in t.components){const i=t.components[e];i instanceof Lt&&delete this.handlerMap[i.uuid]}}componentAdded(t){if(t.entity.isAddedToEngine()){const e=t.entity.components[t.componentName];e instanceof Lt&&(this.handlerMap[e.uuid]=e)}}componentRemoved(t){t.entity.isAddedToEngine()&&t.component instanceof Lt&&delete this.handlerMap[t.component.uuid]}handleEvent(t){if(t.uuid in this.handlerMap){const e=this.handlerMap[t.uuid];e&&e.callback&&"call"in e.callback&&e.callback(t.payload)}}};var Jt=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Kt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let te=class extends F{constructor(t){super(),this.loop=!1,this.volume=1,this.url=t}};Jt([F.readonly,Kt("design:type",String)],te.prototype,"url",void 0),Jt([F.field,Kt("design:type",Boolean)],te.prototype,"loop",void 0),Jt([F.field,Kt("design:type",String)],te.prototype,"loadingCompleteEventId",void 0),Jt([F.field,Kt("design:type",Number)],te.prototype,"volume",void 0),te=Jt([O("engine.AudioClip",ft.AUDIO_CLIP),Kt("design:paramtypes",[String])],te);let ee=class extends F{constructor(t){if(super(),this.audioClip=t,this.loop=!1,this.volume=1,this.playing=!1,this.pitch=1,!(t instanceof te))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");this.audioClipId=N(t)}playOnce(){return this.playing=!0,this.dirty=!0,this.data.nonce=Math.random(),this}};Jt([F.readonly,Kt("design:type",String)],ee.prototype,"audioClipId",void 0),Jt([F.field,Kt("design:type",Boolean)],ee.prototype,"loop",void 0),Jt([F.field,Kt("design:type",Number)],ee.prototype,"volume",void 0),Jt([F.field,Kt("design:type",Boolean)],ee.prototype,"playing",void 0),Jt([F.field,Kt("design:type",Number)],ee.prototype,"pitch",void 0),ee=Jt([S("engine.AudioSource",ft.AUDIO_SOURCE),Kt("design:paramtypes",[te])],ee);var ie,ne=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},se=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.MOVE="MOVE",t.ROTATE="ROTATE",t.SCALE="SCALE",t.NONE="NONE"}(ie||(ie={}));let oe=class extends Lt{constructor(){super(...arguments),this.type="gizmoEvent"}};ne([F.readonly,se("design:type",String)],oe.prototype,"type",void 0),oe=ne([S("engine.gizmoEvent",ft.UUID_CALLBACK)],oe);let re=class extends F{constructor(){super(...arguments),this.position=!0,this.rotation=!0,this.scale=!0,this.cycle=!0,this.localReference=!1}};ne([F.field,se("design:type",Boolean)],re.prototype,"position",void 0),ne([F.field,se("design:type",Boolean)],re.prototype,"rotation",void 0),ne([F.field,se("design:type",Boolean)],re.prototype,"scale",void 0),ne([F.field,se("design:type",Boolean)],re.prototype,"cycle",void 0),ne([F.field,se("design:type",String)],re.prototype,"selectedGizmo",void 0),ne([F.field,se("design:type",Boolean)],re.prototype,"localReference",void 0),re=ne([S("engine.gizmos",ft.GIZMOS)],re);var ae=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},de=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class he extends F{constructor(t){super(),this.name=null,this.visible=!0,this.opacity=1,this.hAlign="center",this.vAlign="center",this.width="100px",this.height="50px",this.positionX="0px",this.positionY="0px",this.isPointerBlocker=!0,t&&(this._parent=t,this.data.parentComponent=N(t))}get parent(){return this._parent}get parentComponent(){return this.data.parentComponent}}ae([F.field,de("design:type",Object)],he.prototype,"name",void 0),ae([F.field,de("design:type",Boolean)],he.prototype,"visible",void 0),ae([F.field,de("design:type",Number)],he.prototype,"opacity",void 0),ae([F.field,de("design:type",String)],he.prototype,"hAlign",void 0),ae([F.field,de("design:type",String)],he.prototype,"vAlign",void 0),ae([F.uiValue,de("design:type",Object)],he.prototype,"width",void 0),ae([F.uiValue,de("design:type",Object)],he.prototype,"height",void 0),ae([F.uiValue,de("design:type",Object)],he.prototype,"positionX",void 0),ae([F.uiValue,de("design:type",Object)],he.prototype,"positionY",void 0),ae([F.field,de("design:type",Boolean)],he.prototype,"isPointerBlocker",void 0);let le=class extends he{constructor(){super(null)}};le=ae([O("engine.shape",ft.UI_FULLSCREEN_SHAPE),de("design:paramtypes",[])],le);let pe=class extends he{constructor(){super(null)}};pe=ae([O("engine.shape",ft.UI_WORLD_SPACE_SHAPE),de("design:paramtypes",[])],pe);let ce=class extends he{constructor(){super(null)}};ce=ae([O("engine.shape",ft.UI_SCREEN_SPACE_SHAPE),de("design:paramtypes",[])],ce);let ue=class extends he{constructor(){super(...arguments),this.adaptWidth=!1,this.adaptHeight=!1,this.thickness=0,this.color=ht.Clear(),this.alignmentUsesSize=!0}};var ye;ae([F.field,de("design:type",Boolean)],ue.prototype,"adaptWidth",void 0),ae([F.field,de("design:type",Boolean)],ue.prototype,"adaptHeight",void 0),ae([F.field,de("design:type",Number)],ue.prototype,"thickness",void 0),ae([F.field,de("design:type",ht)],ue.prototype,"color",void 0),ae([F.field,de("design:type",Boolean)],ue.prototype,"alignmentUsesSize",void 0),ue=ae([O("engine.shape",ft.UI_CONTAINER_RECT)],ue),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(ye||(ye={}));let fe=class extends he{constructor(){super(...arguments),this.adaptWidth=!0,this.adaptHeight=!0,this.color=ht.Clear(),this.stackOrientation=ye.VERTICAL,this.spacing=0}};ae([F.field,de("design:type",Boolean)],fe.prototype,"adaptWidth",void 0),ae([F.field,de("design:type",Boolean)],fe.prototype,"adaptHeight",void 0),ae([F.field,de("design:type",ht)],fe.prototype,"color",void 0),ae([F.field,de("design:type",Number)],fe.prototype,"stackOrientation",void 0),ae([F.field,de("design:type",Number)],fe.prototype,"spacing",void 0),fe=ae([O("engine.shape",ft.UI_CONTAINER_STACK)],fe);let me=class extends he{constructor(){super(...arguments),this.fontSize=10,this.fontWeight="normal",this.thickness=0,this.cornerRadius=0,this.color=ht.White(),this.background=ht.White(),this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ht.Black(),this.text="button"}};ae([F.field,de("design:type",Number)],me.prototype,"fontSize",void 0),ae([F.field,de("design:type",String)],me.prototype,"fontWeight",void 0),ae([F.field,de("design:type",Number)],me.prototype,"thickness",void 0),ae([F.field,de("design:type",Number)],me.prototype,"cornerRadius",void 0),ae([F.field,de("design:type",ht)],me.prototype,"color",void 0),ae([F.field,de("design:type",ht)],me.prototype,"background",void 0),ae([F.field,de("design:type",Number)],me.prototype,"paddingTop",void 0),ae([F.field,de("design:type",Number)],me.prototype,"paddingRight",void 0),ae([F.field,de("design:type",Number)],me.prototype,"paddingBottom",void 0),ae([F.field,de("design:type",Number)],me.prototype,"paddingLeft",void 0),ae([F.field,de("design:type",Number)],me.prototype,"shadowBlur",void 0),ae([F.field,de("design:type",Number)],me.prototype,"shadowOffsetX",void 0),ae([F.field,de("design:type",Number)],me.prototype,"shadowOffsetY",void 0),ae([F.field,de("design:type",ht)],me.prototype,"shadowColor",void 0),ae([F.field,de("design:type",String)],me.prototype,"text",void 0),me=ae([O("engine.shape",ft.UI_BUTTON_SHAPE)],me);let ge=class extends he{constructor(){super(...arguments),this.outlineWidth=0,this.outlineColor=ht.White(),this.color=ht.White(),this.fontSize=10,this.fontAutoSize=!1,this.fontWeight="normal",this.value="",this.lineSpacing=0,this.lineCount=0,this.adaptWidth=!1,this.adaptHeight=!1,this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ht.Black(),this.hTextAlign="left",this.vTextAlign="bottom",this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0}};ae([F.field,de("design:type",Number)],ge.prototype,"outlineWidth",void 0),ae([F.field,de("design:type",ht)],ge.prototype,"outlineColor",void 0),ae([F.field,de("design:type",ht)],ge.prototype,"color",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"fontSize",void 0),ae([F.field,de("design:type",Boolean)],ge.prototype,"fontAutoSize",void 0),ae([F.field,de("design:type",String)],ge.prototype,"fontWeight",void 0),ae([F.field,de("design:type",String)],ge.prototype,"value",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"lineSpacing",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"lineCount",void 0),ae([F.field,de("design:type",Boolean)],ge.prototype,"adaptWidth",void 0),ae([F.field,de("design:type",Boolean)],ge.prototype,"adaptHeight",void 0),ae([F.field,de("design:type",Boolean)],ge.prototype,"textWrapping",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"shadowBlur",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"shadowOffsetX",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"shadowOffsetY",void 0),ae([F.field,de("design:type",ht)],ge.prototype,"shadowColor",void 0),ae([F.field,de("design:type",String)],ge.prototype,"hTextAlign",void 0),ae([F.field,de("design:type",String)],ge.prototype,"vTextAlign",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"paddingTop",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"paddingRight",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"paddingBottom",void 0),ae([F.field,de("design:type",Number)],ge.prototype,"paddingLeft",void 0),ge=ae([O("engine.shape",ft.UI_TEXT_SHAPE)],ge);let ve=class extends he{constructor(){super(...arguments),this.outlineWidth=0,this.outlineColor=ht.Black(),this.color=ht.Clear(),this.thickness=1,this.fontSize=10,this.fontWeight="normal",this.value="",this.placeholderColor=ht.White(),this.placeholder="",this.margin=10,this.maxWidth=100,this.hTextAlign="left",this.vTextAlign="bottom",this.autoStretchWidth=!0,this.background=ht.Black(),this.focusedBackground=ht.Black(),this.textWrapping=!1,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor=ht.White(),this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.onTextSubmit=null,this.onChanged=null,this.onFocus=null,this.onBlur=null}};ae([F.field,de("design:type",Number)],ve.prototype,"outlineWidth",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"outlineColor",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"color",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"thickness",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"fontSize",void 0),ae([F.field,de("design:type",String)],ve.prototype,"fontWeight",void 0),ae([F.field,de("design:type",String)],ve.prototype,"value",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"placeholderColor",void 0),ae([F.field,de("design:type",String)],ve.prototype,"placeholder",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"margin",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"maxWidth",void 0),ae([F.field,de("design:type",String)],ve.prototype,"hTextAlign",void 0),ae([F.field,de("design:type",String)],ve.prototype,"vTextAlign",void 0),ae([F.field,de("design:type",Boolean)],ve.prototype,"autoStretchWidth",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"background",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"focusedBackground",void 0),ae([F.field,de("design:type",Boolean)],ve.prototype,"textWrapping",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"shadowBlur",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"shadowOffsetX",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"shadowOffsetY",void 0),ae([F.field,de("design:type",ht)],ve.prototype,"shadowColor",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"paddingTop",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"paddingRight",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"paddingBottom",void 0),ae([F.field,de("design:type",Number)],ve.prototype,"paddingLeft",void 0),ae([Lt.uuidEvent,de("design:type",Object)],ve.prototype,"onTextSubmit",void 0),ae([Lt.uuidEvent,de("design:type",Object)],ve.prototype,"onChanged",void 0),ae([Lt.uuidEvent,de("design:type",Object)],ve.prototype,"onFocus",void 0),ae([Lt.uuidEvent,de("design:type",Object)],ve.prototype,"onBlur",void 0),ve=ae([O("engine.shape",ft.UI_INPUT_TEXT_SHAPE)],ve);let we=class extends he{constructor(t,e){super(t),this.sourceLeft=0,this.sourceTop=0,this.sourceWidth=1,this.sourceHeight=1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.sizeInPixels=!0,this.onClick=null,this.source=e}};ae([F.field,de("design:type",Number)],we.prototype,"sourceLeft",void 0),ae([F.field,de("design:type",Number)],we.prototype,"sourceTop",void 0),ae([F.field,de("design:type",Number)],we.prototype,"sourceWidth",void 0),ae([F.field,de("design:type",Number)],we.prototype,"sourceHeight",void 0),ae([F.component,de("design:type",St)],we.prototype,"source",void 0),ae([F.field,de("design:type",Number)],we.prototype,"paddingTop",void 0),ae([F.field,de("design:type",Number)],we.prototype,"paddingRight",void 0),ae([F.field,de("design:type",Number)],we.prototype,"paddingBottom",void 0),ae([F.field,de("design:type",Number)],we.prototype,"paddingLeft",void 0),ae([F.field,de("design:type",Boolean)],we.prototype,"sizeInPixels",void 0),ae([Lt.uuidEvent,de("design:type",Object)],we.prototype,"onClick",void 0),we=ae([O("engine.shape",ft.UI_IMAGE_SHAPE),de("design:paramtypes",[he,St])],we);let xe=class extends he{constructor(){super(...arguments),this.valueX=0,this.valueY=0,this.borderColor=ht.White(),this.backgroundColor=ht.Clear(),this.isHorizontal=!1,this.isVertical=!1,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.paddingLeft=0,this.onChanged=null}};ae([F.field,de("design:type",Number)],xe.prototype,"valueX",void 0),ae([F.field,de("design:type",Number)],xe.prototype,"valueY",void 0),ae([F.field,de("design:type",ht)],xe.prototype,"borderColor",void 0),ae([F.field,de("design:type",ht)],xe.prototype,"backgroundColor",void 0),ae([F.field,de("design:type",Boolean)],xe.prototype,"isHorizontal",void 0),ae([F.field,de("design:type",Boolean)],xe.prototype,"isVertical",void 0),ae([F.field,de("design:type",Number)],xe.prototype,"paddingTop",void 0),ae([F.field,de("design:type",Number)],xe.prototype,"paddingRight",void 0),ae([F.field,de("design:type",Number)],xe.prototype,"paddingBottom",void 0),ae([F.field,de("design:type",Number)],xe.prototype,"paddingLeft",void 0),ae([Lt.uuidEvent,de("design:type",Object)],xe.prototype,"onChanged",void 0),xe=ae([O("engine.shape",ft.UI_SLIDER_SHAPE)],xe);var Re,be=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Te=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let _e=Re=class extends F{constructor(){super(...arguments),this.useDummyModel=!1}static Dummy(){const t=new Re;return t.useDummyModel=!0,t}};be([F.field,Te("design:type",String)],_e.prototype,"id",void 0),be([F.field,Te("design:type",String)],_e.prototype,"name",void 0),be([F.field,Te("design:type",String)],_e.prototype,"bodyShape",void 0),be([F.field,Te("design:type",Array)],_e.prototype,"wearables",void 0),be([F.field,Te("design:type",Object)],_e.prototype,"skinColor",void 0),be([F.field,Te("design:type",Object)],_e.prototype,"hairColor",void 0),be([F.field,Te("design:type",Object)],_e.prototype,"eyeColor",void 0),be([F.field,Te("design:type",Boolean)],_e.prototype,"useDummyModel",void 0),_e=Re=be([S("engine.avatarShape",ft.AVATAR_SHAPE)],_e);var Ae=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Ee=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let ze=class extends Lt{constructor(t){super(t),this.type="onFocus",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],ze.prototype,"type",void 0),ze=Ae([S("engine.onFocus",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],ze);let Ce=class extends Lt{constructor(t){super(t),this.type="onTextSubmit",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Ce.prototype,"type",void 0),Ce=Ae([S("engine.onTextSubmit",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Ce);let Se=class extends Lt{constructor(t){super(t),this.type="onBlur",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Se.prototype,"type",void 0),Se=Ae([S("engine.onBlur",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Se);let Oe=class extends Lt{constructor(t){super(t),this.type="onClick",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Oe.prototype,"type",void 0),Oe=Ae([S("engine.onClick",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Oe);let Ie=class extends Lt{constructor(t){super(t),this.type="onEnter",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Ie.prototype,"type",void 0),Ie=Ae([S("engine.onEnter",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Ie);let Pe=class extends Lt{constructor(t){super(t),this.type="onChange",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Pe.prototype,"type",void 0),Pe=Ae([S("engine.onChange",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Pe);let Ne=class extends Lt{constructor(t){super(t),this.type="pointerDown",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Ne.prototype,"type",void 0),Ne=Ae([S("engine.pointerDown",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Ne);let Fe=class extends Lt{constructor(t){super(t),this.type="pointerUp",Qt.handlerMap[this.uuid]=this}};Ae([F.readonly,Ee("design:type",String)],Fe.prototype,"type",void 0),Fe=Ae([S("engine.pointerUp",ft.UUID_CALLBACK),Ee("design:paramtypes",[Function])],Fe);let Me=null,Le=null,Ue=null;function Be(){return Ue||(Ue=new j),Ue}class He{constructor(){this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Le){(Le=dcl.loadModule("@decentraland/CommunicationsController")).then(t=>{Me=t});const t=Be();dcl.subscribe("comms"),dcl.onEvent(e=>{"comms"===e.type&&(dcl.log("Receiving comms message ",e.data),t.notifyObservers(e.data))})}return Le}().then(t=>{this.connected=!0,this.flush()})}on(t,e){return Be().add(i=>{try{let n=JSON.parse(i.message);n.message===t&&e(n.payload,i.sender)}catch(i){dcl.error("Error parsing comms message "+i.message,i)}})}sendRaw(t){this.messageQueue.push(t),this.connected&&this.flush()}emit(t,e){const i=JSON.stringify({message:t,payload:e});this.sendRaw(i),Be().notifyObservers({message:i,sender:"self"})}flush(){if(0===this.messageQueue.length)return;if(!this.connected)return;if(!Me)return;if(this.flushing)return;const t=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(Me.rpcHandle,"send",[t]).then(t=>{this.flushing=!1,this.flush()},t=>{this.flushing=!1,o("Error flushing MessageBus",t)})}}i.d(e,"A",(function(){return je})),i.d(e,"n",(function(){return z})),i.d(e,"j",(function(){return S})),i.d(e,"m",(function(){return O})),i.d(e,"B",(function(){return N})),i.d(e,"o",(function(){return U})),i.d(e,"C",(function(){return s})),i.d(e,"y",(function(){return vt})),i.d(e,"e",(function(){return wt})),i.d(e,"f",(function(){return Rt})),i.d(e,"w",(function(){return bt})),i.d(e,"h",(function(){return Tt})),i.d(e,"u",(function(){return _t})),i.d(e,"k",(function(){return At})),i.d(e,"l",(function(){return Et})),i.d(e,"p",(function(){return zt})),i.d(e,"x",(function(){return St})),i.d(e,"c",(function(){return Ot})),i.d(e,"r",(function(){return Ft})),i.d(e,"d",(function(){return Mt})),i.d(e,"g",(function(){return Yt})),i.d(e,"i",(function(){return lt})),i.d(e,"v",(function(){return ot})),i.d(e,"z",(function(){return rt})),i.d(e,"b",(function(){return yt})),i.d(e,"a",(function(){return Dt})),i.d(e,"q",(function(){return Gt})),i.d(e,"t",(function(){return Ne})),i.d(e,"s",(function(){return He}));const De=new U("scene");De.uuid="0";const je=new class{constructor(t){this.eventManager=new c,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(g,this,this.componentAddedHandler),this.eventManager.addListener(m,this,this.componentRemovedHandler),this.rootEntity=t}get entities(){return this._entities}get disposableComponents(){return this._disposableComponents}addEntity(t){const e=t.getParent();if(t.isAddedToEngine())return t;t.eventManager=this.eventManager,t.engine=this,this._entities[t.uuid]=t,this.checkRequirementsAndAdd(t),e?e.isAddedToEngine()||e===this.rootEntity||s("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+e.uuid):t.setParent(this.rootEntity),t.alive=!0;for(let e in t.children){const i=t.children[e];i&&(i.isAddedToEngine()||this.addEntity(i))}return t}removeEntity(t){const e=t.uuid;if(t.isAddedToEngine()){for(let i in t.components){const n=this._componentGroups[i];if(n)for(let e in n)n[e].removeEntity(t);delete this.entityLists[i][e]}for(let e=0;e<this.simpleSystems.length;e++){const i=this.simpleSystems[e];i.onRemoveEntity&&i.onRemoveEntity(t)}for(let e in t.children){const i=t.children[e];i&&this.removeEntity(i)}return t.alive=!1,t.eventManager=null,delete this._entities[e],!0}s("Engine: Trying to remove non existent entity from engine."),t.isAddedToEngine()?s("Engine: Entity id: "+e):s(`Engine: Entity "${t.uuid}" has not been added to any engine yet.`),s("Engine: Entity's components:");for(let e in t.components)s(e);return!1}addSystem(t,e=0){if(-1!==this.addedSystems.indexOf(t))return s("Engine: Trying to add a system that is already added. Aborting"),t;if(this.systems.length>0)for(let i=0;i<this.systems.length;i++){const n=this.systems[i],s=i===this.systems.length-1;if(n.priority>e){this.addedSystems.push(t),this.systems.splice(i,0,{system:t,priority:e});break}if(s){this.addedSystems.push(t),this.systems.splice(i+1,0,{system:t,priority:e});break}}else this.addedSystems.push(t),this.systems.splice(1,0,{system:t,priority:e});return this.registerSystem(t),t}removeSystem(t){const e=this.addedSystems.indexOf(t);if(-1!==e){t.active=!1,t.deactivate&&t.deactivate(),this.addedSystems.splice(e,1);for(let e=0;e<this.systems.length;e++){this.systems[e].system===t&&this.systems.splice(e,1)}return!0}return!1}update(t){for(let e in this.systems){const i=this.systems[e].system;if(i.active&&i.update)try{i.update(t)}catch(t){o(t)}}return this}getEntitiesWithComponent(t){const e="string"==typeof t?t:I(t);return e in this.entityLists?this.entityLists[e]:this.entityLists[e]={}}registerComponent(t){const e=N(t),i=I(t),n=P(t);this._disposableComponents[e]=t,null!==n&&(this.eventManager.fireEvent(new E(e,i,n)),this.eventManager.fireEvent(new C(e,t)))}disposeComponent(t){const e=N(t);return delete this._disposableComponents[e]&&(this.eventManager.fireEvent(new z(e)),t.onDispose&&t.onDispose(),!0)}updateComponent(t){this.eventManager.fireEvent(new C(N(t),t))}getComponentGroup(...t){const e=new L(...t);e.active=!0;const i=e.requiresNames;for(let t=0;t<i.length;t++){const n=i[t];let s=this._componentGroups[n];s||(this._componentGroups[n]=s=[]),-1===s.indexOf(e)&&s.push(e)}for(let t in this._entities)this.checkRequirements(this._entities[t],e);return e}removeComponentGroup(t){if(t.active){t.active=!1;const e=t.requiresNames;for(let i=0;i<e.length;i++){const n=e[i];let s=this._componentGroups[n];if(s){const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}return!0}return!1}registerSystem(t){t.active=!0,t.activate&&t.activate(this),this.simpleSystems.push(t)}checkRequirementsAndAdd(t){if(t.isAddedToEngine()){for(let e in t.components){e in this.entityLists||(this.entityLists[e]={}),this.entityLists[e][t.uuid]=t;const i=this._componentGroups[e];if(i)for(let e in i)this.checkRequirements(t,i[e])}for(let e=0;e<this.simpleSystems.length;e++){const i=this.simpleSystems[e];i.onAddEntity&&i.onAddEntity(t)}}}checkRequirements(t,e){e.meetsRequirements(t)?e.hasEntity(t)||e.addEntity(t):e.hasEntity(t)&&e.removeEntity(t)}componentAddedHandler(t){const{entity:e,componentName:i}=t;if(!e.isAddedToEngine())return;this.entityLists[i]?this.entityLists[i][e.uuid]=e:this.entityLists[i]={[e.uuid]:e};const n=this._componentGroups[i];if(n)for(let t in n)this.checkRequirements(e,n[t])}componentRemovedHandler(t){const{entity:e,componentName:i}=t;if(!e.isAddedToEngine())return;delete this.entityLists[i][e.uuid];const n=this._componentGroups[i];if(n)for(let t in n)this.checkRequirements(e,n[t])}}(De);O.engine=je,"undefined"!=typeof dcl&&je.addSystem(new X(dcl),1/0),je.addSystem(Qt),je.addSystem(Zt),je.addSystem($t)},21:function(t,e,i){"use strict";i.r(e);var n=i(1);function s(t,e,i){const s=new n.o,o=new t;return o.visible=i,s.addComponentOrReplace(o),s.addComponentOrReplace(new n.y({position:e})),n.A.addEntity(s),s}const o=new n.o;var r=new n.p("models/Tree_Scene.glb");r.visible=!0,o.addComponent(r),o.addComponent(new n.y({position:new n.z(8,0,8)})),n.A.addEntity(o),s(n.f,new n.z(0,2,-2),!0),s(n.k,new n.z(-12,2,-2),!1),s(n.l,new n.z(8,2,4),!0),s(n.u,new n.z(12,2,-2),!1);let a=s(n.w,new n.z(14,2,-2),!0);s(n.h,new n.z(26,2,2),!0);let d=0;class h{update(t){(d+=t)>8&&(a.getComponent(n.w).visible=!1,r.visible=!1)}}h.instance=new h,n.A.addSystem(h.instance)}})}));